<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Standard Proxy Storage Slots | 以太坊改进提案 EIPs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="以太坊改进提案（EIPs）描述了以太坊平台的标准，包括核心协议规范，客户端API和合约标准。">
    
    <link rel="preload" href="/assets/css/0.styles.5d34d66f.css" as="style"><link rel="preload" href="/assets/js/app.8bdc7c41.js" as="script"><link rel="preload" href="/assets/js/3.afc73834.js" as="script"><link rel="preload" href="/assets/js/161.7ec4dccc.js" as="script"><link rel="prefetch" href="/assets/js/10.1f5e4f3e.js"><link rel="prefetch" href="/assets/js/100.5e83168e.js"><link rel="prefetch" href="/assets/js/101.abc1c66c.js"><link rel="prefetch" href="/assets/js/102.f1608d9e.js"><link rel="prefetch" href="/assets/js/103.50677a84.js"><link rel="prefetch" href="/assets/js/104.5ef37394.js"><link rel="prefetch" href="/assets/js/105.8b115527.js"><link rel="prefetch" href="/assets/js/106.78821836.js"><link rel="prefetch" href="/assets/js/107.f2cad26b.js"><link rel="prefetch" href="/assets/js/108.806c491a.js"><link rel="prefetch" href="/assets/js/109.2536f3b5.js"><link rel="prefetch" href="/assets/js/11.19d07763.js"><link rel="prefetch" href="/assets/js/110.aa8e5dff.js"><link rel="prefetch" href="/assets/js/111.486fd49e.js"><link rel="prefetch" href="/assets/js/112.0e5dc443.js"><link rel="prefetch" href="/assets/js/113.14d95a60.js"><link rel="prefetch" href="/assets/js/114.1282f1e1.js"><link rel="prefetch" href="/assets/js/115.8f4357cd.js"><link rel="prefetch" href="/assets/js/116.faa46692.js"><link rel="prefetch" href="/assets/js/117.ce807443.js"><link rel="prefetch" href="/assets/js/118.c075df33.js"><link rel="prefetch" href="/assets/js/119.c8959574.js"><link rel="prefetch" href="/assets/js/12.cc14cc21.js"><link rel="prefetch" href="/assets/js/120.a997950d.js"><link rel="prefetch" href="/assets/js/121.d55fab26.js"><link rel="prefetch" href="/assets/js/122.0d55f0f1.js"><link rel="prefetch" href="/assets/js/123.f0ef1c2b.js"><link rel="prefetch" href="/assets/js/124.84d00fe3.js"><link rel="prefetch" href="/assets/js/125.64e003e7.js"><link rel="prefetch" href="/assets/js/126.a31044d7.js"><link rel="prefetch" href="/assets/js/127.1ff3a4af.js"><link rel="prefetch" href="/assets/js/128.38dfcf65.js"><link rel="prefetch" href="/assets/js/129.39594e41.js"><link rel="prefetch" href="/assets/js/13.79199e7b.js"><link rel="prefetch" href="/assets/js/130.e85ffe06.js"><link rel="prefetch" href="/assets/js/131.fd90a8ff.js"><link rel="prefetch" href="/assets/js/132.62043b85.js"><link rel="prefetch" href="/assets/js/133.292c85d5.js"><link rel="prefetch" href="/assets/js/134.720824f2.js"><link rel="prefetch" href="/assets/js/135.330b0de9.js"><link rel="prefetch" href="/assets/js/136.d5434ef4.js"><link rel="prefetch" href="/assets/js/137.aefa600d.js"><link rel="prefetch" href="/assets/js/138.00d829f8.js"><link rel="prefetch" href="/assets/js/139.9e674d6d.js"><link rel="prefetch" href="/assets/js/14.3ec7ba2c.js"><link rel="prefetch" href="/assets/js/140.f2975dcb.js"><link rel="prefetch" href="/assets/js/141.51c0ec0a.js"><link rel="prefetch" href="/assets/js/142.aa405a6d.js"><link rel="prefetch" href="/assets/js/143.bf538ce9.js"><link rel="prefetch" href="/assets/js/144.e245817f.js"><link rel="prefetch" href="/assets/js/145.ac7bbacf.js"><link rel="prefetch" href="/assets/js/146.f604aa88.js"><link rel="prefetch" href="/assets/js/147.c48e9871.js"><link rel="prefetch" href="/assets/js/148.cacec7d1.js"><link rel="prefetch" href="/assets/js/149.724bdead.js"><link rel="prefetch" href="/assets/js/15.b10ae651.js"><link rel="prefetch" href="/assets/js/150.79848276.js"><link rel="prefetch" href="/assets/js/151.e5ba8697.js"><link rel="prefetch" href="/assets/js/152.b6ca9176.js"><link rel="prefetch" href="/assets/js/153.6162383e.js"><link rel="prefetch" href="/assets/js/154.d80adb79.js"><link rel="prefetch" href="/assets/js/155.067c9183.js"><link rel="prefetch" href="/assets/js/156.564c5338.js"><link rel="prefetch" href="/assets/js/157.f6e4fb9f.js"><link rel="prefetch" href="/assets/js/158.2780e531.js"><link rel="prefetch" href="/assets/js/159.95a9bbc1.js"><link rel="prefetch" href="/assets/js/16.dbfba018.js"><link rel="prefetch" href="/assets/js/160.f4445c3b.js"><link rel="prefetch" href="/assets/js/162.7ba8ee46.js"><link rel="prefetch" href="/assets/js/163.f0aa8208.js"><link rel="prefetch" href="/assets/js/164.4fe8c403.js"><link rel="prefetch" href="/assets/js/165.2d8ce405.js"><link rel="prefetch" href="/assets/js/166.6aa05391.js"><link rel="prefetch" href="/assets/js/167.82768149.js"><link rel="prefetch" href="/assets/js/168.b81a0c2a.js"><link rel="prefetch" href="/assets/js/169.435758b2.js"><link rel="prefetch" href="/assets/js/17.06ca53ac.js"><link rel="prefetch" href="/assets/js/170.4cd67a85.js"><link rel="prefetch" href="/assets/js/171.40baf340.js"><link rel="prefetch" href="/assets/js/172.186bf1f2.js"><link rel="prefetch" href="/assets/js/173.8b09cfe7.js"><link rel="prefetch" href="/assets/js/174.cd6f6ae5.js"><link rel="prefetch" href="/assets/js/175.9021e040.js"><link rel="prefetch" href="/assets/js/176.41fc6fc9.js"><link rel="prefetch" href="/assets/js/177.d49686da.js"><link rel="prefetch" href="/assets/js/178.9fc70e1d.js"><link rel="prefetch" href="/assets/js/179.9773da56.js"><link rel="prefetch" href="/assets/js/18.4e631205.js"><link rel="prefetch" href="/assets/js/180.edebbc8c.js"><link rel="prefetch" href="/assets/js/181.9c7e1e79.js"><link rel="prefetch" href="/assets/js/182.34c52e30.js"><link rel="prefetch" href="/assets/js/183.9702d486.js"><link rel="prefetch" href="/assets/js/184.34ceb786.js"><link rel="prefetch" href="/assets/js/185.e536c5d5.js"><link rel="prefetch" href="/assets/js/186.4140ef7b.js"><link rel="prefetch" href="/assets/js/187.4b9a7a52.js"><link rel="prefetch" href="/assets/js/188.94d50a82.js"><link rel="prefetch" href="/assets/js/189.e94b7567.js"><link rel="prefetch" href="/assets/js/19.a7b0e44d.js"><link rel="prefetch" href="/assets/js/190.a44802e9.js"><link rel="prefetch" href="/assets/js/191.2710b7f4.js"><link rel="prefetch" href="/assets/js/192.8fa54ace.js"><link rel="prefetch" href="/assets/js/193.45b30c52.js"><link rel="prefetch" href="/assets/js/194.34eb3369.js"><link rel="prefetch" href="/assets/js/195.e800d01e.js"><link rel="prefetch" href="/assets/js/196.993e37d7.js"><link rel="prefetch" href="/assets/js/197.0766e81c.js"><link rel="prefetch" href="/assets/js/198.de30e1a5.js"><link rel="prefetch" href="/assets/js/199.98b8b4e2.js"><link rel="prefetch" href="/assets/js/20.a23c95ca.js"><link rel="prefetch" href="/assets/js/200.dd8af084.js"><link rel="prefetch" href="/assets/js/201.b0651559.js"><link rel="prefetch" href="/assets/js/202.9fda4a48.js"><link rel="prefetch" href="/assets/js/203.d6a30442.js"><link rel="prefetch" href="/assets/js/204.35587f6c.js"><link rel="prefetch" href="/assets/js/205.321dcf85.js"><link rel="prefetch" href="/assets/js/206.9b73d45c.js"><link rel="prefetch" href="/assets/js/207.1db9d0bc.js"><link rel="prefetch" href="/assets/js/208.2323fc5c.js"><link rel="prefetch" href="/assets/js/209.073cc71d.js"><link rel="prefetch" href="/assets/js/21.13433d52.js"><link rel="prefetch" href="/assets/js/210.72f984ce.js"><link rel="prefetch" href="/assets/js/211.d9917eee.js"><link rel="prefetch" href="/assets/js/212.9ea4d869.js"><link rel="prefetch" href="/assets/js/213.c02335e9.js"><link rel="prefetch" href="/assets/js/214.4dd46b88.js"><link rel="prefetch" href="/assets/js/215.8db9fba0.js"><link rel="prefetch" href="/assets/js/216.0a0fd08f.js"><link rel="prefetch" href="/assets/js/217.a33898a0.js"><link rel="prefetch" href="/assets/js/218.5957a55c.js"><link rel="prefetch" href="/assets/js/219.2dce84f7.js"><link rel="prefetch" href="/assets/js/22.2d627e68.js"><link rel="prefetch" href="/assets/js/220.447c1ff1.js"><link rel="prefetch" href="/assets/js/221.5afacb44.js"><link rel="prefetch" href="/assets/js/222.36ee8bea.js"><link rel="prefetch" href="/assets/js/223.e4ee05e9.js"><link rel="prefetch" href="/assets/js/224.3a64ea59.js"><link rel="prefetch" href="/assets/js/225.f6a3250c.js"><link rel="prefetch" href="/assets/js/226.71e9b973.js"><link rel="prefetch" href="/assets/js/227.8484d6cc.js"><link rel="prefetch" href="/assets/js/228.f6928d72.js"><link rel="prefetch" href="/assets/js/229.fea960db.js"><link rel="prefetch" href="/assets/js/23.781adadc.js"><link rel="prefetch" href="/assets/js/230.d86e0be9.js"><link rel="prefetch" href="/assets/js/231.3bbf02cc.js"><link rel="prefetch" href="/assets/js/232.79acd9d3.js"><link rel="prefetch" href="/assets/js/233.cb8d0b73.js"><link rel="prefetch" href="/assets/js/234.e46ce374.js"><link rel="prefetch" href="/assets/js/235.dbac9148.js"><link rel="prefetch" href="/assets/js/236.a24aa05a.js"><link rel="prefetch" href="/assets/js/237.9713dbec.js"><link rel="prefetch" href="/assets/js/238.ae583618.js"><link rel="prefetch" href="/assets/js/239.3ed46955.js"><link rel="prefetch" href="/assets/js/24.fb9b1130.js"><link rel="prefetch" href="/assets/js/240.865b07ed.js"><link rel="prefetch" href="/assets/js/241.774c50b3.js"><link rel="prefetch" href="/assets/js/242.3dea429a.js"><link rel="prefetch" href="/assets/js/243.d066ef46.js"><link rel="prefetch" href="/assets/js/244.4314f19c.js"><link rel="prefetch" href="/assets/js/245.7411c815.js"><link rel="prefetch" href="/assets/js/246.c38575d2.js"><link rel="prefetch" href="/assets/js/247.878247f5.js"><link rel="prefetch" href="/assets/js/248.f78693bb.js"><link rel="prefetch" href="/assets/js/249.17761090.js"><link rel="prefetch" href="/assets/js/25.ab8a1140.js"><link rel="prefetch" href="/assets/js/250.5d4f34ec.js"><link rel="prefetch" href="/assets/js/251.da3f7b60.js"><link rel="prefetch" href="/assets/js/252.6946d29c.js"><link rel="prefetch" href="/assets/js/253.b13399dd.js"><link rel="prefetch" href="/assets/js/254.f5a78fe5.js"><link rel="prefetch" href="/assets/js/255.67794845.js"><link rel="prefetch" href="/assets/js/256.34867632.js"><link rel="prefetch" href="/assets/js/257.58ef8ea4.js"><link rel="prefetch" href="/assets/js/258.04035098.js"><link rel="prefetch" href="/assets/js/259.b76fa21f.js"><link rel="prefetch" href="/assets/js/26.7edc5849.js"><link rel="prefetch" href="/assets/js/260.c31c293e.js"><link rel="prefetch" href="/assets/js/261.c450d645.js"><link rel="prefetch" href="/assets/js/262.5dfb132e.js"><link rel="prefetch" href="/assets/js/263.d105b504.js"><link rel="prefetch" href="/assets/js/264.9c51b91a.js"><link rel="prefetch" href="/assets/js/265.cd869d87.js"><link rel="prefetch" href="/assets/js/266.2c81f2aa.js"><link rel="prefetch" href="/assets/js/267.0eb433a5.js"><link rel="prefetch" href="/assets/js/268.61403538.js"><link rel="prefetch" href="/assets/js/269.d8a5aa4a.js"><link rel="prefetch" href="/assets/js/27.a2d7eacd.js"><link rel="prefetch" href="/assets/js/270.9aa28099.js"><link rel="prefetch" href="/assets/js/271.428c6c80.js"><link rel="prefetch" href="/assets/js/272.3de4f874.js"><link rel="prefetch" href="/assets/js/273.614942c0.js"><link rel="prefetch" href="/assets/js/274.afead1c8.js"><link rel="prefetch" href="/assets/js/275.82fc06e8.js"><link rel="prefetch" href="/assets/js/276.2ce1b15e.js"><link rel="prefetch" href="/assets/js/277.59413c64.js"><link rel="prefetch" href="/assets/js/278.40f50c75.js"><link rel="prefetch" href="/assets/js/279.29aa4ac8.js"><link rel="prefetch" href="/assets/js/28.6a081e3d.js"><link rel="prefetch" href="/assets/js/280.e787a519.js"><link rel="prefetch" href="/assets/js/281.15087a2b.js"><link rel="prefetch" href="/assets/js/282.2573cc17.js"><link rel="prefetch" href="/assets/js/283.054c9336.js"><link rel="prefetch" href="/assets/js/284.6a794878.js"><link rel="prefetch" href="/assets/js/285.12d934a1.js"><link rel="prefetch" href="/assets/js/286.29f567eb.js"><link rel="prefetch" href="/assets/js/287.d4f0bca8.js"><link rel="prefetch" href="/assets/js/288.7c1dd248.js"><link rel="prefetch" href="/assets/js/289.9f985dbb.js"><link rel="prefetch" href="/assets/js/29.e6c29d28.js"><link rel="prefetch" href="/assets/js/290.3e3e8928.js"><link rel="prefetch" href="/assets/js/291.24ed9d7f.js"><link rel="prefetch" href="/assets/js/292.94fd80de.js"><link rel="prefetch" href="/assets/js/293.255bc297.js"><link rel="prefetch" href="/assets/js/294.84135584.js"><link rel="prefetch" href="/assets/js/295.89da57bd.js"><link rel="prefetch" href="/assets/js/296.90becf38.js"><link rel="prefetch" href="/assets/js/297.b4b88dbf.js"><link rel="prefetch" href="/assets/js/298.793c0f1f.js"><link rel="prefetch" href="/assets/js/299.2d9f2244.js"><link rel="prefetch" href="/assets/js/30.34f55274.js"><link rel="prefetch" href="/assets/js/300.b538064a.js"><link rel="prefetch" href="/assets/js/301.32a4bff4.js"><link rel="prefetch" href="/assets/js/302.6bffdcbe.js"><link rel="prefetch" href="/assets/js/303.47e446cd.js"><link rel="prefetch" href="/assets/js/304.ca260199.js"><link rel="prefetch" href="/assets/js/305.fca57eb3.js"><link rel="prefetch" href="/assets/js/306.b4f65a5b.js"><link rel="prefetch" href="/assets/js/307.3187f964.js"><link rel="prefetch" href="/assets/js/308.575c687a.js"><link rel="prefetch" href="/assets/js/309.b7699154.js"><link rel="prefetch" href="/assets/js/31.89805053.js"><link rel="prefetch" href="/assets/js/310.517f90c0.js"><link rel="prefetch" href="/assets/js/311.4e566ffc.js"><link rel="prefetch" href="/assets/js/312.1a2d1d4f.js"><link rel="prefetch" href="/assets/js/313.8ad92b70.js"><link rel="prefetch" href="/assets/js/314.091fa0d3.js"><link rel="prefetch" href="/assets/js/315.29ba5d51.js"><link rel="prefetch" href="/assets/js/316.23d38c8d.js"><link rel="prefetch" href="/assets/js/317.7ddf9625.js"><link rel="prefetch" href="/assets/js/318.6cf8cf4b.js"><link rel="prefetch" href="/assets/js/319.5c13edd5.js"><link rel="prefetch" href="/assets/js/32.973eb733.js"><link rel="prefetch" href="/assets/js/320.87009c76.js"><link rel="prefetch" href="/assets/js/321.379d2948.js"><link rel="prefetch" href="/assets/js/322.73fdbdd3.js"><link rel="prefetch" href="/assets/js/323.6caa2080.js"><link rel="prefetch" href="/assets/js/324.ab4dfd33.js"><link rel="prefetch" href="/assets/js/325.278e25db.js"><link rel="prefetch" href="/assets/js/326.462cf2df.js"><link rel="prefetch" href="/assets/js/327.f28c1c8f.js"><link rel="prefetch" href="/assets/js/328.8f58d3e2.js"><link rel="prefetch" href="/assets/js/329.6aa6d948.js"><link rel="prefetch" href="/assets/js/33.e353d4a7.js"><link rel="prefetch" href="/assets/js/330.93eb9f9a.js"><link rel="prefetch" href="/assets/js/331.80b87cc1.js"><link rel="prefetch" href="/assets/js/332.68f247fb.js"><link rel="prefetch" href="/assets/js/333.dd69e3b6.js"><link rel="prefetch" href="/assets/js/334.59b3382a.js"><link rel="prefetch" href="/assets/js/335.039070e2.js"><link rel="prefetch" href="/assets/js/336.82ef12a1.js"><link rel="prefetch" href="/assets/js/337.833b036d.js"><link rel="prefetch" href="/assets/js/338.290ea1fd.js"><link rel="prefetch" href="/assets/js/339.cfbeb3b3.js"><link rel="prefetch" href="/assets/js/34.d4ac227e.js"><link rel="prefetch" href="/assets/js/340.b2ca3fd2.js"><link rel="prefetch" href="/assets/js/341.e661e4d8.js"><link rel="prefetch" href="/assets/js/342.d521d8cb.js"><link rel="prefetch" href="/assets/js/343.699c8cd9.js"><link rel="prefetch" href="/assets/js/344.4717994c.js"><link rel="prefetch" href="/assets/js/345.895e09ef.js"><link rel="prefetch" href="/assets/js/346.421e0004.js"><link rel="prefetch" href="/assets/js/347.067ddec2.js"><link rel="prefetch" href="/assets/js/348.8ff7500d.js"><link rel="prefetch" href="/assets/js/349.1cb157da.js"><link rel="prefetch" href="/assets/js/35.79be4c2d.js"><link rel="prefetch" href="/assets/js/350.f3122d6b.js"><link rel="prefetch" href="/assets/js/351.73ab553d.js"><link rel="prefetch" href="/assets/js/352.c1d9b8a9.js"><link rel="prefetch" href="/assets/js/353.b835a1ed.js"><link rel="prefetch" href="/assets/js/354.2c63e1e0.js"><link rel="prefetch" href="/assets/js/355.77e39d15.js"><link rel="prefetch" href="/assets/js/356.b3b11ec8.js"><link rel="prefetch" href="/assets/js/357.d951bf49.js"><link rel="prefetch" href="/assets/js/358.03512851.js"><link rel="prefetch" href="/assets/js/359.8eaa97e8.js"><link rel="prefetch" href="/assets/js/36.7a071608.js"><link rel="prefetch" href="/assets/js/360.ff38e37d.js"><link rel="prefetch" href="/assets/js/361.2666265d.js"><link rel="prefetch" href="/assets/js/362.07e86e74.js"><link rel="prefetch" href="/assets/js/363.34e27b0e.js"><link rel="prefetch" href="/assets/js/364.a04debf3.js"><link rel="prefetch" href="/assets/js/365.f3ec12a0.js"><link rel="prefetch" href="/assets/js/366.5795988a.js"><link rel="prefetch" href="/assets/js/367.c7a03b31.js"><link rel="prefetch" href="/assets/js/368.fa987e7a.js"><link rel="prefetch" href="/assets/js/369.3d7d842e.js"><link rel="prefetch" href="/assets/js/37.d6151b8b.js"><link rel="prefetch" href="/assets/js/370.70957e5d.js"><link rel="prefetch" href="/assets/js/371.16dc2e81.js"><link rel="prefetch" href="/assets/js/372.82bef7ee.js"><link rel="prefetch" href="/assets/js/373.24a33d42.js"><link rel="prefetch" href="/assets/js/374.71360427.js"><link rel="prefetch" href="/assets/js/375.7d66db26.js"><link rel="prefetch" href="/assets/js/376.ca08b015.js"><link rel="prefetch" href="/assets/js/377.9aae8605.js"><link rel="prefetch" href="/assets/js/378.82b57f2e.js"><link rel="prefetch" href="/assets/js/379.95b9e308.js"><link rel="prefetch" href="/assets/js/38.02d1febb.js"><link rel="prefetch" href="/assets/js/380.6ccc50ac.js"><link rel="prefetch" href="/assets/js/381.7ab91f90.js"><link rel="prefetch" href="/assets/js/382.4633f2ba.js"><link rel="prefetch" href="/assets/js/383.621c20db.js"><link rel="prefetch" href="/assets/js/384.d9ed68d0.js"><link rel="prefetch" href="/assets/js/385.552a868c.js"><link rel="prefetch" href="/assets/js/386.48562ecd.js"><link rel="prefetch" href="/assets/js/387.25d5c791.js"><link rel="prefetch" href="/assets/js/388.8dd5308f.js"><link rel="prefetch" href="/assets/js/389.b793f086.js"><link rel="prefetch" href="/assets/js/39.52b78afa.js"><link rel="prefetch" href="/assets/js/390.c1b37ee1.js"><link rel="prefetch" href="/assets/js/391.cc6f6f1b.js"><link rel="prefetch" href="/assets/js/392.415a5066.js"><link rel="prefetch" href="/assets/js/393.a50a7825.js"><link rel="prefetch" href="/assets/js/394.397244ff.js"><link rel="prefetch" href="/assets/js/395.18236afd.js"><link rel="prefetch" href="/assets/js/396.33051f11.js"><link rel="prefetch" href="/assets/js/397.6829ff8e.js"><link rel="prefetch" href="/assets/js/398.3f6541b5.js"><link rel="prefetch" href="/assets/js/399.3a6bb206.js"><link rel="prefetch" href="/assets/js/4.3bb46a9f.js"><link rel="prefetch" href="/assets/js/40.c160b9fd.js"><link rel="prefetch" href="/assets/js/400.926d58c3.js"><link rel="prefetch" href="/assets/js/401.fa3a64c7.js"><link rel="prefetch" href="/assets/js/402.586739cf.js"><link rel="prefetch" href="/assets/js/403.e8bea648.js"><link rel="prefetch" href="/assets/js/404.8d4cb751.js"><link rel="prefetch" href="/assets/js/405.8b6daef4.js"><link rel="prefetch" href="/assets/js/406.35af9289.js"><link rel="prefetch" href="/assets/js/407.b265c7b5.js"><link rel="prefetch" href="/assets/js/408.839daefc.js"><link rel="prefetch" href="/assets/js/409.eb2ab1ca.js"><link rel="prefetch" href="/assets/js/41.0aba3e27.js"><link rel="prefetch" href="/assets/js/410.7914c481.js"><link rel="prefetch" href="/assets/js/411.80e7a82f.js"><link rel="prefetch" href="/assets/js/412.ec4398a7.js"><link rel="prefetch" href="/assets/js/413.e53397d8.js"><link rel="prefetch" href="/assets/js/414.1c3e959c.js"><link rel="prefetch" href="/assets/js/415.a18709ff.js"><link rel="prefetch" href="/assets/js/416.83310c95.js"><link rel="prefetch" href="/assets/js/417.4b19e45b.js"><link rel="prefetch" href="/assets/js/42.c79987f1.js"><link rel="prefetch" href="/assets/js/43.b0c90923.js"><link rel="prefetch" href="/assets/js/44.d1bd963b.js"><link rel="prefetch" href="/assets/js/45.a2d474d6.js"><link rel="prefetch" href="/assets/js/46.eac472d0.js"><link rel="prefetch" href="/assets/js/47.542459f0.js"><link rel="prefetch" href="/assets/js/48.341b8db8.js"><link rel="prefetch" href="/assets/js/49.a786e041.js"><link rel="prefetch" href="/assets/js/5.9dcd01fb.js"><link rel="prefetch" href="/assets/js/50.3e9d91ce.js"><link rel="prefetch" href="/assets/js/51.0729208c.js"><link rel="prefetch" href="/assets/js/52.76bd2586.js"><link rel="prefetch" href="/assets/js/53.5ff982be.js"><link rel="prefetch" href="/assets/js/54.23f15748.js"><link rel="prefetch" href="/assets/js/55.3bf2a5c1.js"><link rel="prefetch" href="/assets/js/56.1744142f.js"><link rel="prefetch" href="/assets/js/57.90d019e1.js"><link rel="prefetch" href="/assets/js/58.7b6dc848.js"><link rel="prefetch" href="/assets/js/59.bcd80f71.js"><link rel="prefetch" href="/assets/js/6.499be6d9.js"><link rel="prefetch" href="/assets/js/60.64e983eb.js"><link rel="prefetch" href="/assets/js/61.d22192ff.js"><link rel="prefetch" href="/assets/js/62.c84c7aaa.js"><link rel="prefetch" href="/assets/js/63.dd026eb1.js"><link rel="prefetch" href="/assets/js/64.2f75d60b.js"><link rel="prefetch" href="/assets/js/65.dc493049.js"><link rel="prefetch" href="/assets/js/66.edd545c7.js"><link rel="prefetch" href="/assets/js/67.798cfbfc.js"><link rel="prefetch" href="/assets/js/68.b0ebc9d8.js"><link rel="prefetch" href="/assets/js/69.c929ddc2.js"><link rel="prefetch" href="/assets/js/7.6447749c.js"><link rel="prefetch" href="/assets/js/70.3c2e3a65.js"><link rel="prefetch" href="/assets/js/71.db3a0474.js"><link rel="prefetch" href="/assets/js/72.410f23fa.js"><link rel="prefetch" href="/assets/js/73.cd7f0a9d.js"><link rel="prefetch" href="/assets/js/74.78655130.js"><link rel="prefetch" href="/assets/js/75.ee32be45.js"><link rel="prefetch" href="/assets/js/76.72062db1.js"><link rel="prefetch" href="/assets/js/77.3bcb196b.js"><link rel="prefetch" href="/assets/js/78.d022a438.js"><link rel="prefetch" href="/assets/js/79.c8bc3e01.js"><link rel="prefetch" href="/assets/js/8.71ec8233.js"><link rel="prefetch" href="/assets/js/80.7eb160e3.js"><link rel="prefetch" href="/assets/js/81.d83716f9.js"><link rel="prefetch" href="/assets/js/82.a16620eb.js"><link rel="prefetch" href="/assets/js/83.109e69d7.js"><link rel="prefetch" href="/assets/js/84.5d0e8d72.js"><link rel="prefetch" href="/assets/js/85.7ad0606e.js"><link rel="prefetch" href="/assets/js/86.f8bed698.js"><link rel="prefetch" href="/assets/js/87.00204387.js"><link rel="prefetch" href="/assets/js/88.23ecf470.js"><link rel="prefetch" href="/assets/js/89.dbe77c40.js"><link rel="prefetch" href="/assets/js/9.9c4893b5.js"><link rel="prefetch" href="/assets/js/90.a106e2e7.js"><link rel="prefetch" href="/assets/js/91.dcded4ed.js"><link rel="prefetch" href="/assets/js/92.484f8b1f.js"><link rel="prefetch" href="/assets/js/93.e3dd85b5.js"><link rel="prefetch" href="/assets/js/94.cd337446.js"><link rel="prefetch" href="/assets/js/95.12425d97.js"><link rel="prefetch" href="/assets/js/96.8f74c17c.js"><link rel="prefetch" href="/assets/js/97.77e41f84.js"><link rel="prefetch" href="/assets/js/98.bf44b86d.js"><link rel="prefetch" href="/assets/js/99.f75896be.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.029a7c95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d34d66f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">以太坊改进提案 EIPs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/summary/all.html" class="sidebar-link">All EIPs List</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Status</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/living.html" class="sidebar-link">Living (1)</a></li><li><a href="/summary/final.html" class="sidebar-link">Final (88)</a></li><li><a href="/summary/draft.html" class="sidebar-link">Draft (157)</a></li><li><a href="/summary/stagnant.html" class="sidebar-link">Stagnant (101)</a></li><li><a href="/summary/withdrawn.html" class="sidebar-link">Withdrawn (22)</a></li><li><a href="/summary/last-call.html" class="sidebar-link">Last Call (8)</a></li><li><a href="/summary/review.html" class="sidebar-link">Review (14)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Types</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/meta.html" class="sidebar-link">Meta (18)</a></li><li><a href="/summary/standards-track.html" class="sidebar-link">Standards Track (367)</a></li><li><a href="/summary/informational.html" class="sidebar-link">Informational (6)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Category</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/core.html" class="sidebar-link">Core (165)</a></li><li><a href="/summary/erc.html" class="sidebar-link">ERC (153)</a></li><li><a href="/summary/interface.html" class="sidebar-link">Interface (38)</a></li><li><a href="/summary/networking.html" class="sidebar-link">Networking (11)</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="simple-summary"><a href="#simple-summary" class="header-anchor">#</a> Simple Summary</h2> <p>Standardise how proxies store the address of the logic contract they delegate to, and other proxy specific information.</p> <h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>Delegating <strong>proxy contracts</strong> are widely used for both upgradeability and gas savings. These proxies rely on a <strong>logic contract</strong> (also known as implementation contract or master copy) that is called using <code>delegatecall</code>. This allows proxies to keep a persistent state (storage and balance) while the code is delegated to the logic contract.</p> <p>To avoid clashes in storage usage between the proxy and logic contract, the address of the logic contract is typically saved in a <a href="https://blog.zeppelinos.org/upgradeability-using-unstructured-storage/" target="_blank" rel="noopener noreferrer">specific storage slot<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> guaranteed to be never allocated by a compiler. This EIP proposes a set of standard slots to store proxy information. This allows clients like block explorers to properly extract and show this information to end users, and logic contracts to optionally act upon it.</p> <h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>Delegating proxies are widely in use, as a means to both support upgrades and reduce gas costs of deployments. Examples of these proxies are found in <a href="https://blog.zeppelinos.org/the-transparent-proxy-pattern/" target="_blank" rel="noopener noreferrer">ZeppelinOS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://medium.com/terminaldotco/escape-hatch-proxy-efb681de108d" target="_blank" rel="noopener noreferrer">Terminal<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://blog.gnosis.pm/solidity-delegateproxy-contracts-e09957d0f201" target="_blank" rel="noopener noreferrer">Gnosis<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/aragon/aragonOS/blob/dev/contracts/common/DelegateProxy.sol" target="_blank" rel="noopener noreferrer">AragonOS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/melonproject/melon-mail/blob/782aeff9418ac8cdd80875fd6c400bf96f3b03b3/solidity/contracts/DelegateProxy.sol" target="_blank" rel="noopener noreferrer">Melonport<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/LimeChain/UpgradeableSolidityContract/blob/14bcabc338130fb2aba2ce8bd27b885305566fce/contracts/Upgradeability/Forwardable.sol" target="_blank" rel="noopener noreferrer">Limechain<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/windingtree/upgradeable-token-labs/blob/af3b66096091d8282d5c9c55c33365315d85f3e1/contracts/upgradable/DelegateProxy.sol" target="_blank" rel="noopener noreferrer">WindingTree<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, <a href="https://github.com/decentraland/land/blob/5154046844f6f94a5074e82abe01381e6fd7c39d/contracts/upgradable/DelegateProxy.sol" target="_blank" rel="noopener noreferrer">Decentraland<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and many others.</p> <p>However, the lack of a common interface for obtaining the logic address for a proxy makes it impossible to build common tools that act upon this information.</p> <p>A classic example of this is a block explorer. Here, the end user wants to interact with the underlying logic contract and not the proxy itself. Having a common way to retrieve the logic contract address from a proxy would allow a block explorer, among other things, to show the ABI of the logic contract and not that of the proxy (see <a href="https://etherscan.io/token/0x00fdae9174357424a78afaad98da36fd66dd9e03#readContract" target="_blank" rel="noopener noreferrer">this proxy<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for an example). The explorer should check the storage of the contract at the distinguished slots to determine if it is indeed a proxy, in which case it should show information on both the proxy and the logic contract.</p> <p>Another example are logic contracts that explicitly act upon the fact that they are being proxied. This allows them to potentially trigger a code update as part of their logic, as is the case of <a href="/eip-1822.html">Universal Upgradeable Proxy Standard (EIP1822)</a>. A common storage slot allows these use cases independently of the specific proxy implementation being used.</p> <h2 id="specification"><a href="#specification" class="header-anchor">#</a> Specification</h2> <p>The main requirement for the storage slots chosen is that they must never be picked by the compiler to store any contract state variable. Otherwise, a logic contract could inadvertently overwrite this information on the proxy when writing to a variable of its own.</p> <p><a href="https://solidity.readthedocs.io/en/v0.4.21/miscellaneous.html#layout-of-state-variables-in-storage" target="_blank" rel="noopener noreferrer">Solidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> maps variables to storage based on the order in which they were declared, after the contract inheritance chain is linearized: the first variable is assigned the first slot, and so on. The exception are values in dynamic arrays and mappings, which are stored in the hash of the concatenation of the key and the storage slot. The Solidity development team has <a href="https://twitter.com/ethchris/status/1073692785176444928" target="_blank" rel="noopener noreferrer">confirmed<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> that the storage layout is to be preserved among new versions. Vyper seems to <a href="https://github.com/ethereum/vyper/issues/769" target="_blank" rel="noopener noreferrer">follow the same strategy as Solidity<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Note that contracts written in other languages, or directly in assembly, may incur in clashes.</p> <p>As such, the proposed storage slots for proxy-specific information are the following. They are chosen in such a way so they are guaranteed to not clash with state variables allocated by the compiler, since they depend on the hash of a string that does not start with a storage index. Furthermore, a <code>-1</code> offset is added so the preimage of the hash cannot be known, further reducing the chances of a possible attack.</p> <p>More slots for additional information can be added in subsequent ERCs as needed.</p> <p>Monitoring of proxies is essential to the security of many applications. It is thus essential to have the ability to track changes to the implementation and admin slots. Unfortunately, tracking changes to storage slots is not easy. Consequently, it is recommended that any function that changes any of these slots SHOULD also emit the corresponding event. This includes initialization, from <code>0x0</code> to the first non-zero value.</p> <h3 id="logic-contract-address"><a href="#logic-contract-address" class="header-anchor">#</a> Logic contract address</h3> <p>Storage slot <code>0x360894a13ba1a3210667c828492db98dca3e2076cc3735a920a3ca505d382bbc</code>
(obtained as <code>bytes32(uint256(keccak256('eip1967.proxy.implementation')) - 1)</code>).</p> <p>Holds the address of the logic contract that this proxy delegates to. SHOULD be empty if a beacon is used instead. Changes to this slot should be notified by the event:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">event</span> <span class="token function">Upgraded</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> implementation<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="beacon-contract-address"><a href="#beacon-contract-address" class="header-anchor">#</a> Beacon contract address</h3> <p>Storage slot <code>0xa3f0ad74e5423aebfd80d3ef4346578335a9a72aeaee59ff6cb3582b35133d50</code> (obtained as <code>bytes32(uint256(keccak256('eip1967.proxy.beacon')) - 1)</code>).</p> <p>Holds the address of the beacon contract this proxy relies on (fallback). SHOULD be empty if a logic address is used directly instead, and should only be considered if the logic contract slot is empty. See the Beacons section below. Changes to this slot should be notified by the event:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">event</span> <span class="token function">BeaconUpgraded</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> beacon<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="admin-address"><a href="#admin-address" class="header-anchor">#</a> Admin address</h3> <p>Storage slot <code>0xb53127684a568b3173ae13b9f8a6016e243e63b6e8ee1178d6a717850b5d6103</code>
(obtained as <code>bytes32(uint256(keccak256('eip1967.proxy.admin')) - 1)</code>).</p> <p>Holds the address that is allowed to upgrade the logic contract address for this proxy (optional). Changes to this slot should be notified by the event:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">event</span> <span class="token function">AdminChanged</span><span class="token punctuation">(</span><span class="token builtin">address</span> previousAdmin<span class="token punctuation">,</span> <span class="token builtin">address</span> newAdmin<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="rationale"><a href="#rationale" class="header-anchor">#</a> Rationale</h2> <p>This EIP standardises the <strong>storage slot</strong> for the logic contract address, instead of a public method on the proxy contract as <a href="/eip-897.html">DelegateProxy (EIP897)</a> does. The rationale for this is that proxies should never expose functions to end users that could potentially clash with those of the logic contract.</p> <p>Note that a clash may occur even among functions with different names, since the ABI relies on just four bytes for the function selector. This can lead to unexpected errors, or even exploits, where a call to a proxied contract returns a different value than expected, since the proxy intercepts the call and answers with a value of its own.</p> <p>From <a href="https://medium.com/nomic-labs-blog/malicious-backdoors-in-ethereum-proxies-62629adf3357" target="_blank" rel="noopener noreferrer"><em>Malicious backdoors in Ethereum proxies</em><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> by Nomic Labs:</p> <blockquote><p>Any function in the Proxy contract whose selector matches with one in the implementation contract will be called directly, completely skipping the implementation code.</p> <p>Because the function selectors use a fixed amount of bytes, there will always be the possibility of a clash. This isn’t an issue for day to day development, given that the Solidity compiler will detect a selector clash within a contract, but this becomes exploitable when selectors are used for cross-contract interaction. Clashes can be abused to create a seemingly well-behaved contract that’s actually concealing a backdoor.</p></blockquote> <p>The fact that proxy public functions are potentially exploitable makes it necessary to standardise the logic contract address in a different way. This approach is also used as part of <a href="/eip-1822.html">Universal Upgradeable Proxy Standard (EIP1822)</a>, which could become a specialization of this EIP.</p> <h2 id="beacons"><a href="#beacons" class="header-anchor">#</a> Beacons</h2> <p>Some use-cases rely on multiple proxy contracts delegating their calls to the same logic contract. If each contract was to store the address of the logic contract using the logic contract storage slot, upgrading them would require writing to the corresponding storage slot of every instance, which could be very expensive in terms of gas.</p> <p>Another approach is to have each proxy retrieve the logic contract's address from a dedicated &quot;beacon&quot;. Using this pattern, the address of the logic contract can be modified in the beacon and take immediate effect for all the corresponding proxy contracts.</p> <p>A beacon MUST implement the function:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>function implementation() returns (address)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Beacon based proxy contracts do not use the logic contract slot. Instead, they use the beacon contract slot to store the address of the beacon they are attached to. In order to know the logic contract used by a beacon proxy, one should:</p> <ul><li>Read the address of the beacon for the beacon logic storage slot;</li> <li>Call the <code>implementation()</code> function on the beacon contract.</li></ul> <p>The result of the <code>implementation()</code> function on the beacon contract SHOULD NOT depend on the caller (<code>msg.sender</code>).</p> <h2 id="implementation"><a href="#implementation" class="header-anchor">#</a> Implementation</h2> <p>Sample proxy implementations that follow this standard can be found in the <a href="https://github.com/zeppelinos/zos/blob/dc9e4ed/packages/lib/contracts/upgradeability/BaseUpgradeabilityProxy.sol" target="_blank" rel="noopener noreferrer">ZeppelinOS repository<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, albeit with a different set of slots.</p> <h2 id="copyright"><a href="#copyright" class="header-anchor">#</a> Copyright</h2> <p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" rel="noopener noreferrer">CC0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ethlibrary/EIPs/edit/master/EIPS/eip-1967.md" target="_blank" rel="noopener noreferrer">帮助完善文档</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/26/2021, 5:30:00 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8bdc7c41.js" defer></script><script src="/assets/js/3.afc73834.js" defer></script><script src="/assets/js/161.7ec4dccc.js" defer></script>
  </body>
</html>
