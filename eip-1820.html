<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Pseudo-introspection Registry Contract | 以太坊改进提案 EIPs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="以太坊改进提案（EIPs）描述了以太坊平台的标准，包括核心协议规范，客户端API和合约标准。">
    
    <link rel="preload" href="/assets/css/0.styles.5d34d66f.css" as="style"><link rel="preload" href="/assets/js/app.53cd5b34.js" as="script"><link rel="preload" href="/assets/js/3.afc73834.js" as="script"><link rel="preload" href="/assets/js/142.b4c7433c.js" as="script"><link rel="prefetch" href="/assets/js/10.1f5e4f3e.js"><link rel="prefetch" href="/assets/js/100.5e83168e.js"><link rel="prefetch" href="/assets/js/101.abc1c66c.js"><link rel="prefetch" href="/assets/js/102.f1608d9e.js"><link rel="prefetch" href="/assets/js/103.50677a84.js"><link rel="prefetch" href="/assets/js/104.5ef37394.js"><link rel="prefetch" href="/assets/js/105.8b115527.js"><link rel="prefetch" href="/assets/js/106.78821836.js"><link rel="prefetch" href="/assets/js/107.f2cad26b.js"><link rel="prefetch" href="/assets/js/108.806c491a.js"><link rel="prefetch" href="/assets/js/109.2536f3b5.js"><link rel="prefetch" href="/assets/js/11.19d07763.js"><link rel="prefetch" href="/assets/js/110.aa8e5dff.js"><link rel="prefetch" href="/assets/js/111.486fd49e.js"><link rel="prefetch" href="/assets/js/112.0e5dc443.js"><link rel="prefetch" href="/assets/js/113.14d95a60.js"><link rel="prefetch" href="/assets/js/114.1282f1e1.js"><link rel="prefetch" href="/assets/js/115.8f4357cd.js"><link rel="prefetch" href="/assets/js/116.faa46692.js"><link rel="prefetch" href="/assets/js/117.ce807443.js"><link rel="prefetch" href="/assets/js/118.c075df33.js"><link rel="prefetch" href="/assets/js/119.c8959574.js"><link rel="prefetch" href="/assets/js/12.cc14cc21.js"><link rel="prefetch" href="/assets/js/120.a997950d.js"><link rel="prefetch" href="/assets/js/121.ee4549e8.js"><link rel="prefetch" href="/assets/js/122.2c22977d.js"><link rel="prefetch" href="/assets/js/123.f0ef1c2b.js"><link rel="prefetch" href="/assets/js/124.84d00fe3.js"><link rel="prefetch" href="/assets/js/125.64e003e7.js"><link rel="prefetch" href="/assets/js/126.a31044d7.js"><link rel="prefetch" href="/assets/js/127.1ff3a4af.js"><link rel="prefetch" href="/assets/js/128.38dfcf65.js"><link rel="prefetch" href="/assets/js/129.39594e41.js"><link rel="prefetch" href="/assets/js/13.79199e7b.js"><link rel="prefetch" href="/assets/js/130.e85ffe06.js"><link rel="prefetch" href="/assets/js/131.fd90a8ff.js"><link rel="prefetch" href="/assets/js/132.62043b85.js"><link rel="prefetch" href="/assets/js/133.292c85d5.js"><link rel="prefetch" href="/assets/js/134.720824f2.js"><link rel="prefetch" href="/assets/js/135.330b0de9.js"><link rel="prefetch" href="/assets/js/136.d5434ef4.js"><link rel="prefetch" href="/assets/js/137.aefa600d.js"><link rel="prefetch" href="/assets/js/138.797f09ea.js"><link rel="prefetch" href="/assets/js/139.9e674d6d.js"><link rel="prefetch" href="/assets/js/14.3ec7ba2c.js"><link rel="prefetch" href="/assets/js/140.f2975dcb.js"><link rel="prefetch" href="/assets/js/141.51c0ec0a.js"><link rel="prefetch" href="/assets/js/143.bf538ce9.js"><link rel="prefetch" href="/assets/js/144.813a767b.js"><link rel="prefetch" href="/assets/js/145.8e35e98b.js"><link rel="prefetch" href="/assets/js/146.f604aa88.js"><link rel="prefetch" href="/assets/js/147.5b1e7ab8.js"><link rel="prefetch" href="/assets/js/148.f1c25d01.js"><link rel="prefetch" href="/assets/js/149.e1de4f68.js"><link rel="prefetch" href="/assets/js/15.b10ae651.js"><link rel="prefetch" href="/assets/js/150.d8785b19.js"><link rel="prefetch" href="/assets/js/151.97e4d45f.js"><link rel="prefetch" href="/assets/js/152.60b9a345.js"><link rel="prefetch" href="/assets/js/153.c215540b.js"><link rel="prefetch" href="/assets/js/154.d80adb79.js"><link rel="prefetch" href="/assets/js/155.067c9183.js"><link rel="prefetch" href="/assets/js/156.564c5338.js"><link rel="prefetch" href="/assets/js/157.f6e4fb9f.js"><link rel="prefetch" href="/assets/js/158.84f450b9.js"><link rel="prefetch" href="/assets/js/159.8437eb1c.js"><link rel="prefetch" href="/assets/js/16.184f078c.js"><link rel="prefetch" href="/assets/js/160.f4445c3b.js"><link rel="prefetch" href="/assets/js/161.7ec4dccc.js"><link rel="prefetch" href="/assets/js/162.7ba8ee46.js"><link rel="prefetch" href="/assets/js/163.f0aa8208.js"><link rel="prefetch" href="/assets/js/164.4fe8c403.js"><link rel="prefetch" href="/assets/js/165.2d8ce405.js"><link rel="prefetch" href="/assets/js/166.6aa05391.js"><link rel="prefetch" href="/assets/js/167.82768149.js"><link rel="prefetch" href="/assets/js/168.b81a0c2a.js"><link rel="prefetch" href="/assets/js/169.435758b2.js"><link rel="prefetch" href="/assets/js/17.f08ecfe3.js"><link rel="prefetch" href="/assets/js/170.4a19f99a.js"><link rel="prefetch" href="/assets/js/171.8b67db69.js"><link rel="prefetch" href="/assets/js/172.186bf1f2.js"><link rel="prefetch" href="/assets/js/173.b50f6304.js"><link rel="prefetch" href="/assets/js/174.9eeed8c4.js"><link rel="prefetch" href="/assets/js/175.9021e040.js"><link rel="prefetch" href="/assets/js/176.41fc6fc9.js"><link rel="prefetch" href="/assets/js/177.d49686da.js"><link rel="prefetch" href="/assets/js/178.9fc70e1d.js"><link rel="prefetch" href="/assets/js/179.9773da56.js"><link rel="prefetch" href="/assets/js/18.8a5e525b.js"><link rel="prefetch" href="/assets/js/180.edebbc8c.js"><link rel="prefetch" href="/assets/js/181.9c7e1e79.js"><link rel="prefetch" href="/assets/js/182.34c52e30.js"><link rel="prefetch" href="/assets/js/183.9702d486.js"><link rel="prefetch" href="/assets/js/184.34ceb786.js"><link rel="prefetch" href="/assets/js/185.e536c5d5.js"><link rel="prefetch" href="/assets/js/186.11665bdc.js"><link rel="prefetch" href="/assets/js/187.5ad2506b.js"><link rel="prefetch" href="/assets/js/188.94d50a82.js"><link rel="prefetch" href="/assets/js/189.e94b7567.js"><link rel="prefetch" href="/assets/js/19.07dc175d.js"><link rel="prefetch" href="/assets/js/190.a44802e9.js"><link rel="prefetch" href="/assets/js/191.2710b7f4.js"><link rel="prefetch" href="/assets/js/192.8fa54ace.js"><link rel="prefetch" href="/assets/js/193.45b30c52.js"><link rel="prefetch" href="/assets/js/194.369f9cb0.js"><link rel="prefetch" href="/assets/js/195.7974d262.js"><link rel="prefetch" href="/assets/js/196.993e37d7.js"><link rel="prefetch" href="/assets/js/197.0766e81c.js"><link rel="prefetch" href="/assets/js/198.de30e1a5.js"><link rel="prefetch" href="/assets/js/199.98b8b4e2.js"><link rel="prefetch" href="/assets/js/20.a23c95ca.js"><link rel="prefetch" href="/assets/js/200.dd8af084.js"><link rel="prefetch" href="/assets/js/201.b0651559.js"><link rel="prefetch" href="/assets/js/202.9fda4a48.js"><link rel="prefetch" href="/assets/js/203.ed8c4ff4.js"><link rel="prefetch" href="/assets/js/204.35587f6c.js"><link rel="prefetch" href="/assets/js/205.321dcf85.js"><link rel="prefetch" href="/assets/js/206.9b73d45c.js"><link rel="prefetch" href="/assets/js/207.b107bd89.js"><link rel="prefetch" href="/assets/js/208.63bce933.js"><link rel="prefetch" href="/assets/js/209.073cc71d.js"><link rel="prefetch" href="/assets/js/21.13433d52.js"><link rel="prefetch" href="/assets/js/210.42f9cfe6.js"><link rel="prefetch" href="/assets/js/211.574f0c0a.js"><link rel="prefetch" href="/assets/js/212.9ea4d869.js"><link rel="prefetch" href="/assets/js/213.c02335e9.js"><link rel="prefetch" href="/assets/js/214.4dd46b88.js"><link rel="prefetch" href="/assets/js/215.8db9fba0.js"><link rel="prefetch" href="/assets/js/216.0a0fd08f.js"><link rel="prefetch" href="/assets/js/217.a33898a0.js"><link rel="prefetch" href="/assets/js/218.5957a55c.js"><link rel="prefetch" href="/assets/js/219.2dce84f7.js"><link rel="prefetch" href="/assets/js/22.40f322f4.js"><link rel="prefetch" href="/assets/js/220.830eaf36.js"><link rel="prefetch" href="/assets/js/221.aae7daca.js"><link rel="prefetch" href="/assets/js/222.36ee8bea.js"><link rel="prefetch" href="/assets/js/223.e4ee05e9.js"><link rel="prefetch" href="/assets/js/224.3a64ea59.js"><link rel="prefetch" href="/assets/js/225.f7fad7d1.js"><link rel="prefetch" href="/assets/js/226.e7d97c69.js"><link rel="prefetch" href="/assets/js/227.8484d6cc.js"><link rel="prefetch" href="/assets/js/228.f6928d72.js"><link rel="prefetch" href="/assets/js/229.fea960db.js"><link rel="prefetch" href="/assets/js/23.1d7e441e.js"><link rel="prefetch" href="/assets/js/230.d86e0be9.js"><link rel="prefetch" href="/assets/js/231.3bbf02cc.js"><link rel="prefetch" href="/assets/js/232.79acd9d3.js"><link rel="prefetch" href="/assets/js/233.cb8d0b73.js"><link rel="prefetch" href="/assets/js/234.e46ce374.js"><link rel="prefetch" href="/assets/js/235.dbac9148.js"><link rel="prefetch" href="/assets/js/236.a24aa05a.js"><link rel="prefetch" href="/assets/js/237.9713dbec.js"><link rel="prefetch" href="/assets/js/238.ae583618.js"><link rel="prefetch" href="/assets/js/239.3ed46955.js"><link rel="prefetch" href="/assets/js/24.9c2fceba.js"><link rel="prefetch" href="/assets/js/240.865b07ed.js"><link rel="prefetch" href="/assets/js/241.ab5fbbcc.js"><link rel="prefetch" href="/assets/js/242.801c0b49.js"><link rel="prefetch" href="/assets/js/243.d066ef46.js"><link rel="prefetch" href="/assets/js/244.4314f19c.js"><link rel="prefetch" href="/assets/js/245.7411c815.js"><link rel="prefetch" href="/assets/js/246.04f4cf64.js"><link rel="prefetch" href="/assets/js/247.a8d37f4b.js"><link rel="prefetch" href="/assets/js/248.02e38126.js"><link rel="prefetch" href="/assets/js/249.17761090.js"><link rel="prefetch" href="/assets/js/25.ab8a1140.js"><link rel="prefetch" href="/assets/js/250.e0474f9d.js"><link rel="prefetch" href="/assets/js/251.4ee85ae5.js"><link rel="prefetch" href="/assets/js/252.6946d29c.js"><link rel="prefetch" href="/assets/js/253.b13399dd.js"><link rel="prefetch" href="/assets/js/254.f5a78fe5.js"><link rel="prefetch" href="/assets/js/255.67794845.js"><link rel="prefetch" href="/assets/js/256.34867632.js"><link rel="prefetch" href="/assets/js/257.58ef8ea4.js"><link rel="prefetch" href="/assets/js/258.14ef75e5.js"><link rel="prefetch" href="/assets/js/259.b76fa21f.js"><link rel="prefetch" href="/assets/js/26.7edc5849.js"><link rel="prefetch" href="/assets/js/260.c31c293e.js"><link rel="prefetch" href="/assets/js/261.c450d645.js"><link rel="prefetch" href="/assets/js/262.5dfb132e.js"><link rel="prefetch" href="/assets/js/263.37d18eba.js"><link rel="prefetch" href="/assets/js/264.e8ffafbf.js"><link rel="prefetch" href="/assets/js/265.cd869d87.js"><link rel="prefetch" href="/assets/js/266.def5a565.js"><link rel="prefetch" href="/assets/js/267.3783978a.js"><link rel="prefetch" href="/assets/js/268.61403538.js"><link rel="prefetch" href="/assets/js/269.d8a5aa4a.js"><link rel="prefetch" href="/assets/js/27.b69b1ace.js"><link rel="prefetch" href="/assets/js/270.9aa28099.js"><link rel="prefetch" href="/assets/js/271.428c6c80.js"><link rel="prefetch" href="/assets/js/272.3de4f874.js"><link rel="prefetch" href="/assets/js/273.614942c0.js"><link rel="prefetch" href="/assets/js/274.afead1c8.js"><link rel="prefetch" href="/assets/js/275.82fc06e8.js"><link rel="prefetch" href="/assets/js/276.2ce1b15e.js"><link rel="prefetch" href="/assets/js/277.59413c64.js"><link rel="prefetch" href="/assets/js/278.40f50c75.js"><link rel="prefetch" href="/assets/js/279.4ec1739a.js"><link rel="prefetch" href="/assets/js/28.6a081e3d.js"><link rel="prefetch" href="/assets/js/280.61eb02df.js"><link rel="prefetch" href="/assets/js/281.15087a2b.js"><link rel="prefetch" href="/assets/js/282.2573cc17.js"><link rel="prefetch" href="/assets/js/283.054c9336.js"><link rel="prefetch" href="/assets/js/284.6a794878.js"><link rel="prefetch" href="/assets/js/285.12d934a1.js"><link rel="prefetch" href="/assets/js/286.29f567eb.js"><link rel="prefetch" href="/assets/js/287.d4f0bca8.js"><link rel="prefetch" href="/assets/js/288.7c1dd248.js"><link rel="prefetch" href="/assets/js/289.9f985dbb.js"><link rel="prefetch" href="/assets/js/29.88c3d7a0.js"><link rel="prefetch" href="/assets/js/290.3e3e8928.js"><link rel="prefetch" href="/assets/js/291.24ed9d7f.js"><link rel="prefetch" href="/assets/js/292.94fd80de.js"><link rel="prefetch" href="/assets/js/293.255bc297.js"><link rel="prefetch" href="/assets/js/294.84135584.js"><link rel="prefetch" href="/assets/js/295.89da57bd.js"><link rel="prefetch" href="/assets/js/296.90becf38.js"><link rel="prefetch" href="/assets/js/297.b4b88dbf.js"><link rel="prefetch" href="/assets/js/298.793c0f1f.js"><link rel="prefetch" href="/assets/js/299.2d9f2244.js"><link rel="prefetch" href="/assets/js/30.6e454535.js"><link rel="prefetch" href="/assets/js/300.b538064a.js"><link rel="prefetch" href="/assets/js/301.59db8d5c.js"><link rel="prefetch" href="/assets/js/302.bf3613ee.js"><link rel="prefetch" href="/assets/js/303.47e446cd.js"><link rel="prefetch" href="/assets/js/304.e4fe1250.js"><link rel="prefetch" href="/assets/js/305.72f47081.js"><link rel="prefetch" href="/assets/js/306.82abe4ff.js"><link rel="prefetch" href="/assets/js/307.9a918c80.js"><link rel="prefetch" href="/assets/js/308.41c6cbe5.js"><link rel="prefetch" href="/assets/js/309.b7699154.js"><link rel="prefetch" href="/assets/js/31.89805053.js"><link rel="prefetch" href="/assets/js/310.2df6db7d.js"><link rel="prefetch" href="/assets/js/311.4e566ffc.js"><link rel="prefetch" href="/assets/js/312.b14927a8.js"><link rel="prefetch" href="/assets/js/313.9a3a03b4.js"><link rel="prefetch" href="/assets/js/314.73ef56ea.js"><link rel="prefetch" href="/assets/js/315.ac840fdf.js"><link rel="prefetch" href="/assets/js/316.85e3f949.js"><link rel="prefetch" href="/assets/js/317.7ddf9625.js"><link rel="prefetch" href="/assets/js/318.6cf8cf4b.js"><link rel="prefetch" href="/assets/js/319.96cd410f.js"><link rel="prefetch" href="/assets/js/32.466f882c.js"><link rel="prefetch" href="/assets/js/320.9b6f465f.js"><link rel="prefetch" href="/assets/js/321.0ee77635.js"><link rel="prefetch" href="/assets/js/322.3eb2b017.js"><link rel="prefetch" href="/assets/js/323.c57ab299.js"><link rel="prefetch" href="/assets/js/324.0f1d56a7.js"><link rel="prefetch" href="/assets/js/325.8067c839.js"><link rel="prefetch" href="/assets/js/326.8b78aa29.js"><link rel="prefetch" href="/assets/js/327.d1c40698.js"><link rel="prefetch" href="/assets/js/328.b36608f9.js"><link rel="prefetch" href="/assets/js/329.e406b0fd.js"><link rel="prefetch" href="/assets/js/33.e353d4a7.js"><link rel="prefetch" href="/assets/js/330.6ec8af82.js"><link rel="prefetch" href="/assets/js/331.4b45eac5.js"><link rel="prefetch" href="/assets/js/332.8a94f392.js"><link rel="prefetch" href="/assets/js/333.d8da079c.js"><link rel="prefetch" href="/assets/js/334.d0881502.js"><link rel="prefetch" href="/assets/js/335.234fee32.js"><link rel="prefetch" href="/assets/js/336.f8f79e46.js"><link rel="prefetch" href="/assets/js/337.833b036d.js"><link rel="prefetch" href="/assets/js/338.9cfed6cb.js"><link rel="prefetch" href="/assets/js/339.75d7aad4.js"><link rel="prefetch" href="/assets/js/34.d4ac227e.js"><link rel="prefetch" href="/assets/js/340.978777e5.js"><link rel="prefetch" href="/assets/js/341.3792e0d7.js"><link rel="prefetch" href="/assets/js/342.a2ee7afd.js"><link rel="prefetch" href="/assets/js/343.6e6a7db2.js"><link rel="prefetch" href="/assets/js/344.5dc33a83.js"><link rel="prefetch" href="/assets/js/345.360a3a9d.js"><link rel="prefetch" href="/assets/js/346.59a71d99.js"><link rel="prefetch" href="/assets/js/347.e4fa6cb8.js"><link rel="prefetch" href="/assets/js/348.443570fc.js"><link rel="prefetch" href="/assets/js/349.1cb157da.js"><link rel="prefetch" href="/assets/js/35.79be4c2d.js"><link rel="prefetch" href="/assets/js/350.22b0d480.js"><link rel="prefetch" href="/assets/js/351.73ab553d.js"><link rel="prefetch" href="/assets/js/352.8422bce3.js"><link rel="prefetch" href="/assets/js/353.b7b7ef35.js"><link rel="prefetch" href="/assets/js/354.26eb4816.js"><link rel="prefetch" href="/assets/js/355.3ce60b83.js"><link rel="prefetch" href="/assets/js/356.caa5ea13.js"><link rel="prefetch" href="/assets/js/357.b4c6eab8.js"><link rel="prefetch" href="/assets/js/358.03512851.js"><link rel="prefetch" href="/assets/js/359.8c93f455.js"><link rel="prefetch" href="/assets/js/36.7a071608.js"><link rel="prefetch" href="/assets/js/360.80900a44.js"><link rel="prefetch" href="/assets/js/361.37bd3f46.js"><link rel="prefetch" href="/assets/js/362.5ab6d13b.js"><link rel="prefetch" href="/assets/js/363.aee1fb95.js"><link rel="prefetch" href="/assets/js/364.033be969.js"><link rel="prefetch" href="/assets/js/365.92952495.js"><link rel="prefetch" href="/assets/js/366.0ec2ef55.js"><link rel="prefetch" href="/assets/js/367.c67484d8.js"><link rel="prefetch" href="/assets/js/368.ad58679f.js"><link rel="prefetch" href="/assets/js/369.369ea8d4.js"><link rel="prefetch" href="/assets/js/37.d6151b8b.js"><link rel="prefetch" href="/assets/js/370.8c0faa32.js"><link rel="prefetch" href="/assets/js/371.d1db2074.js"><link rel="prefetch" href="/assets/js/372.e5a12ca8.js"><link rel="prefetch" href="/assets/js/373.97fcd748.js"><link rel="prefetch" href="/assets/js/374.d24e04e2.js"><link rel="prefetch" href="/assets/js/375.2f4eef4d.js"><link rel="prefetch" href="/assets/js/376.5880be64.js"><link rel="prefetch" href="/assets/js/377.a20dd17f.js"><link rel="prefetch" href="/assets/js/378.a2cb3268.js"><link rel="prefetch" href="/assets/js/379.4793f7c1.js"><link rel="prefetch" href="/assets/js/38.02d1febb.js"><link rel="prefetch" href="/assets/js/380.6f62bbee.js"><link rel="prefetch" href="/assets/js/381.792d5c48.js"><link rel="prefetch" href="/assets/js/382.4633f2ba.js"><link rel="prefetch" href="/assets/js/383.66990efd.js"><link rel="prefetch" href="/assets/js/384.8c15437d.js"><link rel="prefetch" href="/assets/js/385.552a868c.js"><link rel="prefetch" href="/assets/js/386.d56603f3.js"><link rel="prefetch" href="/assets/js/387.10f8f7b8.js"><link rel="prefetch" href="/assets/js/388.16859fc3.js"><link rel="prefetch" href="/assets/js/389.9fc0d9c8.js"><link rel="prefetch" href="/assets/js/39.52b78afa.js"><link rel="prefetch" href="/assets/js/390.c1b37ee1.js"><link rel="prefetch" href="/assets/js/391.4803794f.js"><link rel="prefetch" href="/assets/js/392.5f2eabf9.js"><link rel="prefetch" href="/assets/js/393.4ff90fa7.js"><link rel="prefetch" href="/assets/js/394.bae8bb12.js"><link rel="prefetch" href="/assets/js/395.198f79e0.js"><link rel="prefetch" href="/assets/js/396.20afca71.js"><link rel="prefetch" href="/assets/js/397.642eaa58.js"><link rel="prefetch" href="/assets/js/398.38a6bdaa.js"><link rel="prefetch" href="/assets/js/399.ba8c0de6.js"><link rel="prefetch" href="/assets/js/4.a68597db.js"><link rel="prefetch" href="/assets/js/40.c160b9fd.js"><link rel="prefetch" href="/assets/js/400.8dce863a.js"><link rel="prefetch" href="/assets/js/401.73b97374.js"><link rel="prefetch" href="/assets/js/402.e4ebc0c4.js"><link rel="prefetch" href="/assets/js/403.fe37f0ad.js"><link rel="prefetch" href="/assets/js/404.4445e5df.js"><link rel="prefetch" href="/assets/js/405.dc8c2dc1.js"><link rel="prefetch" href="/assets/js/406.13e68fb3.js"><link rel="prefetch" href="/assets/js/407.95947fa2.js"><link rel="prefetch" href="/assets/js/408.aa542e95.js"><link rel="prefetch" href="/assets/js/409.ab36c9a6.js"><link rel="prefetch" href="/assets/js/41.0aba3e27.js"><link rel="prefetch" href="/assets/js/410.48e50f15.js"><link rel="prefetch" href="/assets/js/411.7c29ffda.js"><link rel="prefetch" href="/assets/js/412.baf7f510.js"><link rel="prefetch" href="/assets/js/413.a0e30ad4.js"><link rel="prefetch" href="/assets/js/414.9e2e1a7d.js"><link rel="prefetch" href="/assets/js/415.061d4607.js"><link rel="prefetch" href="/assets/js/416.334e0459.js"><link rel="prefetch" href="/assets/js/417.bb9cf97e.js"><link rel="prefetch" href="/assets/js/42.a2225282.js"><link rel="prefetch" href="/assets/js/43.60b8cc73.js"><link rel="prefetch" href="/assets/js/44.d1bd963b.js"><link rel="prefetch" href="/assets/js/45.a2d474d6.js"><link rel="prefetch" href="/assets/js/46.eac472d0.js"><link rel="prefetch" href="/assets/js/47.542459f0.js"><link rel="prefetch" href="/assets/js/48.341b8db8.js"><link rel="prefetch" href="/assets/js/49.a786e041.js"><link rel="prefetch" href="/assets/js/5.28151e60.js"><link rel="prefetch" href="/assets/js/50.3e9d91ce.js"><link rel="prefetch" href="/assets/js/51.0729208c.js"><link rel="prefetch" href="/assets/js/52.76bd2586.js"><link rel="prefetch" href="/assets/js/53.5ff982be.js"><link rel="prefetch" href="/assets/js/54.23f15748.js"><link rel="prefetch" href="/assets/js/55.3bf2a5c1.js"><link rel="prefetch" href="/assets/js/56.1744142f.js"><link rel="prefetch" href="/assets/js/57.90d019e1.js"><link rel="prefetch" href="/assets/js/58.7b6dc848.js"><link rel="prefetch" href="/assets/js/59.bcd80f71.js"><link rel="prefetch" href="/assets/js/6.8fdc2d2f.js"><link rel="prefetch" href="/assets/js/60.64e983eb.js"><link rel="prefetch" href="/assets/js/61.d22192ff.js"><link rel="prefetch" href="/assets/js/62.c84c7aaa.js"><link rel="prefetch" href="/assets/js/63.dd026eb1.js"><link rel="prefetch" href="/assets/js/64.2f75d60b.js"><link rel="prefetch" href="/assets/js/65.dc493049.js"><link rel="prefetch" href="/assets/js/66.edd545c7.js"><link rel="prefetch" href="/assets/js/67.798cfbfc.js"><link rel="prefetch" href="/assets/js/68.b0ebc9d8.js"><link rel="prefetch" href="/assets/js/69.c929ddc2.js"><link rel="prefetch" href="/assets/js/7.6447749c.js"><link rel="prefetch" href="/assets/js/70.3c2e3a65.js"><link rel="prefetch" href="/assets/js/71.db3a0474.js"><link rel="prefetch" href="/assets/js/72.410f23fa.js"><link rel="prefetch" href="/assets/js/73.d8cae215.js"><link rel="prefetch" href="/assets/js/74.78655130.js"><link rel="prefetch" href="/assets/js/75.ee32be45.js"><link rel="prefetch" href="/assets/js/76.72062db1.js"><link rel="prefetch" href="/assets/js/77.3bcb196b.js"><link rel="prefetch" href="/assets/js/78.d022a438.js"><link rel="prefetch" href="/assets/js/79.c8bc3e01.js"><link rel="prefetch" href="/assets/js/8.71ec8233.js"><link rel="prefetch" href="/assets/js/80.7eb160e3.js"><link rel="prefetch" href="/assets/js/81.d83716f9.js"><link rel="prefetch" href="/assets/js/82.a16620eb.js"><link rel="prefetch" href="/assets/js/83.109e69d7.js"><link rel="prefetch" href="/assets/js/84.5d0e8d72.js"><link rel="prefetch" href="/assets/js/85.7ad0606e.js"><link rel="prefetch" href="/assets/js/86.f8bed698.js"><link rel="prefetch" href="/assets/js/87.00204387.js"><link rel="prefetch" href="/assets/js/88.23ecf470.js"><link rel="prefetch" href="/assets/js/89.dbe77c40.js"><link rel="prefetch" href="/assets/js/9.241577bb.js"><link rel="prefetch" href="/assets/js/90.a106e2e7.js"><link rel="prefetch" href="/assets/js/91.dcded4ed.js"><link rel="prefetch" href="/assets/js/92.484f8b1f.js"><link rel="prefetch" href="/assets/js/93.e3dd85b5.js"><link rel="prefetch" href="/assets/js/94.cd337446.js"><link rel="prefetch" href="/assets/js/95.12425d97.js"><link rel="prefetch" href="/assets/js/96.8f74c17c.js"><link rel="prefetch" href="/assets/js/97.77e41f84.js"><link rel="prefetch" href="/assets/js/98.bf44b86d.js"><link rel="prefetch" href="/assets/js/99.f75896be.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.029a7c95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d34d66f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">以太坊改进提案 EIPs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/summary/all.html" class="sidebar-link">All EIPs List</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Status</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/living.html" class="sidebar-link">Living (1)</a></li><li><a href="/summary/final.html" class="sidebar-link">Final (88)</a></li><li><a href="/summary/draft.html" class="sidebar-link">Draft (157)</a></li><li><a href="/summary/stagnant.html" class="sidebar-link">Stagnant (101)</a></li><li><a href="/summary/withdrawn.html" class="sidebar-link">Withdrawn (22)</a></li><li><a href="/summary/last-call.html" class="sidebar-link">Last Call (8)</a></li><li><a href="/summary/review.html" class="sidebar-link">Review (14)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Types</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/meta.html" class="sidebar-link">Meta (18)</a></li><li><a href="/summary/standards-track.html" class="sidebar-link">Standards Track (367)</a></li><li><a href="/summary/informational.html" class="sidebar-link">Informational (6)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Category</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/core.html" class="sidebar-link">Core (165)</a></li><li><a href="/summary/erc.html" class="sidebar-link">ERC (153)</a></li><li><a href="/summary/interface.html" class="sidebar-link">Interface (38)</a></li><li><a href="/summary/networking.html" class="sidebar-link">Networking (11)</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><blockquote><p>ℹ️ <strong><a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> has superseded <a href="/eip-820.html">ERC-820</a>.</strong> ℹ️<br> <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> fixes the incompatibility in the <a href="/eip-165.html">ERC-165</a> logic which was introduced by the Solidity 0.5 update.<br>
Have a look at the <a href="https://github.com/ethereum/EIPs/issues/820#issuecomment-464109166" target="_blank" rel="noopener noreferrer">official announcement<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and the comments about the <a href="https://github.com/ethereum/EIPs/issues/820#issuecomment-452465748" target="_blank" rel="noopener noreferrer">bug<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> and the <a href="https://github.com/ethereum/EIPs/issues/820#issuecomment-454021564" target="_blank" rel="noopener noreferrer">fix<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.<br>
Apart from this fix, <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> is functionally equivalent to <a href="/eip-820.html">ERC-820</a>.</p> <p>⚠️ <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> MUST be used in lieu of <a href="/eip-820.html">ERC-820</a>. ⚠️</p></blockquote> <h2 id="simple-summary"><a href="#simple-summary" class="header-anchor">#</a> Simple Summary</h2> <p>This standard defines a universal registry smart contract where any address (contract or regular account) can register which interface it supports and which smart contract is responsible for its implementation.</p> <p>This standard keeps backward compatibility with <a href="/eip-165.html">ERC-165</a>.</p> <h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>This standard defines a registry where smart contracts and regular accounts can publish which functionality they implement---either directly or through a proxy contract.</p> <p>Anyone can query this registry to ask if a specific address implements a given interface and which smart contract handles its implementation.</p> <p>This registry MAY be deployed on any chain and shares the same address on all chains.</p> <p>Interfaces with zeroes (<code>0</code>) as the last 28 bytes are considered <a href="/eip-165.html">ERC-165</a> interfaces,
and this registry SHALL forward the call to the contract to see if it implements the interface.</p> <p>This contract also acts as an <a href="/eip-165.html">ERC-165</a> cache to reduce gas consumption.</p> <h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>There have been different approaches to define pseudo-introspection in Ethereum.
The first is <a href="/eip-165.html">ERC-165</a> which has the limitation that it cannot be used by regular accounts.
The second attempt is <a href="https://github.com/ethereum/EIPs/issues/672" target="_blank" rel="noopener noreferrer">ERC-672<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> which uses reverse <a href="https://ens.domains/" target="_blank" rel="noopener noreferrer">ENS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>. Using reverse <a href="https://ens.domains/" target="_blank" rel="noopener noreferrer">ENS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> has two issues.
First, it is unnecessarily complicated, and second, <a href="https://ens.domains/" target="_blank" rel="noopener noreferrer">ENS<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is still a centralized contract controlled by a multisig.
This multisig theoretically would be able to modify the system.</p> <p>This standard is much simpler than <a href="https://github.com/ethereum/EIPs/issues/672" target="_blank" rel="noopener noreferrer">ERC-672<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>, and it is <em>fully</em> decentralized.</p> <p>This standard also provides a <em>unique</em> address for all chains.
Thus solving the problem of resolving the correct registry address for different chains.</p> <h2 id="specification"><a href="#specification" class="header-anchor">#</a> Specification</h2> <h3 id="erc-1820-registry-smart-contract"><a href="#erc-1820-registry-smart-contract" class="header-anchor">#</a> <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> Registry Smart Contract</h3> <blockquote><p>This is an exact copy of the code of the <a href="https://github.com/0xjac/ERC1820/blob/master/contracts/ERC1820Registry.sol" target="_blank" rel="noopener noreferrer">ERC1820 registry smart contract<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token comment">/* ERC1820 Pseudo-introspection Registry Contract
 * This standard defines a universal registry smart contract where any address (contract or regular account) can
 * register which interface it supports and which smart contract is responsible for its implementation.
 *
 * Written in 2019 by Jordi Baylina and Jacques Dafflon
 *
 * To the extent possible under law, the author(s) have dedicated all copyright and related and neighboring rights to
 * this software to the public domain worldwide. This software is distributed without any warranty.
 *
 * You should have received a copy of the CC0 Public Domain Dedication along with this software. If not, see
 * &lt;http://creativecommons.org/publicdomain/zero/1.0/&gt;.
 *
 *    ███████╗██████╗  ██████╗ ██╗ █████╗ ██████╗  ██████╗
 *    ██╔════╝██╔══██╗██╔════╝███║██╔══██╗╚════██╗██╔═████╗
 *    █████╗  ██████╔╝██║     ╚██║╚█████╔╝ █████╔╝██║██╔██║
 *    ██╔══╝  ██╔══██╗██║      ██║██╔══██╗██╔═══╝ ████╔╝██║
 *    ███████╗██║  ██║╚██████╗ ██║╚█████╔╝███████╗╚██████╔╝
 *    ╚══════╝╚═╝  ╚═╝ ╚═════╝ ╚═╝ ╚════╝ ╚══════╝ ╚═════╝
 *
 *    ██████╗ ███████╗ ██████╗ ██╗███████╗████████╗██████╗ ██╗   ██╗
 *    ██╔══██╗██╔════╝██╔════╝ ██║██╔════╝╚══██╔══╝██╔══██╗╚██╗ ██╔╝
 *    ██████╔╝█████╗  ██║  ███╗██║███████╗   ██║   ██████╔╝ ╚████╔╝
 *    ██╔══██╗██╔══╝  ██║   ██║██║╚════██║   ██║   ██╔══██╗  ╚██╔╝
 *    ██║  ██║███████╗╚██████╔╝██║███████║   ██║   ██║  ██║   ██║
 *    ╚═╝  ╚═╝╚══════╝ ╚═════╝ ╚═╝╚══════╝   ╚═╝   ╚═╝  ╚═╝   ╚═╝
 *
 */</span>
<span class="token keyword">pragma</span> <span class="token keyword">solidity</span> <span class="token number">0.5</span><span class="token number">.3</span><span class="token punctuation">;</span>
<span class="token comment">// IV is value needed to have a vanity address starting with '0x1820'.</span>
<span class="token comment">// IV: 53759</span>

<span class="token comment">/// @dev The interface a contract MUST implement if it is the implementer of</span>
<span class="token comment">/// some (other) interface for any address other than itself.</span>
<span class="token keyword">interface</span> <span class="token class-name">ERC1820ImplementerInterface</span> <span class="token punctuation">{</span>
    <span class="token comment">/// @notice Indicates whether the contract implements the interface 'interfaceHash' for the address 'addr' or not.</span>
    <span class="token comment">/// @param interfaceHash keccak256 hash of the name of the interface</span>
    <span class="token comment">/// @param addr Address for which the contract will implement the interface</span>
    <span class="token comment">/// @return ERC1820_ACCEPT_MAGIC only if the contract implements 'interfaceHash' for the address 'addr'.</span>
    <span class="token keyword">function</span> <span class="token function">canImplementInterfaceForAddress</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span> interfaceHash<span class="token punctuation">,</span> <span class="token builtin">address</span> addr<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>


<span class="token comment">/// @title ERC1820 Pseudo-introspection Registry Contract</span>
<span class="token comment">/// @author Jordi Baylina and Jacques Dafflon</span>
<span class="token comment">/// @notice This contract is the official implementation of the ERC1820 Registry.</span>
<span class="token comment">/// @notice For more details, see https://eips.ethereum.org/EIPS/eip-1820</span>
<span class="token keyword">contract</span> <span class="token class-name">ERC1820Registry</span> <span class="token punctuation">{</span>
    <span class="token comment">/// @notice ERC165 Invalid ID.</span>
    <span class="token builtin">bytes4</span> <span class="token keyword">constant</span> <span class="token keyword">internal</span> INVALID_ID <span class="token operator">=</span> <span class="token number">0xffffffff</span><span class="token punctuation">;</span>
    <span class="token comment">/// @notice Method ID for the ERC165 supportsInterface method (= `bytes4(keccak256('supportsInterface(bytes4)'))`).</span>
    <span class="token builtin">bytes4</span> <span class="token keyword">constant</span> <span class="token keyword">internal</span> ERC165ID <span class="token operator">=</span> <span class="token number">0x01ffc9a7</span><span class="token punctuation">;</span>
    <span class="token comment">/// @notice Magic value which is returned if a contract implements an interface on behalf of some other address.</span>
    <span class="token builtin">bytes32</span> <span class="token keyword">constant</span> <span class="token keyword">internal</span> ERC1820_ACCEPT_MAGIC <span class="token operator">=</span> <span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token string">&quot;ERC1820_ACCEPT_MAGIC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/// @notice mapping from addresses and interface hashes to their implementers.</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span> <span class="token operator">=&gt;</span> <span class="token builtin">address</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">internal</span> interfaces<span class="token punctuation">;</span>
    <span class="token comment">/// @notice mapping from addresses to their manager.</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token builtin">address</span><span class="token punctuation">)</span> <span class="token keyword">internal</span> managers<span class="token punctuation">;</span>
    <span class="token comment">/// @notice flag for each address and erc165 interface to indicate if it is cached.</span>
    <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token operator">=&gt;</span> <span class="token keyword">mapping</span><span class="token punctuation">(</span><span class="token builtin">bytes4</span> <span class="token operator">=&gt;</span> <span class="token builtin">bool</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token keyword">internal</span> erc165Cached<span class="token punctuation">;</span>

    <span class="token comment">/// @notice Indicates a contract is the 'implementer' of 'interfaceHash' for 'addr'.</span>
    <span class="token keyword">event</span> <span class="token function">InterfaceImplementerSet</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> addr<span class="token punctuation">,</span> <span class="token builtin">bytes32</span> <span class="token keyword">indexed</span> interfaceHash<span class="token punctuation">,</span> <span class="token builtin">address</span> <span class="token keyword">indexed</span> implementer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">/// @notice Indicates 'newManager' is the address of the new manager for 'addr'.</span>
    <span class="token keyword">event</span> <span class="token function">ManagerChanged</span><span class="token punctuation">(</span><span class="token builtin">address</span> <span class="token keyword">indexed</span> addr<span class="token punctuation">,</span> <span class="token builtin">address</span> <span class="token keyword">indexed</span> newManager<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">/// @notice Query if an address implements an interface and through which contract.</span>
    <span class="token comment">/// @param _addr Address being queried for the implementer of an interface.</span>
    <span class="token comment">/// (If '_addr' is the zero address then 'msg.sender' is assumed.)</span>
    <span class="token comment">/// @param _interfaceHash Keccak256 hash of the name of the interface as a string.</span>
    <span class="token comment">/// E.g., 'web3.utils.keccak256(&quot;ERC777TokensRecipient&quot;)' for the 'ERC777TokensRecipient' interface.</span>
    <span class="token comment">/// @return The address of the contract which implements the interface '_interfaceHash' for '_addr'</span>
    <span class="token comment">/// or '0' if '_addr' did not register an implementer for this interface.</span>
    <span class="token keyword">function</span> <span class="token function">getInterfaceImplementer</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">bytes32</span> _interfaceHash<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">address</span> addr <span class="token operator">=</span> _addr <span class="token operator">==</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> msg<span class="token punctuation">.</span>sender <span class="token punctuation">:</span> _addr<span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isERC165Interface</span><span class="token punctuation">(</span>_interfaceHash<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token builtin">bytes4</span> erc165InterfaceHash <span class="token operator">=</span> <span class="token builtin">bytes4</span><span class="token punctuation">(</span>_interfaceHash<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">return</span> <span class="token function">implementsERC165Interface</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> erc165InterfaceHash<span class="token punctuation">)</span> <span class="token operator">?</span> addr <span class="token punctuation">:</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> interfaces<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">[</span>_interfaceHash<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Sets the contract which implements a specific interface for an address.</span>
    <span class="token comment">/// Only the manager defined for that address can set it.</span>
    <span class="token comment">/// (Each address is the manager for itself until it sets a new manager.)</span>
    <span class="token comment">/// @param _addr Address for which to set the interface.</span>
    <span class="token comment">/// (If '_addr' is the zero address then 'msg.sender' is assumed.)</span>
    <span class="token comment">/// @param _interfaceHash Keccak256 hash of the name of the interface as a string.</span>
    <span class="token comment">/// E.g., 'web3.utils.keccak256(&quot;ERC777TokensRecipient&quot;)' for the 'ERC777TokensRecipient' interface.</span>
    <span class="token comment">/// @param _implementer Contract address implementing '_interfaceHash' for '_addr'.</span>
    <span class="token keyword">function</span> <span class="token function">setInterfaceImplementer</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">bytes32</span> _interfaceHash<span class="token punctuation">,</span> <span class="token builtin">address</span> _implementer<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token builtin">address</span> addr <span class="token operator">=</span> _addr <span class="token operator">==</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">?</span> msg<span class="token punctuation">.</span>sender <span class="token punctuation">:</span> _addr<span class="token punctuation">;</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token function">getManager</span><span class="token punctuation">(</span>addr<span class="token punctuation">)</span> <span class="token operator">==</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> <span class="token string">&quot;Not the manager&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">isERC165Interface</span><span class="token punctuation">(</span>_interfaceHash<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;Must not be an ERC165 hash&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>_implementer <span class="token operator">!=</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> _implementer <span class="token operator">!=</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">require</span><span class="token punctuation">(</span>
                <span class="token function">ERC1820ImplementerInterface</span><span class="token punctuation">(</span>_implementer<span class="token punctuation">)</span>
                    <span class="token punctuation">.</span><span class="token function">canImplementInterfaceForAddress</span><span class="token punctuation">(</span>_interfaceHash<span class="token punctuation">,</span> addr<span class="token punctuation">)</span> <span class="token operator">==</span> ERC1820_ACCEPT_MAGIC<span class="token punctuation">,</span>
                <span class="token string">&quot;Does not implement the interface&quot;</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        interfaces<span class="token punctuation">[</span>addr<span class="token punctuation">]</span><span class="token punctuation">[</span>_interfaceHash<span class="token punctuation">]</span> <span class="token operator">=</span> _implementer<span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">InterfaceImplementerSet</span><span class="token punctuation">(</span>addr<span class="token punctuation">,</span> _interfaceHash<span class="token punctuation">,</span> _implementer<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Sets '_newManager' as manager for '_addr'.</span>
    <span class="token comment">/// The new manager will be able to call 'setInterfaceImplementer' for '_addr'.</span>
    <span class="token comment">/// @param _addr Address for which to set the new manager.</span>
    <span class="token comment">/// @param _newManager Address of the new manager for 'addr'. (Pass '0x0' to reset the manager to '_addr'.)</span>
    <span class="token keyword">function</span> <span class="token function">setManager</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">address</span> _newManager<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token function">getManager</span><span class="token punctuation">(</span>_addr<span class="token punctuation">)</span> <span class="token operator">==</span> msg<span class="token punctuation">.</span>sender<span class="token punctuation">,</span> <span class="token string">&quot;Not the manager&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        managers<span class="token punctuation">[</span>_addr<span class="token punctuation">]</span> <span class="token operator">=</span> _newManager <span class="token operator">==</span> _addr <span class="token operator">?</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">:</span> _newManager<span class="token punctuation">;</span>
        <span class="token keyword">emit</span> <span class="token function">ManagerChanged</span><span class="token punctuation">(</span>_addr<span class="token punctuation">,</span> _newManager<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Get the manager of an address.</span>
    <span class="token comment">/// @param _addr Address for which to return the manager.</span>
    <span class="token comment">/// @return Address of the manager for a given address.</span>
    <span class="token keyword">function</span> <span class="token function">getManager</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// By default the manager of an address is the same address</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>managers<span class="token punctuation">[</span>_addr<span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> _addr<span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> managers<span class="token punctuation">[</span>_addr<span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Compute the keccak256 hash of an interface given its name.</span>
    <span class="token comment">/// @param _interfaceName Name of the interface.</span>
    <span class="token comment">/// @return The keccak256 hash of an interface name.</span>
    <span class="token keyword">function</span> <span class="token function">interfaceHash</span><span class="token punctuation">(</span><span class="token builtin">string</span> <span class="token keyword">calldata</span> _interfaceName<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span>_interfaceName<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/* --- ERC165 Related Functions --- */</span>
    <span class="token comment">/* --- Developed in collaboration with William Entriken. --- */</span>

    <span class="token comment">/// @notice Updates the cache with whether the contract implements an ERC165 interface or not.</span>
    <span class="token comment">/// @param _contract Address of the contract for which to update the cache.</span>
    <span class="token comment">/// @param _interfaceId ERC165 interface for which to update the cache.</span>
    <span class="token keyword">function</span> <span class="token function">updateERC165Cache</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token punctuation">{</span>
        interfaces<span class="token punctuation">[</span>_contract<span class="token punctuation">]</span><span class="token punctuation">[</span>_interfaceId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">implementsERC165InterfaceNoCache</span><span class="token punctuation">(</span>
            _contract<span class="token punctuation">,</span> _interfaceId<span class="token punctuation">)</span> <span class="token operator">?</span> _contract <span class="token punctuation">:</span> <span class="token builtin">address</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        erc165Cached<span class="token punctuation">[</span>_contract<span class="token punctuation">]</span><span class="token punctuation">[</span>_interfaceId<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Checks whether a contract implements an ERC165 interface or not.</span>
    <span class="token comment">//  If the result is not cached a direct lookup on the contract address is performed.</span>
    <span class="token comment">//  If the result is not cached or the cached value is out-of-date, the cache MUST be updated manually by calling</span>
    <span class="token comment">//  'updateERC165Cache' with the contract address.</span>
    <span class="token comment">/// @param _contract Address of the contract to check.</span>
    <span class="token comment">/// @param _interfaceId ERC165 interface to check.</span>
    <span class="token comment">/// @return True if '_contract' implements '_interfaceId', false otherwise.</span>
    <span class="token keyword">function</span> <span class="token function">implementsERC165Interface</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>erc165Cached<span class="token punctuation">[</span>_contract<span class="token punctuation">]</span><span class="token punctuation">[</span>_interfaceId<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token function">implementsERC165InterfaceNoCache</span><span class="token punctuation">(</span>_contract<span class="token punctuation">,</span> _interfaceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> interfaces<span class="token punctuation">[</span>_contract<span class="token punctuation">]</span><span class="token punctuation">[</span>_interfaceId<span class="token punctuation">]</span> <span class="token operator">==</span> _contract<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Checks whether a contract implements an ERC165 interface or not without using nor updating the cache.</span>
    <span class="token comment">/// @param _contract Address of the contract to check.</span>
    <span class="token comment">/// @param _interfaceId ERC165 interface to check.</span>
    <span class="token comment">/// @return True if '_contract' implements '_interfaceId', false otherwise.</span>
    <span class="token keyword">function</span> <span class="token function">implementsERC165InterfaceNoCache</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token builtin">uint256</span> success<span class="token punctuation">;</span>
        <span class="token builtin">uint256</span> result<span class="token punctuation">;</span>

        <span class="token punctuation">(</span>success<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">noThrowCall</span><span class="token punctuation">(</span>_contract<span class="token punctuation">,</span> ERC165ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> result <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">(</span>success<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">noThrowCall</span><span class="token punctuation">(</span>_contract<span class="token punctuation">,</span> INVALID_ID<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success <span class="token operator">==</span> <span class="token number">0</span> <span class="token operator">||</span> result <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token punctuation">(</span>success<span class="token punctuation">,</span> result<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token function">noThrowCall</span><span class="token punctuation">(</span>_contract<span class="token punctuation">,</span> _interfaceId<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>success <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">&amp;&amp;</span> result <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @notice Checks whether the hash is a ERC165 interface (ending with 28 zeroes) or not.</span>
    <span class="token comment">/// @param _interfaceHash The hash to check.</span>
    <span class="token comment">/// @return True if '_interfaceHash' is an ERC165 interface (ending with 28 zeroes), false otherwise.</span>
    <span class="token keyword">function</span> <span class="token function">isERC165Interface</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span> _interfaceHash<span class="token punctuation">)</span> <span class="token keyword">internal</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> _interfaceHash <span class="token operator">&amp;</span> <span class="token number">0x00000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/// @dev Make a call on a contract without throwing if the function does not exist.</span>
    <span class="token keyword">function</span> <span class="token function">noThrowCall</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span>
        <span class="token keyword">internal</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">uint256</span> success<span class="token punctuation">,</span> <span class="token builtin">uint256</span> result<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token builtin">bytes4</span> erc165ID <span class="token operator">=</span> ERC165ID<span class="token punctuation">;</span>

        <span class="token keyword">assembly</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> x <span class="token operator">:=</span> <span class="token function">mload</span><span class="token punctuation">(</span><span class="token number">0x40</span><span class="token punctuation">)</span>               <span class="token comment">// Find empty storage location using &quot;free memory pointer&quot;</span>
            <span class="token function">mstore</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> erc165ID<span class="token punctuation">)</span>                <span class="token comment">// Place signature at beginning of empty storage</span>
            <span class="token function">mstore</span><span class="token punctuation">(</span><span class="token function">add</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token number">0x04</span><span class="token punctuation">)</span><span class="token punctuation">,</span> _interfaceId<span class="token punctuation">)</span> <span class="token comment">// Place first argument directly next to signature</span>

            success <span class="token operator">:=</span> <span class="token function">staticcall</span><span class="token punctuation">(</span>
                <span class="token number">30000</span><span class="token punctuation">,</span>                         <span class="token comment">// 30k gas</span>
                _contract<span class="token punctuation">,</span>                     <span class="token comment">// To addr</span>
                x<span class="token punctuation">,</span>                             <span class="token comment">// Inputs are stored at location x</span>
                <span class="token number">0x24</span><span class="token punctuation">,</span>                          <span class="token comment">// Inputs are 36 (4 + 32) bytes long</span>
                x<span class="token punctuation">,</span>                             <span class="token comment">// Store output over input (saves space)</span>
                <span class="token number">0x20</span>                           <span class="token comment">// Outputs are 32 bytes long</span>
            <span class="token punctuation">)</span>

            result <span class="token operator">:=</span> <span class="token function">mload</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>                 <span class="token comment">// Load the result</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br></div></div><h3 id="deployment-transaction"><a href="#deployment-transaction" class="header-anchor">#</a> Deployment Transaction</h3> <p>Below is the raw transaction which MUST be used to deploy the smart contract on any chain.</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>0xf90a388085174876e800830c35008080b909e5608060405234801561001057600080fd5b506109c5806100206000396000f3fe608060405234801561001057600080fd5b50600436106100a5576000357c010000000000000000000000000000000000000000000000000000000090048063a41e7d5111610078578063a41e7d51146101d4578063aabbb8ca1461020a578063b705676514610236578063f712f3e814610280576100a5565b806329965a1d146100aa5780633d584063146100e25780635df8122f1461012457806365ba36c114610152575b600080fd5b6100e0600480360360608110156100c057600080fd5b50600160a060020a038135811691602081013591604090910135166102b6565b005b610108600480360360208110156100f857600080fd5b5035600160a060020a0316610570565b60408051600160a060020a039092168252519081900360200190f35b6100e06004803603604081101561013a57600080fd5b50600160a060020a03813581169160200135166105bc565b6101c26004803603602081101561016857600080fd5b81019060208101813564010000000081111561018357600080fd5b82018360208201111561019557600080fd5b803590602001918460018302840111640100000000831117156101b757600080fd5b5090925090506106b3565b60408051918252519081900360200190f35b6100e0600480360360408110156101ea57600080fd5b508035600160a060020a03169060200135600160e060020a0319166106ee565b6101086004803603604081101561022057600080fd5b50600160a060020a038135169060200135610778565b61026c6004803603604081101561024c57600080fd5b508035600160a060020a03169060200135600160e060020a0319166107ef565b604080519115158252519081900360200190f35b61026c6004803603604081101561029657600080fd5b508035600160a060020a03169060200135600160e060020a0319166108aa565b6000600160a060020a038416156102cd57836102cf565b335b9050336102db82610570565b600160a060020a031614610339576040805160e560020a62461bcd02815260206004820152600f60248201527f4e6f7420746865206d616e616765720000000000000000000000000000000000604482015290519081900360640190fd5b6103428361092a565b15610397576040805160e560020a62461bcd02815260206004820152601a60248201527f4d757374206e6f7420626520616e204552433136352068617368000000000000604482015290519081900360640190fd5b600160a060020a038216158015906103b85750600160a060020a0382163314155b156104ff5760405160200180807f455243313832305f4143434550545f4d4147494300000000000000000000000081525060140190506040516020818303038152906040528051906020012082600160a060020a031663249cb3fa85846040518363ffffffff167c01000000000000000000000000000000000000000000000000000000000281526004018083815260200182600160a060020a0316600160a060020a031681526020019250505060206040518083038186803b15801561047e57600080fd5b505afa158015610492573d6000803e3d6000fd5b505050506040513d60208110156104a857600080fd5b5051146104ff576040805160e560020a62461bcd02815260206004820181905260248201527f446f6573206e6f7420696d706c656d656e742074686520696e74657266616365604482015290519081900360640190fd5b600160a060020a03818116600081815260208181526040808320888452909152808220805473ffffffffffffffffffffffffffffffffffffffff19169487169485179055518692917f93baa6efbd2244243bfee6ce4cfdd1d04fc4c0e9a786abd3a41313bd352db15391a450505050565b600160a060020a03818116600090815260016020526040812054909116151561059a5750806105b7565b50600160a060020a03808216600090815260016020526040902054165b919050565b336105c683610570565b600160a060020a031614610624576040805160e560020a62461bcd02815260206004820152600f60248201527f4e6f7420746865206d616e616765720000000000000000000000000000000000604482015290519081900360640190fd5b81600160a060020a031681600160a060020a0316146106435780610646565b60005b600160a060020a03838116600081815260016020526040808220805473ffffffffffffffffffffffffffffffffffffffff19169585169590951790945592519184169290917f605c2dbf762e5f7d60a546d42e7205dcb1b011ebc62a61736a57c9089d3a43509190a35050565b600082826040516020018083838082843780830192505050925050506040516020818303038152906040528051906020012090505b92915050565b6106f882826107ef565b610703576000610705565b815b600160a060020a03928316600081815260208181526040808320600160e060020a031996909616808452958252808320805473ffffffffffffffffffffffffffffffffffffffff19169590971694909417909555908152600284528181209281529190925220805460ff19166001179055565b600080600160a060020a038416156107905783610792565b335b905061079d8361092a565b156107c357826107ad82826108aa565b6107b85760006107ba565b815b925050506106e8565b600160a060020a0390811660009081526020818152604080832086845290915290205416905092915050565b6000808061081d857f01ffc9a70000000000000000000000000000000000000000000000000000000061094c565b909250905081158061082d575080155b1561083d576000925050506106e8565b61084f85600160e060020a031961094c565b909250905081158061086057508015155b15610870576000925050506106e8565b61087a858561094c565b909250905060018214801561088f5750806001145b1561089f576001925050506106e8565b506000949350505050565b600160a060020a0382166000908152600260209081526040808320600160e060020a03198516845290915281205460ff1615156108f2576108eb83836107ef565b90506106e8565b50600160a060020a03808316600081815260208181526040808320600160e060020a0319871684529091529020549091161492915050565b7bffffffffffffffffffffffffffffffffffffffffffffffffffffffff161590565b6040517f01ffc9a7000000000000000000000000000000000000000000000000000000008082526004820183905260009182919060208160248189617530fa90519096909550935050505056fea165627a7a72305820377f4a2d4301ede9949f163f319021a6e9c687c292a5e2b2c4734c126b524e6c00291ba01820182018201820182018201820182018201820182018201820182018201820a01820182018201820182018201820182018201820182018201820182018201820
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The strings of <code>1820</code>'s at the end of the transaction are the <code>r</code> and <code>s</code> of the signature.
From this deterministic pattern (generated by a human), anyone can deduce that no one knows the private key for the deployment account.</p> <h3 id="deployment-method"><a href="#deployment-method" class="header-anchor">#</a> Deployment Method</h3> <p>This contract is going to be deployed using the keyless deployment method---also known as <a href="https://github.com/Arachnid/" target="_blank" rel="noopener noreferrer">Nick<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>'s method---which relies on a single-use address.
(See <a href="https://medium.com/@weka/how-to-send-ether-to-11-440-people-187e332566b7" target="_blank" rel="noopener noreferrer">Nick's article<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> for more details). This method works as follows:</p> <ol><li>Generate a transaction which deploys the contract from a new random account.</li></ol> <ul><li>This transaction MUST NOT use <a href="/eip-155.html">EIP-155</a> in order to work on any chain.</li> <li>This transaction MUST have a relatively high gas price to be deployed on any chain. In this case, it is going to be 100 Gwei.</li></ul> <ol start="2"><li><p>Set the <code>v</code>, <code>r</code>, <code>s</code> of the transaction signature to the following values:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>v: 27,
r: 0x1820182018201820182018201820182018201820182018201820182018201820'
s: 0x1820182018201820182018201820182018201820182018201820182018201820'
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Those <code>r</code> and <code>s</code> values---made of a repeating pattern of <code>1820</code>'s---are predictable &quot;random numbers&quot; generated deterministically by a human.</p></li> <li><p>We recover the sender of this transaction, i.e., the single-use deployment account.</p> <blockquote><p>Thus we obtain an account that can broadcast that transaction, but we also have the warranty that nobody knows the private key of that account.</p></blockquote></li> <li><p>Send exactly 0.08 ether to this single-use deployment account.</p></li> <li><p>Broadcast the deployment transaction.</p></li></ol> <p>This operation can be done on any chain, guaranteeing that the contract address is always the same and nobody can use that address with a different contract.</p> <h3 id="single-use-registry-deployment-account"><a href="#single-use-registry-deployment-account" class="header-anchor">#</a> Single-use Registry Deployment Account</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>0xa990077c3205cbDf861e17Fa532eeB069cE9fF96
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>This account is generated by reverse engineering it from its signature for the transaction.
This way no one knows the private key, but it is known that it is the valid signer of the deployment transaction.</p> <blockquote><p>To deploy the registry, 0.08 ether MUST be sent to this account <em>first</em>.</p></blockquote> <h3 id="registry-contract-address"><a href="#registry-contract-address" class="header-anchor">#</a> Registry Contract Address</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>0x1820a4B7618BdE71Dce8cdc73aAB6C95905faD24
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The contract has the address above for every chain on which it is deployed.</p> <details><summary>Raw metadata of <code>./contracts/ERC1820Registry.sol</code></summary> <pre><code>{
        &quot;compiler&quot;: {
          &quot;version&quot;: &quot;0.5.3+commit.10d17f24&quot;
        },
        &quot;language&quot;: &quot;Solidity&quot;,
        &quot;output&quot;: {
          &quot;abi&quot;: [
            {
              &quot;constant&quot;: false,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_addr&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;name&quot;: &quot;_interfaceHash&quot;,
                  &quot;type&quot;: &quot;bytes32&quot;
                },
                {
                  &quot;name&quot;: &quot;_implementer&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;name&quot;: &quot;setInterfaceImplementer&quot;,
              &quot;outputs&quot;: [],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;nonpayable&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: true,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_addr&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;name&quot;: &quot;getManager&quot;,
              &quot;outputs&quot;: [
                {
                  &quot;name&quot;: &quot;&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;view&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: false,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_addr&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;name&quot;: &quot;_newManager&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;name&quot;: &quot;setManager&quot;,
              &quot;outputs&quot;: [],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;nonpayable&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: true,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_interfaceName&quot;,
                  &quot;type&quot;: &quot;string&quot;
                }
              ],
              &quot;name&quot;: &quot;interfaceHash&quot;,
              &quot;outputs&quot;: [
                {
                  &quot;name&quot;: &quot;&quot;,
                  &quot;type&quot;: &quot;bytes32&quot;
                }
              ],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;pure&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: false,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_contract&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;name&quot;: &quot;_interfaceId&quot;,
                  &quot;type&quot;: &quot;bytes4&quot;
                }
              ],
              &quot;name&quot;: &quot;updateERC165Cache&quot;,
              &quot;outputs&quot;: [],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;nonpayable&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: true,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_addr&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;name&quot;: &quot;_interfaceHash&quot;,
                  &quot;type&quot;: &quot;bytes32&quot;
                }
              ],
              &quot;name&quot;: &quot;getInterfaceImplementer&quot;,
              &quot;outputs&quot;: [
                {
                  &quot;name&quot;: &quot;&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;view&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: true,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_contract&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;name&quot;: &quot;_interfaceId&quot;,
                  &quot;type&quot;: &quot;bytes4&quot;
                }
              ],
              &quot;name&quot;: &quot;implementsERC165InterfaceNoCache&quot;,
              &quot;outputs&quot;: [
                {
                  &quot;name&quot;: &quot;&quot;,
                  &quot;type&quot;: &quot;bool&quot;
                }
              ],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;view&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;constant&quot;: true,
              &quot;inputs&quot;: [
                {
                  &quot;name&quot;: &quot;_contract&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;name&quot;: &quot;_interfaceId&quot;,
                  &quot;type&quot;: &quot;bytes4&quot;
                }
              ],
              &quot;name&quot;: &quot;implementsERC165Interface&quot;,
              &quot;outputs&quot;: [
                {
                  &quot;name&quot;: &quot;&quot;,
                  &quot;type&quot;: &quot;bool&quot;
                }
              ],
              &quot;payable&quot;: false,
              &quot;stateMutability&quot;: &quot;view&quot;,
              &quot;type&quot;: &quot;function&quot;
            },
            {
              &quot;anonymous&quot;: false,
              &quot;inputs&quot;: [
                {
                  &quot;indexed&quot;: true,
                  &quot;name&quot;: &quot;addr&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;indexed&quot;: true,
                  &quot;name&quot;: &quot;interfaceHash&quot;,
                  &quot;type&quot;: &quot;bytes32&quot;
                },
                {
                  &quot;indexed&quot;: true,
                  &quot;name&quot;: &quot;implementer&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;name&quot;: &quot;InterfaceImplementerSet&quot;,
              &quot;type&quot;: &quot;event&quot;
            },
            {
              &quot;anonymous&quot;: false,
              &quot;inputs&quot;: [
                {
                  &quot;indexed&quot;: true,
                  &quot;name&quot;: &quot;addr&quot;,
                  &quot;type&quot;: &quot;address&quot;
                },
                {
                  &quot;indexed&quot;: true,
                  &quot;name&quot;: &quot;newManager&quot;,
                  &quot;type&quot;: &quot;address&quot;
                }
              ],
              &quot;name&quot;: &quot;ManagerChanged&quot;,
              &quot;type&quot;: &quot;event&quot;
            }
          ],
          &quot;devdoc&quot;: {
            &quot;author&quot;: &quot;Jordi Baylina and Jacques Dafflon&quot;,
            &quot;methods&quot;: {
              &quot;getInterfaceImplementer(address,bytes32)&quot;: {
                &quot;params&quot;: {
                  &quot;_addr&quot;: &quot;Address being queried for the implementer of an interface. (If '_addr' is the zero address then 'msg.sender' is assumed.)&quot;,
                  &quot;_interfaceHash&quot;: &quot;Keccak256 hash of the name of the interface as a string. E.g., 'web3.utils.keccak256(\&quot;ERC777TokensRecipient\&quot;)' for the 'ERC777TokensRecipient' interface.&quot;
                },
                &quot;return&quot;: &quot;The address of the contract which implements the interface '_interfaceHash' for '_addr' or '0' if '_addr' did not register an implementer for this interface.&quot;
              },
              &quot;getManager(address)&quot;: {
                &quot;params&quot;: {
                  &quot;_addr&quot;: &quot;Address for which to return the manager.&quot;
                },
                &quot;return&quot;: &quot;Address of the manager for a given address.&quot;
              },
              &quot;implementsERC165Interface(address,bytes4)&quot;: {
                &quot;params&quot;: {
                  &quot;_contract&quot;: &quot;Address of the contract to check.&quot;,
                  &quot;_interfaceId&quot;: &quot;ERC165 interface to check.&quot;
                },
                &quot;return&quot;: &quot;True if '_contract' implements '_interfaceId', false otherwise.&quot;
              },
              &quot;implementsERC165InterfaceNoCache(address,bytes4)&quot;: {
                &quot;params&quot;: {
                  &quot;_contract&quot;: &quot;Address of the contract to check.&quot;,
                  &quot;_interfaceId&quot;: &quot;ERC165 interface to check.&quot;
                },
                &quot;return&quot;: &quot;True if '_contract' implements '_interfaceId', false otherwise.&quot;
              },
              &quot;interfaceHash(string)&quot;: {
                &quot;params&quot;: {
                  &quot;_interfaceName&quot;: &quot;Name of the interface.&quot;
                },
                &quot;return&quot;: &quot;The keccak256 hash of an interface name.&quot;
              },
              &quot;setInterfaceImplementer(address,bytes32,address)&quot;: {
                &quot;params&quot;: {
                  &quot;_addr&quot;: &quot;Address for which to set the interface. (If '_addr' is the zero address then 'msg.sender' is assumed.)&quot;,
                  &quot;_implementer&quot;: &quot;Contract address implementing '_interfaceHash' for '_addr'.&quot;,
                  &quot;_interfaceHash&quot;: &quot;Keccak256 hash of the name of the interface as a string. E.g., 'web3.utils.keccak256(\&quot;ERC777TokensRecipient\&quot;)' for the 'ERC777TokensRecipient' interface.&quot;
                }
              },
              &quot;setManager(address,address)&quot;: {
                &quot;params&quot;: {
                  &quot;_addr&quot;: &quot;Address for which to set the new manager.&quot;,
                  &quot;_newManager&quot;: &quot;Address of the new manager for 'addr'. (Pass '0x0' to reset the manager to '_addr'.)&quot;
                }
              },
              &quot;updateERC165Cache(address,bytes4)&quot;: {
                &quot;params&quot;: {
                  &quot;_contract&quot;: &quot;Address of the contract for which to update the cache.&quot;,
                  &quot;_interfaceId&quot;: &quot;ERC165 interface for which to update the cache.&quot;
                }
              }
            },
            &quot;title&quot;: &quot;ERC1820 Pseudo-introspection Registry Contract&quot;
          },
          &quot;userdoc&quot;: {
            &quot;methods&quot;: {
              &quot;getInterfaceImplementer(address,bytes32)&quot;: {
                &quot;notice&quot;: &quot;Query if an address implements an interface and through which contract.&quot;
              },
              &quot;getManager(address)&quot;: {
                &quot;notice&quot;: &quot;Get the manager of an address.&quot;
              },
              &quot;implementsERC165InterfaceNoCache(address,bytes4)&quot;: {
                &quot;notice&quot;: &quot;Checks whether a contract implements an ERC165 interface or not without using nor updating the cache.&quot;
              },
              &quot;interfaceHash(string)&quot;: {
                &quot;notice&quot;: &quot;Compute the keccak256 hash of an interface given its name.&quot;
              },
              &quot;setInterfaceImplementer(address,bytes32,address)&quot;: {
                &quot;notice&quot;: &quot;Sets the contract which implements a specific interface for an address. Only the manager defined for that address can set it. (Each address is the manager for itself until it sets a new manager.)&quot;
              },
              &quot;setManager(address,address)&quot;: {
                &quot;notice&quot;: &quot;Sets '_newManager' as manager for '_addr'. The new manager will be able to call 'setInterfaceImplementer' for '_addr'.&quot;
              },
              &quot;updateERC165Cache(address,bytes4)&quot;: {
                &quot;notice&quot;: &quot;Updates the cache with whether the contract implements an ERC165 interface or not.&quot;
              }
            },
            &quot;notice&quot;: &quot;This contract is the official implementation of the ERC1820 Registry.For more details, see https://eips.ethereum.org/EIPS/eip-1820&quot;
          }
        },
        &quot;settings&quot;: {
          &quot;compilationTarget&quot;: {
            &quot;./contracts/ERC1820Registry.sol&quot;: &quot;ERC1820Registry&quot;
          },
          &quot;evmVersion&quot;: &quot;byzantium&quot;,
          &quot;libraries&quot;: {},
          &quot;optimizer&quot;: {
            &quot;enabled&quot;: true,
            &quot;runs&quot;: 200
          },
          &quot;remappings&quot;: []
        },
        &quot;sources&quot;: {
          &quot;./contracts/ERC1820Registry.sol&quot;: {
            &quot;content&quot;: &quot;/* ERC1820 Pseudo-introspection Registry Contract\n * This standard defines a universal registry smart contract where any address (contract or regular account) can\n * register which interface it supports and which smart contract is responsible for its implementation.\n *\n * Written in 2019 by Jordi Baylina and Jacques Dafflon\n *\n * To the extent possible under law, the author(s) have dedicated all copyright and related and neighboring rights to\n * this software to the public domain worldwide. This software is distributed without any warranty.\n *\n * You should have received a copy of the CC0 Public Domain Dedication along with this software. If not, see\n * //creativecommons.org/publicdomain/zero/1.0/&gt;.\n *\n *    ███████╗██████╗  ██████╗ ██╗ █████╗ ██████╗  ██████╗\n *    ██╔════╝██╔══██╗██╔════╝███║██╔══██╗╚════██╗██╔═████╗\n *    █████╗  ██████╔╝██║     ╚██║╚█████╔╝ █████╔╝██║██╔██║\n *    ██╔══╝  ██╔══██╗██║      ██║██╔══██╗██╔═══╝ ████╔╝██║\n *    ███████╗██║  ██║╚██████╗ ██║╚█████╔╝███████╗╚██████╔╝\n *    ╚══════╝╚═╝  ╚═╝ ╚═════╝ ╚═╝ ╚════╝ ╚══════╝ ╚═════╝\n *\n *    ██████╗ ███████╗ ██████╗ ██╗███████╗████████╗██████╗ ██╗   ██╗\n *    ██╔══██╗██╔════╝██╔════╝ ██║██╔════╝╚══██╔══╝██╔══██╗╚██╗ ██╔╝\n *    ██████╔╝█████╗  ██║  ███╗██║███████╗   ██║   ██████╔╝ ╚████╔╝\n *    ██╔══██╗██╔══╝  ██║   ██║██║╚════██║   ██║   ██╔══██╗  ╚██╔╝\n *    ██║  ██║███████╗╚██████╔╝██║███████║   ██║   ██║  ██║   ██║\n *    ╚═╝  ╚═╝╚══════╝ ╚═════╝ ╚═╝╚══════╝   ╚═╝   ╚═╝  ╚═╝   ╚═╝\n *\n */\npragma solidity 0.5.3;\n// IV is value needed to have a vanity address starting with '0x1820'.\n// IV: 53759\n\n/// @dev The interface a contract MUST implement if it is the implementer of\n/// some (other) interface for any address other than itself.\ninterface ERC1820ImplementerInterface {\n    /// @notice Indicates whether the contract implements the interface 'interfaceHash' for the address 'addr' or not.\n    /// @param interfaceHash keccak256 hash of the name of the interface\n    /// @param addr Address for which the contract will implement the interface\n    /// @return ERC1820_ACCEPT_MAGIC only if the contract implements 'interfaceHash' for the address 'addr'.\n    function canImplementInterfaceForAddress(bytes32 interfaceHash, address addr) external view returns(bytes32);\n}\n\n\n/// @title ERC1820 Pseudo-introspection Registry Contract\n/// @author Jordi Baylina and Jacques Dafflon\n/// @notice This contract is the official implementation of the ERC1820 Registry.\n/// @notice For more details, see https://eips.ethereum.org/EIPS/eip-1820\ncontract ERC1820Registry {\n    /// @notice ERC165 Invalid ID.\n    bytes4 constant internal INVALID_ID = 0xffffffff;\n    /// @notice Method ID for the ERC165 supportsInterface method (= `bytes4(keccak256('supportsInterface(bytes4)'))`).\n    bytes4 constant internal ERC165ID = 0x01ffc9a7;\n    /// @notice Magic value which is returned if a contract implements an interface on behalf of some other address.\n    bytes32 constant internal ERC1820_ACCEPT_MAGIC = keccak256(abi.encodePacked(\&quot;ERC1820_ACCEPT_MAGIC\&quot;));\n\n    /// @notice mapping from addresses and interface hashes to their implementers.\n    mapping(address =&gt; mapping(bytes32 =&gt; address)) internal interfaces;\n    /// @notice mapping from addresses to their manager.\n    mapping(address =&gt; address) internal managers;\n    /// @notice flag for each address and erc165 interface to indicate if it is cached.\n    mapping(address =&gt; mapping(bytes4 =&gt; bool)) internal erc165Cached;\n\n    /// @notice Indicates a contract is the 'implementer' of 'interfaceHash' for 'addr'.\n    event InterfaceImplementerSet(address indexed addr, bytes32 indexed interfaceHash, address indexed implementer);\n    /// @notice Indicates 'newManager' is the address of the new manager for 'addr'.\n    event ManagerChanged(address indexed addr, address indexed newManager);\n\n    /// @notice Query if an address implements an interface and through which contract.\n    /// @param _addr Address being queried for the implementer of an interface.\n    /// (If '_addr' is the zero address then 'msg.sender' is assumed.)\n    /// @param _interfaceHash Keccak256 hash of the name of the interface as a string.\n    /// E.g., 'web3.utils.keccak256(\&quot;ERC777TokensRecipient\&quot;)' for the 'ERC777TokensRecipient' interface.\n    /// @return The address of the contract which implements the interface '_interfaceHash' for '_addr'\n    /// or '0' if '_addr' did not register an implementer for this interface.\n    function getInterfaceImplementer(address _addr, bytes32 _interfaceHash) external view returns (address) {\n        address addr = _addr == address(0) ? msg.sender : _addr;\n        if (isERC165Interface(_interfaceHash)) {\n            bytes4 erc165InterfaceHash = bytes4(_interfaceHash);\n            return implementsERC165Interface(addr, erc165InterfaceHash) ? addr : address(0);\n        }\n        return interfaces[addr][_interfaceHash];\n    }\n\n    /// @notice Sets the contract which implements a specific interface for an address.\n    /// Only the manager defined for that address can set it.\n    /// (Each address is the manager for itself until it sets a new manager.)\n    /// @param _addr Address for which to set the interface.\n    /// (If '_addr' is the zero address then 'msg.sender' is assumed.)\n    /// @param _interfaceHash Keccak256 hash of the name of the interface as a string.\n    /// E.g., 'web3.utils.keccak256(\&quot;ERC777TokensRecipient\&quot;)' for the 'ERC777TokensRecipient' interface.\n    /// @param _implementer Contract address implementing '_interfaceHash' for '_addr'.\n    function setInterfaceImplementer(address _addr, bytes32 _interfaceHash, address _implementer) external {\n        address addr = _addr == address(0) ? msg.sender : _addr;\n        require(getManager(addr) == msg.sender, \&quot;Not the manager\&quot;);\n\n        require(!isERC165Interface(_interfaceHash), \&quot;Must not be an ERC165 hash\&quot;);\n        if (_implementer != address(0) &amp;&amp; _implementer != msg.sender) {\n            require(\n                ERC1820ImplementerInterface(_implementer)\n                    .canImplementInterfaceForAddress(_interfaceHash, addr) == ERC1820_ACCEPT_MAGIC,\n                \&quot;Does not implement the interface\&quot;\n            );\n        }\n        interfaces[addr][_interfaceHash] = _implementer;\n        emit InterfaceImplementerSet(addr, _interfaceHash, _implementer);\n    }\n\n    /// @notice Sets '_newManager' as manager for '_addr'.\n    /// The new manager will be able to call 'setInterfaceImplementer' for '_addr'.\n    /// @param _addr Address for which to set the new manager.\n    /// @param _newManager Address of the new manager for 'addr'. (Pass '0x0' to reset the manager to '_addr'.)\n    function setManager(address _addr, address _newManager) external {\n        require(getManager(_addr) == msg.sender, \&quot;Not the manager\&quot;);\n        managers[_addr] = _newManager == _addr ? address(0) : _newManager;\n        emit ManagerChanged(_addr, _newManager);\n    }\n\n    /// @notice Get the manager of an address.\n    /// @param _addr Address for which to return the manager.\n    /// @return Address of the manager for a given address.\n    function getManager(address _addr) public view returns(address) {\n        // By default the manager of an address is the same address\n        if (managers[_addr] == address(0)) {\n            return _addr;\n        } else {\n            return managers[_addr];\n        }\n    }\n\n    /// @notice Compute the keccak256 hash of an interface given its name.\n    /// @param _interfaceName Name of the interface.\n    /// @return The keccak256 hash of an interface name.\n    function interfaceHash(string calldata _interfaceName) external pure returns(bytes32) {\n        return keccak256(abi.encodePacked(_interfaceName));\n    }\n\n    /* --- ERC165 Related Functions --- */\n    /* --- Developed in collaboration with William Entriken. --- */\n\n    /// @notice Updates the cache with whether the contract implements an ERC165 interface or not.\n    /// @param _contract Address of the contract for which to update the cache.\n    /// @param _interfaceId ERC165 interface for which to update the cache.\n    function updateERC165Cache(address _contract, bytes4 _interfaceId) external {\n        interfaces[_contract][_interfaceId] = implementsERC165InterfaceNoCache(\n            _contract, _interfaceId) ? _contract : address(0);\n        erc165Cached[_contract][_interfaceId] = true;\n    }\n\n    /// @notice Checks whether a contract implements an ERC165 interface or not.\n    //  If the result is not cached a direct lookup on the contract address is performed.\n    //  If the result is not cached or the cached value is out-of-date, the cache MUST be updated manually by calling\n    //  'updateERC165Cache' with the contract address.\n    /// @param _contract Address of the contract to check.\n    /// @param _interfaceId ERC165 interface to check.\n    /// @return True if '_contract' implements '_interfaceId', false otherwise.\n    function implementsERC165Interface(address _contract, bytes4 _interfaceId) public view returns (bool) {\n        if (!erc165Cached[_contract][_interfaceId]) {\n            return implementsERC165InterfaceNoCache(_contract, _interfaceId);\n        }\n        return interfaces[_contract][_interfaceId] == _contract;\n    }\n\n    /// @notice Checks whether a contract implements an ERC165 interface or not without using nor updating the cache.\n    /// @param _contract Address of the contract to check.\n    /// @param _interfaceId ERC165 interface to check.\n    /// @return True if '_contract' implements '_interfaceId', false otherwise.\n    function implementsERC165InterfaceNoCache(address _contract, bytes4 _interfaceId) public view returns (bool) {\n        uint256 success;\n        uint256 result;\n\n        (success, result) = noThrowCall(_contract, ERC165ID);\n        if (success == 0 || result == 0) {\n            return false;\n        }\n\n        (success, result) = noThrowCall(_contract, INVALID_ID);\n        if (success == 0 || result != 0) {\n            return false;\n        }\n\n        (success, result) = noThrowCall(_contract, _interfaceId);\n        if (success == 1 &amp;&amp; result == 1) {\n            return true;\n        }\n        return false;\n    }\n\n    /// @notice Checks whether the hash is a ERC165 interface (ending with 28 zeroes) or not.\n    /// @param _interfaceHash The hash to check.\n    /// @return True if '_interfaceHash' is an ERC165 interface (ending with 28 zeroes), false otherwise.\n    function isERC165Interface(bytes32 _interfaceHash) internal pure returns (bool) {\n        return _interfaceHash &amp; 0x00000000FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF == 0;\n    }\n\n    /// @dev Make a call on a contract without throwing if the function does not exist.\n    function noThrowCall(address _contract, bytes4 _interfaceId)\n        internal view returns (uint256 success, uint256 result)\n    {\n        bytes4 erc165ID = ERC165ID;\n\n        assembly {\n            let x := mload(0x40)               // Find empty storage location using \&quot;free memory pointer\&quot;\n            mstore(x, erc165ID)                // Place signature at beginning of empty storage\n            mstore(add(x, 0x04), _interfaceId) // Place first argument directly next to signature\n\n            success := staticcall(\n                30000,                         // 30k gas\n                _contract,                     // To addr\n                x,                             // Inputs are stored at location x\n                0x24,                          // Inputs are 36 (4 + 32) bytes long\n                x,                             // Store output over input (saves space)\n                0x20                           // Outputs are 32 bytes long\n            )\n\n            result := mload(x)                 // Load the result\n        }\n    }\n}\n&quot;,
            &quot;keccak256&quot;: &quot;0x64025ecebddb6e126a5075c1fd6c01de2840492668e2909cef7157040a9d1945&quot;
          }
        },
        &quot;version&quot;: 1
      }</code>
</pre></details> <h3 id="interface-name"><a href="#interface-name" class="header-anchor">#</a> Interface Name</h3> <p>Any interface name is hashed using <code>keccak256</code> and sent to <code>getInterfaceImplementer()</code>.</p> <p>If the interface is part of a standard, it is best practice to explicitly state the interface name and link to this published <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> such that other people don't have to come here to look up these rules.</p> <p>For convenience, the registry provides a function to compute the hash on-chain:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">interfaceHash</span><span class="token punctuation">(</span><span class="token builtin">string</span> _interfaceName<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">pure</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Compute the keccak256 hash of an interface given its name.</p> <blockquote><p><small><strong>identifier:</strong> <code>65ba36c1</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_interfaceName</code>: Name of the interface.</small><br> <small><strong>returns:</strong> The <code>keccak256</code> hash of an interface name.</small></p></blockquote> <h4 id="approved-ercs"><a href="#approved-ercs" class="header-anchor">#</a> <strong>Approved ERCs</strong></h4> <p>If the interface is part of an approved ERC, it MUST be named <code>ERC###XXXXX</code> where <code>###</code> is the number of the ERC and XXXXX should be the name of the interface in CamelCase.
The meaning of this interface SHOULD be defined in the specified ERC.</p> <p>Examples:</p> <ul><li><code>keccak256(&quot;ERC20Token&quot;)</code></li> <li><code>keccak256(&quot;ERC777Token&quot;)</code></li> <li><code>keccak256(&quot;ERC777TokensSender&quot;)</code></li> <li><code>keccak256(&quot;ERC777TokensRecipient&quot;)</code></li></ul> <h4 id="erc-165-compatible-interfaces"><a href="#erc-165-compatible-interfaces" class="header-anchor">#</a> <strong><a href="/eip-165.html">ERC-165</a> Compatible Interfaces</strong></h4> <blockquote><p>The compatibility with <a href="/eip-165.html">ERC-165</a>, including the <a href="#erc165-cache">ERC165 Cache</a>, has been designed and developed with <a href="https://github.com/fulldecent" target="_blank" rel="noopener noreferrer">William Entriken<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></blockquote> <p>Any interface where the last 28 bytes are zeroes (<code>0</code>) SHALL be considered an <a href="/eip-165.html">ERC-165</a> interface.</p> <p><strong><a href="/eip-165.html">ERC-165</a> Lookup</strong></p> <p>Anyone can explicitly check if a contract implements an <a href="/eip-165.html">ERC-165</a> interface using the registry by calling one of the two functions below:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">implementsERC165Interface</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Checks whether a contract implements an <a href="/eip-165.html">ERC-165</a> interface or not.</p> <p>If the result is not cached a direct lookup on the contract address is performed.</p> <p><em>NOTE</em>: If the result is not cached or the cached value is out-of-date, the cache MUST be updated manually by calling <code>updateERC165Cache</code> with the contract address.
(See <a href="#erc165-cache">ERC165 Cache</a> for more details.)</p> <blockquote><p><small><strong>identifier:</strong> <code>f712f3e8</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_contract</code>: Address of the contract to check.</small><br> <small><code>_interfaceId</code>: <a href="/eip-165.html">ERC-165</a> interface to check.</small><br> <small><strong>returns:</strong> <code>true</code> if <code>_contract</code> implements <code>_interfaceId</code>, <code>false</code> otherwise.</small></p></blockquote> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">implementsERC165InterfaceNoCache</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">bool</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Checks whether a contract implements an <a href="/eip-165.html">ERC-165</a> interface or not without using nor updating the cache.</p> <blockquote><p><small><strong>identifier:</strong> <code>b7056765</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_contract</code>: Address of the contract to check.</small><br> <small><code>_interfaceId</code>: <a href="/eip-165.html">ERC-165</a> interface to check.</small><br> <small><strong>returns:</strong> <code>true</code> if <code>_contract</code> implements <code>_interfaceId</code>, false otherwise.</small></p></blockquote> <p><strong><a href="/eip-165.html">ERC-165</a> Cache</strong> <a id="erc165-cache"></a></p> <p>Whether a contract implements an <a href="/eip-165.html">ERC-165</a> interface or not can be cached manually to save gas.</p> <p>If a contract dynamically changes its interface and relies on the <a href="/eip-165.html">ERC-165</a> cache of the <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> registry, the cache MUST be updated manually---there is no automatic cache invalidation or cache update.
Ideally the contract SHOULD automatically update the cache when changing its interface.
However anyone MAY update the cache on the contract's behalf.</p> <p>The cache update MUST be done using the <code>updateERC165Cache</code> function:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">updateERC165Cache</span><span class="token punctuation">(</span><span class="token builtin">address</span> _contract<span class="token punctuation">,</span> <span class="token builtin">bytes4</span> _interfaceId<span class="token punctuation">)</span> <span class="token keyword">external</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p><small><strong>identifier:</strong> <code>a41e7d51</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_contract</code>: Address of the contract for which to update the cache.</small><br> <small><code>_interfaceId</code>: <a href="/eip-165.html">ERC-165</a> interface for which to update the cache.</small></p></blockquote> <h4 id="private-user-defined-interfaces"><a href="#private-user-defined-interfaces" class="header-anchor">#</a> <strong>Private User-defined Interfaces</strong></h4> <p>This scheme is extensible.
You MAY make up your own interface name and raise awareness to get other people to implement it and then check for those implementations.
Have fun but please, you MUST not conflict with the reserved designations above.</p> <h3 id="set-an-interface-for-an-address"><a href="#set-an-interface-for-an-address" class="header-anchor">#</a> Set An Interface For An Address</h3> <p>For any address to set a contract as the interface implementation, it must call the following function of the <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> registry:</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">setInterfaceImplementer</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">bytes32</span> _interfaceHash<span class="token punctuation">,</span> <span class="token builtin">address</span> _implementer<span class="token punctuation">)</span> <span class="token keyword">external</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Sets the contract which implements a specific interface for an address.</p> <p>Only the <code>manager</code> defined for that address can set it.
(Each address is the manager for itself, see the <a href="#manager">manager</a> section for more details.)</p> <p><em>NOTE</em>: If  <code>_addr</code> and <code>_implementer</code> are two different addresses, then:</p> <ul><li>The <code>_implementer</code> MUST implement the <code>ERC1820ImplementerInterface</code> (detailed below).</li> <li>Calling <code>canImplementInterfaceForAddress</code> on <code>_implementer</code> with the given <code>_addr</code> and  <code>_interfaceHash</code> MUST return the <code>ERC1820_ACCEPT_MAGIC</code> value.</li></ul> <p><em>NOTE</em>: The <code>_interfaceHash</code> MUST NOT be an <a href="/eip-165.html">ERC-165</a> interface---it MUST NOT end with 28 zeroes (<code>0</code>).</p> <p><em>NOTE</em>: The <code>_addr</code> MAY be <code>0</code>, then <code>msg.sender</code> is assumed.
This default value simplifies interactions via multisigs where the data of the transaction to sign is constant regardless of the address of the multisig instance.</p> <blockquote><p><small><strong>identifier:</strong> <code>29965a1d</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_addr</code>: Address for which to set the interface. (If <code>_addr</code> is the zero address then <code>msg.sender</code> is assumed.)</small><br> <small><code>_interfaceHash</code>: Keccak256 hash of the name of the interface as a string, for example <code>web3.utils.keccak256('ERC777TokensRecipient')</code> for the ERC777TokensRecipient interface.</small><br> <small><code>_implementer</code>: Contract implementing <code>_interfaceHash</code> for <code>_addr</code>.</small></p></blockquote> <h3 id="get-an-implementation-of-an-interface-for-an-address"><a href="#get-an-implementation-of-an-interface-for-an-address" class="header-anchor">#</a> Get An Implementation Of An Interface For An Address</h3> <p>Anyone MAY query the <a href="/eip-1820.html" aria-current="page" class="router-link-exact-active router-link-active">ERC-1820</a> Registry to obtain the address of a contract implementing an interface on behalf of some address using the <code>getInterfaceImplementer</code> function.</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">getInterfaceImplementer</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">bytes32</span> _interfaceHash<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Query if an address implements an interface and through which contract.</p> <p><em>NOTE</em>: If the last 28 bytes of the <code>_interfaceHash</code> are zeroes (<code>0</code>), then the first 4 bytes are considered an <a href="/eip-165.html">ERC-165</a> interface and the registry SHALL forward the call to the contract at <code>_addr</code> to see if it implements the <a href="/eip-165.html">ERC-165</a> interface (the first 4 bytes of <code>_interfaceHash</code>).
The registry SHALL also cache <a href="/eip-165.html">ERC-165</a> queries to reduce gas consumption. Anyone MAY call the <code>erc165UpdateCache</code> function to update whether a contract implements an interface or not.</p> <p><em>NOTE</em>: The <code>_addr</code> MAY be <code>0</code>, then <code>msg.sender</code> is assumed.
This default value is consistent with the behavior of the <code>setInterfaceImplementer</code> function and simplifies interactions via multisigs where the data of the transaction to sign is constant regardless of the address of the multisig instance.</p> <blockquote><p><small><strong>identifier:</strong> <code>aabbb8ca</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_addr</code>: Address being queried for the implementer of an interface. (If <code>_addr</code> is the zero address then <code>msg.sender</code> is assumed.)</small><br> <small><code>_interfaceHash</code>: keccak256 hash of the name of the interface as a string. E.g. <code>web3.utils.keccak256('ERC777Token')</code></small><br> <small><strong>returns:</strong> The address of the contract which implements the interface <code>_interfaceHash</code> for <code>_addr</code> or <code>0</code> if <code>_addr</code> did not register an implementer for this interface.</small></p></blockquote> <h3 id="interface-implementation-erc1820implementerinterface"><a href="#interface-implementation-erc1820implementerinterface" class="header-anchor">#</a> Interface Implementation (<code>ERC1820ImplementerInterface</code>)</h3> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">interface</span> <span class="token class-name">ERC1820ImplementerInterface</span> <span class="token punctuation">{</span>
    <span class="token comment">/// @notice Indicates whether the contract implements the interface `interfaceHash` for the address `addr` or not.</span>
    <span class="token comment">/// @param interfaceHash keccak256 hash of the name of the interface</span>
    <span class="token comment">/// @param addr Address for which the contract will implement the interface</span>
    <span class="token comment">/// @return ERC1820_ACCEPT_MAGIC only if the contract implements `interfaceHash` for the address `addr`.</span>
    <span class="token keyword">function</span> <span class="token function">canImplementInterfaceForAddress</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span> interfaceHash<span class="token punctuation">,</span> <span class="token builtin">address</span> addr<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Any contract being registered as the implementation of an interface for a given address MUST implement said interface.
In addition if it implements an interface on behalf of a different address, the contract MUST implement the <code>ERC1820ImplementerInterface</code> shown above.</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">canImplementInterfaceForAddress</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span> interfaceHash<span class="token punctuation">,</span> <span class="token builtin">address</span> addr<span class="token punctuation">)</span> <span class="token keyword">external</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">bytes32</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Indicates whether a contract implements an interface (<code>interfaceHash</code>) for a given address (<code>addr</code>).</p> <p>If a contract implements the interface (<code>interfaceHash</code>) for a given address (<code>addr</code>), it MUST return <code>ERC1820_ACCEPT_MAGIC</code> when called with the <code>addr</code> and the <code>interfaceHash</code>.
If it does not implement the <code>interfaceHash</code> for a given address (<code>addr</code>), it MUST NOT return <code>ERC1820_ACCEPT_MAGIC</code>.</p> <blockquote><p><small><strong>identifier:</strong> <code>f0083250</code></small><br> <small><strong>parameters</strong></small><br> <small><code>interfaceHash</code>: Hash of the interface which is implemented</small><br> <small><code>addr</code>: Address for which the interface is implemented</small><br> <small><strong>returns:</strong> <code>ERC1820_ACCEPT_MAGIC</code> only if the contract implements <code>ìnterfaceHash</code> for the address <code>addr</code>.</small></p></blockquote> <p>The special value <code>ERC1820_ACCEPT_MAGIC</code> is defined as the <code>keccka256</code> hash of the string <code>&quot;ERC1820_ACCEPT_MAGIC&quot;</code>.</p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token builtin">bytes32</span> <span class="token keyword">constant</span> <span class="token keyword">internal</span> ERC1820_ACCEPT_MAGIC <span class="token operator">=</span> <span class="token function">keccak256</span><span class="token punctuation">(</span>abi<span class="token punctuation">.</span><span class="token function">encodePacked</span><span class="token punctuation">(</span><span class="token string">&quot;ERC1820_ACCEPT_MAGIC&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>The reason to return <code>ERC1820_ACCEPT_MAGIC</code> instead of a boolean is to prevent cases where a contract fails to implement the <code>canImplementInterfaceForAddress</code> but implements a fallback function which does not throw. In this case, since <code>canImplementInterfaceForAddress</code> does not exist, the fallback function is called instead, executed without throwing and returns <code>1</code>. Thus making it appear as if <code>canImplementInterfaceForAddress</code> returned <code>true</code>.</p></blockquote> <h3 id="manager"><a href="#manager" class="header-anchor">#</a> Manager</h3> <p>The manager of an address (regular account or a contract) is the only entity allowed to register implementations of interfaces for the address.
By default, any address is its own manager.</p> <p>The manager can transfer its role to another address by calling <code>setManager</code> on the registry contract with the address for which to transfer the manager and the address of the new manager.</p> <p><strong><code>setManager</code> Function</strong></p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">setManager</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">,</span> <span class="token builtin">address</span> _newManager<span class="token punctuation">)</span> <span class="token keyword">external</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Sets <code>_newManager</code> as manager for <code>_addr</code>.</p> <p>The new manager will be able to call <code>setInterfaceImplementer</code> for <code>_addr</code>.</p> <p>If <code>_newManager</code> is <code>0x0</code>, the manager is reset to <code>_addr</code> itself as the manager.</p> <blockquote><p><small><strong>identifier:</strong> <code>5df8122f</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_addr</code>: Address for which to set the new manager.</small><br> <small><code>_newManager</code>: The address of the new manager for <code>_addr</code>. (Pass <code>0x0</code> to reset the manager to <code>_addr</code>.)</small></p></blockquote> <p><strong><code>getManager</code> Function</strong></p> <div class="language-solidity line-numbers-mode"><pre class="language-solidity"><code><span class="token keyword">function</span> <span class="token function">getManager</span><span class="token punctuation">(</span><span class="token builtin">address</span> _addr<span class="token punctuation">)</span> <span class="token keyword">public</span> <span class="token keyword">view</span> <span class="token keyword">returns</span><span class="token punctuation">(</span><span class="token builtin">address</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Get the manager of an address.</p> <blockquote><p><small><strong>identifier:</strong> <code>3d584063</code></small><br> <small><strong>parameters</strong></small><br> <small><code>_addr</code>: Address for which to return the manager.</small><br> <small><strong>returns:</strong> Address of the manager for a given address.</small></p></blockquote> <h2 id="rationale"><a href="#rationale" class="header-anchor">#</a> Rationale</h2> <p>This standards offers a way for any type of address (externally owned and contracts) to implement an interface and potentially delegate the implementation of the interface to a proxy contract.
This delegation to a proxy contract is necessary for externally owned accounts and useful to avoid redeploying existing contracts such as multisigs and DAOs.</p> <p>The registry can also act as a <a href="/eip-165.html">ERC-165</a> cache in order to save gas when looking up if a contract implements a specific <a href="/eip-165.html">ERC-165</a> interface.
This cache is intentionally kept simple, without automatic cache update or invalidation.
Anyone can easily and safely update the cache for any interface and any contract by calling the <code>updateERC165Cache</code> function.</p> <p>The registry is deployed using a keyless deployment method relying on a single-use deployment address to ensure no one controls the registry, thereby ensuring trust.</p> <h2 id="backward-compatibility"><a href="#backward-compatibility" class="header-anchor">#</a> Backward Compatibility</h2> <p>This standard is backward compatible with <a href="/eip-165.html">ERC-165</a>, as both methods MAY be implemented without conflicting with each other.</p> <h2 id="test-cases"><a href="#test-cases" class="header-anchor">#</a> Test Cases</h2> <p>Please check the <a href="https://github.com/0xjac/ERC1820" target="_blank" rel="noopener noreferrer">0xjac/ERC1820<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> repository for the full test suite.</p> <h2 id="implementation"><a href="#implementation" class="header-anchor">#</a> Implementation</h2> <p>The implementation is available in the repo: <a href="https://github.com/0xjac/ERC1820" target="_blank" rel="noopener noreferrer">0xjac/ERC1820<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="copyright"><a href="#copyright" class="header-anchor">#</a> Copyright</h2> <p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" rel="noopener noreferrer">CC0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ethlibrary/EIPs/edit/master/EIPS/eip-1820.md" target="_blank" rel="noopener noreferrer">帮助完善文档</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/26/2021, 5:30:06 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.53cd5b34.js" defer></script><script src="/assets/js/3.afc73834.js" defer></script><script src="/assets/js/142.b4c7433c.js" defer></script>
  </body>
</html>
