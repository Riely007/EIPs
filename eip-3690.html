<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>EOF - JUMPDEST Table | 以太坊改进提案 EIPs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="A special EOF section for storing the list of JUMPDESTs, which simplifies execution time analysis.">
    
    <link rel="preload" href="/assets/css/0.styles.5d34d66f.css" as="style"><link rel="preload" href="/assets/js/app.53cd5b34.js" as="script"><link rel="preload" href="/assets/js/3.afc73834.js" as="script"><link rel="preload" href="/assets/js/341.3792e0d7.js" as="script"><link rel="prefetch" href="/assets/js/10.1f5e4f3e.js"><link rel="prefetch" href="/assets/js/100.5e83168e.js"><link rel="prefetch" href="/assets/js/101.abc1c66c.js"><link rel="prefetch" href="/assets/js/102.f1608d9e.js"><link rel="prefetch" href="/assets/js/103.50677a84.js"><link rel="prefetch" href="/assets/js/104.5ef37394.js"><link rel="prefetch" href="/assets/js/105.8b115527.js"><link rel="prefetch" href="/assets/js/106.78821836.js"><link rel="prefetch" href="/assets/js/107.f2cad26b.js"><link rel="prefetch" href="/assets/js/108.806c491a.js"><link rel="prefetch" href="/assets/js/109.2536f3b5.js"><link rel="prefetch" href="/assets/js/11.19d07763.js"><link rel="prefetch" href="/assets/js/110.aa8e5dff.js"><link rel="prefetch" href="/assets/js/111.486fd49e.js"><link rel="prefetch" href="/assets/js/112.0e5dc443.js"><link rel="prefetch" href="/assets/js/113.14d95a60.js"><link rel="prefetch" href="/assets/js/114.1282f1e1.js"><link rel="prefetch" href="/assets/js/115.8f4357cd.js"><link rel="prefetch" href="/assets/js/116.faa46692.js"><link rel="prefetch" href="/assets/js/117.ce807443.js"><link rel="prefetch" href="/assets/js/118.c075df33.js"><link rel="prefetch" href="/assets/js/119.c8959574.js"><link rel="prefetch" href="/assets/js/12.cc14cc21.js"><link rel="prefetch" href="/assets/js/120.a997950d.js"><link rel="prefetch" href="/assets/js/121.ee4549e8.js"><link rel="prefetch" href="/assets/js/122.2c22977d.js"><link rel="prefetch" href="/assets/js/123.f0ef1c2b.js"><link rel="prefetch" href="/assets/js/124.84d00fe3.js"><link rel="prefetch" href="/assets/js/125.64e003e7.js"><link rel="prefetch" href="/assets/js/126.a31044d7.js"><link rel="prefetch" href="/assets/js/127.1ff3a4af.js"><link rel="prefetch" href="/assets/js/128.38dfcf65.js"><link rel="prefetch" href="/assets/js/129.39594e41.js"><link rel="prefetch" href="/assets/js/13.79199e7b.js"><link rel="prefetch" href="/assets/js/130.e85ffe06.js"><link rel="prefetch" href="/assets/js/131.fd90a8ff.js"><link rel="prefetch" href="/assets/js/132.62043b85.js"><link rel="prefetch" href="/assets/js/133.292c85d5.js"><link rel="prefetch" href="/assets/js/134.720824f2.js"><link rel="prefetch" href="/assets/js/135.330b0de9.js"><link rel="prefetch" href="/assets/js/136.d5434ef4.js"><link rel="prefetch" href="/assets/js/137.aefa600d.js"><link rel="prefetch" href="/assets/js/138.797f09ea.js"><link rel="prefetch" href="/assets/js/139.9e674d6d.js"><link rel="prefetch" href="/assets/js/14.3ec7ba2c.js"><link rel="prefetch" href="/assets/js/140.f2975dcb.js"><link rel="prefetch" href="/assets/js/141.51c0ec0a.js"><link rel="prefetch" href="/assets/js/142.b4c7433c.js"><link rel="prefetch" href="/assets/js/143.bf538ce9.js"><link rel="prefetch" href="/assets/js/144.813a767b.js"><link rel="prefetch" href="/assets/js/145.8e35e98b.js"><link rel="prefetch" href="/assets/js/146.f604aa88.js"><link rel="prefetch" href="/assets/js/147.5b1e7ab8.js"><link rel="prefetch" href="/assets/js/148.f1c25d01.js"><link rel="prefetch" href="/assets/js/149.e1de4f68.js"><link rel="prefetch" href="/assets/js/15.b10ae651.js"><link rel="prefetch" href="/assets/js/150.d8785b19.js"><link rel="prefetch" href="/assets/js/151.97e4d45f.js"><link rel="prefetch" href="/assets/js/152.60b9a345.js"><link rel="prefetch" href="/assets/js/153.c215540b.js"><link rel="prefetch" href="/assets/js/154.d80adb79.js"><link rel="prefetch" href="/assets/js/155.067c9183.js"><link rel="prefetch" href="/assets/js/156.564c5338.js"><link rel="prefetch" href="/assets/js/157.f6e4fb9f.js"><link rel="prefetch" href="/assets/js/158.84f450b9.js"><link rel="prefetch" href="/assets/js/159.8437eb1c.js"><link rel="prefetch" href="/assets/js/16.184f078c.js"><link rel="prefetch" href="/assets/js/160.f4445c3b.js"><link rel="prefetch" href="/assets/js/161.7ec4dccc.js"><link rel="prefetch" href="/assets/js/162.7ba8ee46.js"><link rel="prefetch" href="/assets/js/163.f0aa8208.js"><link rel="prefetch" href="/assets/js/164.4fe8c403.js"><link rel="prefetch" href="/assets/js/165.2d8ce405.js"><link rel="prefetch" href="/assets/js/166.6aa05391.js"><link rel="prefetch" href="/assets/js/167.82768149.js"><link rel="prefetch" href="/assets/js/168.b81a0c2a.js"><link rel="prefetch" href="/assets/js/169.435758b2.js"><link rel="prefetch" href="/assets/js/17.f08ecfe3.js"><link rel="prefetch" href="/assets/js/170.4a19f99a.js"><link rel="prefetch" href="/assets/js/171.8b67db69.js"><link rel="prefetch" href="/assets/js/172.186bf1f2.js"><link rel="prefetch" href="/assets/js/173.b50f6304.js"><link rel="prefetch" href="/assets/js/174.9eeed8c4.js"><link rel="prefetch" href="/assets/js/175.9021e040.js"><link rel="prefetch" href="/assets/js/176.41fc6fc9.js"><link rel="prefetch" href="/assets/js/177.d49686da.js"><link rel="prefetch" href="/assets/js/178.9fc70e1d.js"><link rel="prefetch" href="/assets/js/179.9773da56.js"><link rel="prefetch" href="/assets/js/18.8a5e525b.js"><link rel="prefetch" href="/assets/js/180.edebbc8c.js"><link rel="prefetch" href="/assets/js/181.9c7e1e79.js"><link rel="prefetch" href="/assets/js/182.34c52e30.js"><link rel="prefetch" href="/assets/js/183.9702d486.js"><link rel="prefetch" href="/assets/js/184.34ceb786.js"><link rel="prefetch" href="/assets/js/185.e536c5d5.js"><link rel="prefetch" href="/assets/js/186.11665bdc.js"><link rel="prefetch" href="/assets/js/187.5ad2506b.js"><link rel="prefetch" href="/assets/js/188.94d50a82.js"><link rel="prefetch" href="/assets/js/189.e94b7567.js"><link rel="prefetch" href="/assets/js/19.07dc175d.js"><link rel="prefetch" href="/assets/js/190.a44802e9.js"><link rel="prefetch" href="/assets/js/191.2710b7f4.js"><link rel="prefetch" href="/assets/js/192.8fa54ace.js"><link rel="prefetch" href="/assets/js/193.45b30c52.js"><link rel="prefetch" href="/assets/js/194.369f9cb0.js"><link rel="prefetch" href="/assets/js/195.7974d262.js"><link rel="prefetch" href="/assets/js/196.993e37d7.js"><link rel="prefetch" href="/assets/js/197.0766e81c.js"><link rel="prefetch" href="/assets/js/198.de30e1a5.js"><link rel="prefetch" href="/assets/js/199.98b8b4e2.js"><link rel="prefetch" href="/assets/js/20.a23c95ca.js"><link rel="prefetch" href="/assets/js/200.dd8af084.js"><link rel="prefetch" href="/assets/js/201.b0651559.js"><link rel="prefetch" href="/assets/js/202.9fda4a48.js"><link rel="prefetch" href="/assets/js/203.ed8c4ff4.js"><link rel="prefetch" href="/assets/js/204.35587f6c.js"><link rel="prefetch" href="/assets/js/205.321dcf85.js"><link rel="prefetch" href="/assets/js/206.9b73d45c.js"><link rel="prefetch" href="/assets/js/207.b107bd89.js"><link rel="prefetch" href="/assets/js/208.63bce933.js"><link rel="prefetch" href="/assets/js/209.073cc71d.js"><link rel="prefetch" href="/assets/js/21.13433d52.js"><link rel="prefetch" href="/assets/js/210.42f9cfe6.js"><link rel="prefetch" href="/assets/js/211.574f0c0a.js"><link rel="prefetch" href="/assets/js/212.9ea4d869.js"><link rel="prefetch" href="/assets/js/213.c02335e9.js"><link rel="prefetch" href="/assets/js/214.4dd46b88.js"><link rel="prefetch" href="/assets/js/215.8db9fba0.js"><link rel="prefetch" href="/assets/js/216.0a0fd08f.js"><link rel="prefetch" href="/assets/js/217.a33898a0.js"><link rel="prefetch" href="/assets/js/218.5957a55c.js"><link rel="prefetch" href="/assets/js/219.2dce84f7.js"><link rel="prefetch" href="/assets/js/22.40f322f4.js"><link rel="prefetch" href="/assets/js/220.830eaf36.js"><link rel="prefetch" href="/assets/js/221.aae7daca.js"><link rel="prefetch" href="/assets/js/222.36ee8bea.js"><link rel="prefetch" href="/assets/js/223.e4ee05e9.js"><link rel="prefetch" href="/assets/js/224.3a64ea59.js"><link rel="prefetch" href="/assets/js/225.f7fad7d1.js"><link rel="prefetch" href="/assets/js/226.e7d97c69.js"><link rel="prefetch" href="/assets/js/227.8484d6cc.js"><link rel="prefetch" href="/assets/js/228.f6928d72.js"><link rel="prefetch" href="/assets/js/229.fea960db.js"><link rel="prefetch" href="/assets/js/23.1d7e441e.js"><link rel="prefetch" href="/assets/js/230.d86e0be9.js"><link rel="prefetch" href="/assets/js/231.3bbf02cc.js"><link rel="prefetch" href="/assets/js/232.79acd9d3.js"><link rel="prefetch" href="/assets/js/233.cb8d0b73.js"><link rel="prefetch" href="/assets/js/234.e46ce374.js"><link rel="prefetch" href="/assets/js/235.dbac9148.js"><link rel="prefetch" href="/assets/js/236.a24aa05a.js"><link rel="prefetch" href="/assets/js/237.9713dbec.js"><link rel="prefetch" href="/assets/js/238.ae583618.js"><link rel="prefetch" href="/assets/js/239.3ed46955.js"><link rel="prefetch" href="/assets/js/24.9c2fceba.js"><link rel="prefetch" href="/assets/js/240.865b07ed.js"><link rel="prefetch" href="/assets/js/241.ab5fbbcc.js"><link rel="prefetch" href="/assets/js/242.801c0b49.js"><link rel="prefetch" href="/assets/js/243.d066ef46.js"><link rel="prefetch" href="/assets/js/244.4314f19c.js"><link rel="prefetch" href="/assets/js/245.7411c815.js"><link rel="prefetch" href="/assets/js/246.04f4cf64.js"><link rel="prefetch" href="/assets/js/247.a8d37f4b.js"><link rel="prefetch" href="/assets/js/248.02e38126.js"><link rel="prefetch" href="/assets/js/249.17761090.js"><link rel="prefetch" href="/assets/js/25.ab8a1140.js"><link rel="prefetch" href="/assets/js/250.e0474f9d.js"><link rel="prefetch" href="/assets/js/251.4ee85ae5.js"><link rel="prefetch" href="/assets/js/252.6946d29c.js"><link rel="prefetch" href="/assets/js/253.b13399dd.js"><link rel="prefetch" href="/assets/js/254.f5a78fe5.js"><link rel="prefetch" href="/assets/js/255.67794845.js"><link rel="prefetch" href="/assets/js/256.34867632.js"><link rel="prefetch" href="/assets/js/257.58ef8ea4.js"><link rel="prefetch" href="/assets/js/258.14ef75e5.js"><link rel="prefetch" href="/assets/js/259.b76fa21f.js"><link rel="prefetch" href="/assets/js/26.7edc5849.js"><link rel="prefetch" href="/assets/js/260.c31c293e.js"><link rel="prefetch" href="/assets/js/261.c450d645.js"><link rel="prefetch" href="/assets/js/262.5dfb132e.js"><link rel="prefetch" href="/assets/js/263.37d18eba.js"><link rel="prefetch" href="/assets/js/264.e8ffafbf.js"><link rel="prefetch" href="/assets/js/265.cd869d87.js"><link rel="prefetch" href="/assets/js/266.def5a565.js"><link rel="prefetch" href="/assets/js/267.3783978a.js"><link rel="prefetch" href="/assets/js/268.61403538.js"><link rel="prefetch" href="/assets/js/269.d8a5aa4a.js"><link rel="prefetch" href="/assets/js/27.b69b1ace.js"><link rel="prefetch" href="/assets/js/270.9aa28099.js"><link rel="prefetch" href="/assets/js/271.428c6c80.js"><link rel="prefetch" href="/assets/js/272.3de4f874.js"><link rel="prefetch" href="/assets/js/273.614942c0.js"><link rel="prefetch" href="/assets/js/274.afead1c8.js"><link rel="prefetch" href="/assets/js/275.82fc06e8.js"><link rel="prefetch" href="/assets/js/276.2ce1b15e.js"><link rel="prefetch" href="/assets/js/277.59413c64.js"><link rel="prefetch" href="/assets/js/278.40f50c75.js"><link rel="prefetch" href="/assets/js/279.4ec1739a.js"><link rel="prefetch" href="/assets/js/28.6a081e3d.js"><link rel="prefetch" href="/assets/js/280.61eb02df.js"><link rel="prefetch" href="/assets/js/281.15087a2b.js"><link rel="prefetch" href="/assets/js/282.2573cc17.js"><link rel="prefetch" href="/assets/js/283.054c9336.js"><link rel="prefetch" href="/assets/js/284.6a794878.js"><link rel="prefetch" href="/assets/js/285.12d934a1.js"><link rel="prefetch" href="/assets/js/286.29f567eb.js"><link rel="prefetch" href="/assets/js/287.d4f0bca8.js"><link rel="prefetch" href="/assets/js/288.7c1dd248.js"><link rel="prefetch" href="/assets/js/289.9f985dbb.js"><link rel="prefetch" href="/assets/js/29.88c3d7a0.js"><link rel="prefetch" href="/assets/js/290.3e3e8928.js"><link rel="prefetch" href="/assets/js/291.24ed9d7f.js"><link rel="prefetch" href="/assets/js/292.94fd80de.js"><link rel="prefetch" href="/assets/js/293.255bc297.js"><link rel="prefetch" href="/assets/js/294.84135584.js"><link rel="prefetch" href="/assets/js/295.89da57bd.js"><link rel="prefetch" href="/assets/js/296.90becf38.js"><link rel="prefetch" href="/assets/js/297.b4b88dbf.js"><link rel="prefetch" href="/assets/js/298.793c0f1f.js"><link rel="prefetch" href="/assets/js/299.2d9f2244.js"><link rel="prefetch" href="/assets/js/30.6e454535.js"><link rel="prefetch" href="/assets/js/300.b538064a.js"><link rel="prefetch" href="/assets/js/301.59db8d5c.js"><link rel="prefetch" href="/assets/js/302.bf3613ee.js"><link rel="prefetch" href="/assets/js/303.47e446cd.js"><link rel="prefetch" href="/assets/js/304.e4fe1250.js"><link rel="prefetch" href="/assets/js/305.72f47081.js"><link rel="prefetch" href="/assets/js/306.82abe4ff.js"><link rel="prefetch" href="/assets/js/307.9a918c80.js"><link rel="prefetch" href="/assets/js/308.41c6cbe5.js"><link rel="prefetch" href="/assets/js/309.b7699154.js"><link rel="prefetch" href="/assets/js/31.89805053.js"><link rel="prefetch" href="/assets/js/310.2df6db7d.js"><link rel="prefetch" href="/assets/js/311.4e566ffc.js"><link rel="prefetch" href="/assets/js/312.b14927a8.js"><link rel="prefetch" href="/assets/js/313.9a3a03b4.js"><link rel="prefetch" href="/assets/js/314.73ef56ea.js"><link rel="prefetch" href="/assets/js/315.ac840fdf.js"><link rel="prefetch" href="/assets/js/316.85e3f949.js"><link rel="prefetch" href="/assets/js/317.7ddf9625.js"><link rel="prefetch" href="/assets/js/318.6cf8cf4b.js"><link rel="prefetch" href="/assets/js/319.96cd410f.js"><link rel="prefetch" href="/assets/js/32.466f882c.js"><link rel="prefetch" href="/assets/js/320.9b6f465f.js"><link rel="prefetch" href="/assets/js/321.0ee77635.js"><link rel="prefetch" href="/assets/js/322.3eb2b017.js"><link rel="prefetch" href="/assets/js/323.c57ab299.js"><link rel="prefetch" href="/assets/js/324.0f1d56a7.js"><link rel="prefetch" href="/assets/js/325.8067c839.js"><link rel="prefetch" href="/assets/js/326.8b78aa29.js"><link rel="prefetch" href="/assets/js/327.d1c40698.js"><link rel="prefetch" href="/assets/js/328.b36608f9.js"><link rel="prefetch" href="/assets/js/329.e406b0fd.js"><link rel="prefetch" href="/assets/js/33.e353d4a7.js"><link rel="prefetch" href="/assets/js/330.6ec8af82.js"><link rel="prefetch" href="/assets/js/331.4b45eac5.js"><link rel="prefetch" href="/assets/js/332.8a94f392.js"><link rel="prefetch" href="/assets/js/333.d8da079c.js"><link rel="prefetch" href="/assets/js/334.d0881502.js"><link rel="prefetch" href="/assets/js/335.234fee32.js"><link rel="prefetch" href="/assets/js/336.f8f79e46.js"><link rel="prefetch" href="/assets/js/337.833b036d.js"><link rel="prefetch" href="/assets/js/338.9cfed6cb.js"><link rel="prefetch" href="/assets/js/339.75d7aad4.js"><link rel="prefetch" href="/assets/js/34.d4ac227e.js"><link rel="prefetch" href="/assets/js/340.978777e5.js"><link rel="prefetch" href="/assets/js/342.a2ee7afd.js"><link rel="prefetch" href="/assets/js/343.6e6a7db2.js"><link rel="prefetch" href="/assets/js/344.5dc33a83.js"><link rel="prefetch" href="/assets/js/345.360a3a9d.js"><link rel="prefetch" href="/assets/js/346.59a71d99.js"><link rel="prefetch" href="/assets/js/347.e4fa6cb8.js"><link rel="prefetch" href="/assets/js/348.443570fc.js"><link rel="prefetch" href="/assets/js/349.1cb157da.js"><link rel="prefetch" href="/assets/js/35.79be4c2d.js"><link rel="prefetch" href="/assets/js/350.22b0d480.js"><link rel="prefetch" href="/assets/js/351.73ab553d.js"><link rel="prefetch" href="/assets/js/352.8422bce3.js"><link rel="prefetch" href="/assets/js/353.b7b7ef35.js"><link rel="prefetch" href="/assets/js/354.26eb4816.js"><link rel="prefetch" href="/assets/js/355.3ce60b83.js"><link rel="prefetch" href="/assets/js/356.caa5ea13.js"><link rel="prefetch" href="/assets/js/357.b4c6eab8.js"><link rel="prefetch" href="/assets/js/358.03512851.js"><link rel="prefetch" href="/assets/js/359.8c93f455.js"><link rel="prefetch" href="/assets/js/36.7a071608.js"><link rel="prefetch" href="/assets/js/360.80900a44.js"><link rel="prefetch" href="/assets/js/361.37bd3f46.js"><link rel="prefetch" href="/assets/js/362.5ab6d13b.js"><link rel="prefetch" href="/assets/js/363.aee1fb95.js"><link rel="prefetch" href="/assets/js/364.033be969.js"><link rel="prefetch" href="/assets/js/365.92952495.js"><link rel="prefetch" href="/assets/js/366.0ec2ef55.js"><link rel="prefetch" href="/assets/js/367.c67484d8.js"><link rel="prefetch" href="/assets/js/368.ad58679f.js"><link rel="prefetch" href="/assets/js/369.369ea8d4.js"><link rel="prefetch" href="/assets/js/37.d6151b8b.js"><link rel="prefetch" href="/assets/js/370.8c0faa32.js"><link rel="prefetch" href="/assets/js/371.d1db2074.js"><link rel="prefetch" href="/assets/js/372.e5a12ca8.js"><link rel="prefetch" href="/assets/js/373.97fcd748.js"><link rel="prefetch" href="/assets/js/374.d24e04e2.js"><link rel="prefetch" href="/assets/js/375.2f4eef4d.js"><link rel="prefetch" href="/assets/js/376.5880be64.js"><link rel="prefetch" href="/assets/js/377.a20dd17f.js"><link rel="prefetch" href="/assets/js/378.a2cb3268.js"><link rel="prefetch" href="/assets/js/379.4793f7c1.js"><link rel="prefetch" href="/assets/js/38.02d1febb.js"><link rel="prefetch" href="/assets/js/380.6f62bbee.js"><link rel="prefetch" href="/assets/js/381.792d5c48.js"><link rel="prefetch" href="/assets/js/382.4633f2ba.js"><link rel="prefetch" href="/assets/js/383.66990efd.js"><link rel="prefetch" href="/assets/js/384.8c15437d.js"><link rel="prefetch" href="/assets/js/385.552a868c.js"><link rel="prefetch" href="/assets/js/386.d56603f3.js"><link rel="prefetch" href="/assets/js/387.10f8f7b8.js"><link rel="prefetch" href="/assets/js/388.16859fc3.js"><link rel="prefetch" href="/assets/js/389.9fc0d9c8.js"><link rel="prefetch" href="/assets/js/39.52b78afa.js"><link rel="prefetch" href="/assets/js/390.c1b37ee1.js"><link rel="prefetch" href="/assets/js/391.4803794f.js"><link rel="prefetch" href="/assets/js/392.5f2eabf9.js"><link rel="prefetch" href="/assets/js/393.4ff90fa7.js"><link rel="prefetch" href="/assets/js/394.bae8bb12.js"><link rel="prefetch" href="/assets/js/395.198f79e0.js"><link rel="prefetch" href="/assets/js/396.20afca71.js"><link rel="prefetch" href="/assets/js/397.642eaa58.js"><link rel="prefetch" href="/assets/js/398.38a6bdaa.js"><link rel="prefetch" href="/assets/js/399.ba8c0de6.js"><link rel="prefetch" href="/assets/js/4.a68597db.js"><link rel="prefetch" href="/assets/js/40.c160b9fd.js"><link rel="prefetch" href="/assets/js/400.8dce863a.js"><link rel="prefetch" href="/assets/js/401.73b97374.js"><link rel="prefetch" href="/assets/js/402.e4ebc0c4.js"><link rel="prefetch" href="/assets/js/403.fe37f0ad.js"><link rel="prefetch" href="/assets/js/404.4445e5df.js"><link rel="prefetch" href="/assets/js/405.dc8c2dc1.js"><link rel="prefetch" href="/assets/js/406.13e68fb3.js"><link rel="prefetch" href="/assets/js/407.95947fa2.js"><link rel="prefetch" href="/assets/js/408.aa542e95.js"><link rel="prefetch" href="/assets/js/409.ab36c9a6.js"><link rel="prefetch" href="/assets/js/41.0aba3e27.js"><link rel="prefetch" href="/assets/js/410.48e50f15.js"><link rel="prefetch" href="/assets/js/411.7c29ffda.js"><link rel="prefetch" href="/assets/js/412.baf7f510.js"><link rel="prefetch" href="/assets/js/413.a0e30ad4.js"><link rel="prefetch" href="/assets/js/414.9e2e1a7d.js"><link rel="prefetch" href="/assets/js/415.061d4607.js"><link rel="prefetch" href="/assets/js/416.334e0459.js"><link rel="prefetch" href="/assets/js/417.bb9cf97e.js"><link rel="prefetch" href="/assets/js/42.a2225282.js"><link rel="prefetch" href="/assets/js/43.60b8cc73.js"><link rel="prefetch" href="/assets/js/44.d1bd963b.js"><link rel="prefetch" href="/assets/js/45.a2d474d6.js"><link rel="prefetch" href="/assets/js/46.eac472d0.js"><link rel="prefetch" href="/assets/js/47.542459f0.js"><link rel="prefetch" href="/assets/js/48.341b8db8.js"><link rel="prefetch" href="/assets/js/49.a786e041.js"><link rel="prefetch" href="/assets/js/5.28151e60.js"><link rel="prefetch" href="/assets/js/50.3e9d91ce.js"><link rel="prefetch" href="/assets/js/51.0729208c.js"><link rel="prefetch" href="/assets/js/52.76bd2586.js"><link rel="prefetch" href="/assets/js/53.5ff982be.js"><link rel="prefetch" href="/assets/js/54.23f15748.js"><link rel="prefetch" href="/assets/js/55.3bf2a5c1.js"><link rel="prefetch" href="/assets/js/56.1744142f.js"><link rel="prefetch" href="/assets/js/57.90d019e1.js"><link rel="prefetch" href="/assets/js/58.7b6dc848.js"><link rel="prefetch" href="/assets/js/59.bcd80f71.js"><link rel="prefetch" href="/assets/js/6.8fdc2d2f.js"><link rel="prefetch" href="/assets/js/60.64e983eb.js"><link rel="prefetch" href="/assets/js/61.d22192ff.js"><link rel="prefetch" href="/assets/js/62.c84c7aaa.js"><link rel="prefetch" href="/assets/js/63.dd026eb1.js"><link rel="prefetch" href="/assets/js/64.2f75d60b.js"><link rel="prefetch" href="/assets/js/65.dc493049.js"><link rel="prefetch" href="/assets/js/66.edd545c7.js"><link rel="prefetch" href="/assets/js/67.798cfbfc.js"><link rel="prefetch" href="/assets/js/68.b0ebc9d8.js"><link rel="prefetch" href="/assets/js/69.c929ddc2.js"><link rel="prefetch" href="/assets/js/7.6447749c.js"><link rel="prefetch" href="/assets/js/70.3c2e3a65.js"><link rel="prefetch" href="/assets/js/71.db3a0474.js"><link rel="prefetch" href="/assets/js/72.410f23fa.js"><link rel="prefetch" href="/assets/js/73.d8cae215.js"><link rel="prefetch" href="/assets/js/74.78655130.js"><link rel="prefetch" href="/assets/js/75.ee32be45.js"><link rel="prefetch" href="/assets/js/76.72062db1.js"><link rel="prefetch" href="/assets/js/77.3bcb196b.js"><link rel="prefetch" href="/assets/js/78.d022a438.js"><link rel="prefetch" href="/assets/js/79.c8bc3e01.js"><link rel="prefetch" href="/assets/js/8.71ec8233.js"><link rel="prefetch" href="/assets/js/80.7eb160e3.js"><link rel="prefetch" href="/assets/js/81.d83716f9.js"><link rel="prefetch" href="/assets/js/82.a16620eb.js"><link rel="prefetch" href="/assets/js/83.109e69d7.js"><link rel="prefetch" href="/assets/js/84.5d0e8d72.js"><link rel="prefetch" href="/assets/js/85.7ad0606e.js"><link rel="prefetch" href="/assets/js/86.f8bed698.js"><link rel="prefetch" href="/assets/js/87.00204387.js"><link rel="prefetch" href="/assets/js/88.23ecf470.js"><link rel="prefetch" href="/assets/js/89.dbe77c40.js"><link rel="prefetch" href="/assets/js/9.241577bb.js"><link rel="prefetch" href="/assets/js/90.a106e2e7.js"><link rel="prefetch" href="/assets/js/91.dcded4ed.js"><link rel="prefetch" href="/assets/js/92.484f8b1f.js"><link rel="prefetch" href="/assets/js/93.e3dd85b5.js"><link rel="prefetch" href="/assets/js/94.cd337446.js"><link rel="prefetch" href="/assets/js/95.12425d97.js"><link rel="prefetch" href="/assets/js/96.8f74c17c.js"><link rel="prefetch" href="/assets/js/97.77e41f84.js"><link rel="prefetch" href="/assets/js/98.bf44b86d.js"><link rel="prefetch" href="/assets/js/99.f75896be.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.029a7c95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d34d66f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">以太坊改进提案 EIPs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/summary/all.html" class="sidebar-link">All EIPs List</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Status</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/living.html" class="sidebar-link">Living (1)</a></li><li><a href="/summary/final.html" class="sidebar-link">Final (88)</a></li><li><a href="/summary/draft.html" class="sidebar-link">Draft (157)</a></li><li><a href="/summary/stagnant.html" class="sidebar-link">Stagnant (101)</a></li><li><a href="/summary/withdrawn.html" class="sidebar-link">Withdrawn (22)</a></li><li><a href="/summary/last-call.html" class="sidebar-link">Last Call (8)</a></li><li><a href="/summary/review.html" class="sidebar-link">Review (14)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Types</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/meta.html" class="sidebar-link">Meta (18)</a></li><li><a href="/summary/standards-track.html" class="sidebar-link">Standards Track (367)</a></li><li><a href="/summary/informational.html" class="sidebar-link">Informational (6)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Category</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/core.html" class="sidebar-link">Core (165)</a></li><li><a href="/summary/erc.html" class="sidebar-link">ERC (153)</a></li><li><a href="/summary/interface.html" class="sidebar-link">Interface (38)</a></li><li><a href="/summary/networking.html" class="sidebar-link">Networking (11)</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>Introduce a section in the EOF format (<a href="/eip-3540.html">EIP-3540</a>) for storing the list of <code>JUMPDEST</code>s, validate the correctness of this list at the time of contract creation, and remove the need for <code>JUMPDEST</code>-analysis at execution time. In EOF contracts, the <code>JUMPDEST</code> instruction is not needed anymore and becomes invalid. Legacy contracts are entirely unaffected by this change.</p> <h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>Currently existing contracts require no validation of correctness, but every time they are executed, a list must be built containing all the valid jump-destinations. This is an overhead which can be avoided, albeit the effect of the overhead depends on the client implementation.</p> <p>With the structure provided by EIP-3540 it is easy to store and transmit a table of valid jump-destinations instead of using designated <code>JUMPDEST</code> (0x5b) opcodes in the code.</p> <p>The goal of this change is that we trade less complexity (and processing time) at execution time for more complexity at contract creation time. Through benchmarks we have identified that the mandatory execution preparation time is the same as before for extreme cases (i.e. deliberate edge cases), while it is ~10x faster for the average case.</p> <p>Finally, this change puts an implicit bound on &quot;initcode analysis&quot; which is now limited to jumpdests section loading of max size of 0xffff. The legacy code remains vulnerable.</p> <h2 id="specification"><a href="#specification" class="header-anchor">#</a> Specification</h2> <p>This feature is introduced on the very same block <a href="/eip-3540.html">EIP-3540</a> is enabled, therefore every EOF1-compatible bytecode MUST have a JUMPDEST-table if it uses jumps.</p> <p><em>Remark:</em> We rely on the notation of <em>initcode</em>, <em>code</em> and <em>creation</em> as defined by <a href="/eip-3540.html">EIP-3540</a>, and extend validation rules of <a href="/eip-3670.html">EIP-3670</a>.</p> <h3 id="eof-container-changes"><a href="#eof-container-changes" class="header-anchor">#</a> EOF container changes</h3> <ol><li><p>A new EOF section called <code>jumpdests</code> (<code>section_kind = 3</code>) is introduced. It contains a sequence of <em>n</em> unsigned integers <em>jumploc<sub>i</sub></em>.</p></li> <li><p>The <em>jumploc<sub>i</sub></em> values are encoded with <a href="https://en.wikipedia.org/wiki/LEB128#Unsigned_LEB128" target="_blank" rel="noopener noreferrer">unsigned LEB128<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <table><thead><tr><th>description</th> <th>encoding</th></tr></thead> <tbody><tr><td>jumploc<sub>0</sub></td> <td>unsigned LEB128</td></tr> <tr><td>jumploc<sub>1</sub></td> <td>unsigned LEB128</td></tr> <tr><td>...</td> <td></td></tr> <tr><td>jumploc<sub>n</sub></td> <td>unsigned LEB128</td></tr></tbody></table></li> <li><p>The jump destinations represent the set of valid code positions as arguments to jump instructions. They are delta-encoded therefore partial sum must be performed to retrieve the absolute offsets.</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">jumpdest</span><span class="token punctuation">(</span>n<span class="token punctuation">:</span> <span class="token builtin">int</span><span class="token punctuation">,</span> jumpdests_table<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    <span class="token keyword">return</span> <span class="token builtin">sum</span><span class="token punctuation">(</span>jumpdests_table<span class="token punctuation">[</span><span class="token punctuation">:</span>n<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ol> <h3 id="validation-rules"><a href="#validation-rules" class="header-anchor">#</a> Validation rules</h3> <blockquote><p>This section extends contact creation validation rules (as defined in EIP-3540).</p></blockquote> <ol start="4"><li>The <code>jumpdests</code> section MUST be present if and only if the <code>code</code> section contains <code>JUMP</code> or <code>JUMPI</code> opcodes.</li> <li>If the <code>jumpdests</code> section is present it MUST directly precede the <code>code</code> section. In this case a valid EOF bytecode will have the form of <code>format, magic, version, [jumpdests_section_header], code_section_header, [data_section_header], 0, [jumpdests_section_contents], code_section_contents, [data_section_contents]</code>.</li> <li>The LEB128 encoding of a <code>jumploc</code> must be valid: the encoding must be complete and not read out of <code>jumpdests</code> section. As an additional constraint, the shortest possible encoding must be used.</li> <li>With an exception of the first entry, the value of <code>jumploc</code> MUST NOT be 0.</li> <li>Every <code>jumploc</code> MUST point to a valid opcode. They MUST NOT point into PUSH-data or outside of the code section.</li> <li>The <code>JUMPDEST</code> (0x5b) instruction becomes undefined (Note: According to rules of EIP-3670, deploying the code will fail if it contains <code>JUMPDEST</code>)</li></ol> <h3 id="execution"><a href="#execution" class="header-anchor">#</a> Execution</h3> <ol start="10"><li>When executing <code>JUMP</code> or <code>JUMPI</code> instructions, the jump destination MUST be in the <code>jumpdests</code> table. Otherwise, the execution aborts with <em>bad jump destination</em>. In case of <code>JUMPI</code>, the check is done only when the jump is to be taken (no change to the previous behaviour).</li></ol> <h2 id="rationale"><a href="#rationale" class="header-anchor">#</a> Rationale</h2> <h3 id="jumpdests-section-is-bounded"><a href="#jumpdests-section-is-bounded" class="header-anchor">#</a> Jumpdests section is bounded</h3> <p>The length of the <code>jumpdests</code> section is bounded by the EOF maximum section size value 0xffff. Moreover, for deployed code this additionally limited by the max bytecode size 0x6000. Then any valid <code>jumpdests</code> section may not be more larger than 0x3000.</p> <h3 id="delta-encoding"><a href="#delta-encoding" class="header-anchor">#</a> Delta encoding</h3> <p>Delta-encoding is very efficient for this job. From a quick analysis of a small set of contracts <code>JUMPDEST</code> opcodes are relatively close to each other. In the delta-encoding the values almost never exceed 128. Combined with any form of variable-length quantity (VLQ) where values &lt; 128 occupy one byte, encoding of single jumpdest takes ~1 byte. We also remove <code>JUMPDEST</code> opcodes from the code section therefore the total bytecode length remains the same if extreme examples are ignored.</p> <p>By extreme examples we mean contracts having a distance between two subsequent JUMPDESTs larger than 128. Then the LEB128 encoding of such distance requires more than one byte and the total bytecode size will increase by the additional number of bytes used.</p> <h3 id="leb128-for-offsets"><a href="#leb128-for-offsets" class="header-anchor">#</a> LEB128 for offsets</h3> <p>The LEB128 encoding is the most popular VLQ used in DWARF and WebAssembly.</p> <p>LEB128 allows encoding a fixed value with arbitrary number of bytes by having zero payloads for most significant bits of the value. To ensure there exists only single encoding of a given value, we additionally require the shortest possible LEB128 encoding to be used. This constraint is also required by WebAssembly.</p> <h3 id="size-prefix-for-offsets"><a href="#size-prefix-for-offsets" class="header-anchor">#</a> Size-prefix for offsets</h3> <p>This is another option for encoding inspired by UTF-8. The benefit is that the number of following bytes is encoded in the first byte (the top two bits), so the expected length is known upfront.</p> <p>A simple decoder is the following:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">decode</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">int</span><span class="token punctuation">:</span>
    size_prefix <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&gt;&gt;</span> <span class="token number">6</span>
    <span class="token keyword">if</span> size_prefix <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">0x3f</span>
    <span class="token keyword">elif</span> size_prefix <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">0x3f</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span> <span class="token operator">|</span> <span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">elif</span> size_prefix <span class="token operator">==</span> <span class="token number">2</span><span class="token punctuation">:</span>
        <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">&amp;</span> <span class="token number">0x3f</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> <span class="token number">16</span> <span class="token operator">|</span> <span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">&lt;&lt;</span> <span class="token number">8</span><span class="token punctuation">)</span> <span class="token operator">|</span> <span class="token builtin">input</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>
    <span class="token comment"># Do not support case 3</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="empty-table"><a href="#empty-table" class="header-anchor">#</a> Empty table</h3> <p>In case code does not use jumps, an empty JUMPDEST table is represented by omitting <code>jumpdests</code> section as opposed to a section that is always present, but allowed to be empty. This is consistent with the requirement of EIP-3540 for section size to be non-zero. Additionally, omitting the section saves 3 bytes of code storage.</p> <h3 id="why-jumpdests-before-code"><a href="#why-jumpdests-before-code" class="header-anchor">#</a> Why jumpdests before code?</h3> <p>The contents of <code>jumpdests</code> section are always needed to start EVM execution. For chunked and/or merkleized bytecode it is more efficient to have <code>jumpdests</code> just after the EOF header so they can share the same first chunk(s).</p> <h3 id="code-chunking-merkleization"><a href="#code-chunking-merkleization" class="header-anchor">#</a> Code chunking / merkleization</h3> <p>In code chunking the contract code is split into (fixed size) chunks. Due to the requirement of jumpdest-analysis, it must be known where the first instruction starts in a given chunk, in case the split happened within a PUSH-data. This is commonly accomplished with reserving the first byte of the chunk as the &quot;first instruction offset&quot; (FIO) field.</p> <p>With this EIP, code chunking does not need to have such a field. However, the jumpdest table must be provided instead (for all the chunks up until the last jump location used during execution).</p> <h3 id="benchmarks-performance-analysis"><a href="#benchmarks-performance-analysis" class="header-anchor">#</a> Benchmarks / performance analysis</h3> <p>We compared the performance of <code>jumpdests</code> section loading to JUMPDEST analysis in evmone/Baseline interpreter. In both cases a bitset of valid jumpdest positions is built.</p> <p>We used the worst case for <code>jumpdests</code> section as the benchmark baseline. This is the case where every position in the code section is valid jumpdest. I.e. the bytecode has as many jumpdests as possible making the jumpdests section as large as possible. The encoded representation is <code>0x00, 0x01, 0x01, 0x01, ...</code>.</p> <p>This also happen to be the worst case for the JUMPDEST analysis.</p> <p>Further, we picked 5 popular contracts from the Ethereum mainnet.</p> <table><thead><tr><th>case</th> <th>size</th> <th>num JUMPDESTs</th> <th>JUMPDEST analysis (cycles/byte)</th> <th>jumpdests load (cycles/byte)</th> <th>performance change</th></tr></thead> <tbody><tr><td>worst</td> <td>65535</td> <td>65535</td> <td>9.11</td> <td>9.36</td> <td>2.75%</td></tr> <tr><td>RoninBridge</td> <td>1760</td> <td>71</td> <td>3.57</td> <td></td> <td>-89.41%</td></tr> <tr><td>UniswapV2ERC20</td> <td>2319</td> <td>61</td> <td>2.10</td> <td></td> <td>-88.28%</td></tr> <tr><td>DepositContract</td> <td>6358</td> <td>123</td> <td>1.86</td> <td></td> <td>-90.24%</td></tr> <tr><td>TetherToken</td> <td>11075</td> <td>236</td> <td>1.91</td> <td></td> <td>-89.58%</td></tr> <tr><td>UniswapV2Router02</td> <td>21943</td> <td>468</td> <td>2.26</td> <td></td> <td>-91.17%</td></tr></tbody></table> <p>For the worst case the performance difference between JUMPDEST analysis and jumpdests section loading is very small. The performance very slow compared to memory copy (0.15 cycles/byte).</p> <p>However, the maximum length for the worst cases is different. For JUMPDEST analysis this is 24576 (0x6000) for deployed contracts and only limited by EVM memory cost in case of <em>initcode</em> (can be over 1MB). For jumpdests sections, the limit is 12288 for deployed contracts (the deployed bytecode length limit must be split equally between jumpdests and code sections). For <em>initcode</em> case, the limit is 65535 because this is the maximum section size allowed by EOF.</p> <p>For &quot;popular&quot; contracts the gained efficiency is ~10x because the jumpdests section is relatively small compared to the code section and therefore there is much less bytes to loop over than in JUMPDEST analysis.</p> <h2 id="reference-implementation"><a href="#reference-implementation" class="header-anchor">#</a> Reference Implementation</h2> <p>We extend the <code>validate_code()</code> function of <a href="/eip-3670.html">EIP-3670</a>:</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token comment"># The same table as in EIP-3670</span>
valid_opcodes <span class="token operator">=</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>

<span class="token comment"># Remove JUMPDEST from the list of valid opcodes</span>
valid_opcodes<span class="token punctuation">.</span>remove<span class="token punctuation">(</span><span class="token number">0x5b</span><span class="token punctuation">)</span>

<span class="token comment"># This helper decodes a single unsigned LEB128 encoded value</span>
<span class="token comment"># This will abort on truncated (short) input</span>
<span class="token keyword">def</span> <span class="token function">leb128u_decode</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
  ret <span class="token operator">=</span> <span class="token number">0</span>
  shift <span class="token operator">=</span> <span class="token number">0</span>
  consumed_bytes <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">while</span> <span class="token boolean">True</span><span class="token punctuation">:</span>
      <span class="token comment"># Check for truncated input</span>
      <span class="token keyword">assert</span><span class="token punctuation">(</span>consumed_bytes <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
      <span class="token comment"># Only allow up to 4-byte long leb128 encodings</span>
      <span class="token keyword">assert</span><span class="token punctuation">(</span>consumed_bytes <span class="token operator">&lt;=</span> <span class="token number">3</span><span class="token punctuation">)</span>
      input_byte <span class="token operator">=</span> <span class="token builtin">input</span><span class="token punctuation">[</span>consumed_bytes<span class="token punctuation">]</span>
      consumed_bytes <span class="token operator">+=</span> <span class="token number">1</span>
      ret <span class="token operator">|</span><span class="token operator">=</span> <span class="token punctuation">(</span>input_byte <span class="token operator">&amp;</span> <span class="token number">0x7f</span><span class="token punctuation">)</span> <span class="token operator">&lt;&lt;</span> shift
      <span class="token keyword">if</span> <span class="token punctuation">(</span>input_byte <span class="token operator">&amp;</span> <span class="token number">0x80</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">:</span>
          <span class="token comment"># Do not allow additional leading zero bits.</span>
          <span class="token keyword">assert</span><span class="token punctuation">(</span>input_byte <span class="token operator">!=</span> <span class="token number">0</span> <span class="token operator">|</span><span class="token operator">|</span> consumed_bytes <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
          <span class="token keyword">break</span>
      shift <span class="token operator">+=</span> <span class="token number">7</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span>ret<span class="token punctuation">,</span> consumed_bytes<span class="token punctuation">)</span>

<span class="token comment"># This helper parses the jumpdest table into a list of relative offsets</span>
<span class="token comment"># This will abort on truncated (short) input</span>
<span class="token keyword">def</span> <span class="token function">parse_table</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
  jumpdests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  pos <span class="token operator">=</span> <span class="token number">0</span>
  <span class="token keyword">while</span> pos <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
      value<span class="token punctuation">,</span> consumed_bytes <span class="token operator">=</span> leb128u_decode<span class="token punctuation">(</span><span class="token builtin">input</span><span class="token punctuation">[</span>pos<span class="token punctuation">:</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
      jumpdests<span class="token punctuation">.</span>append<span class="token punctuation">(</span>value<span class="token punctuation">)</span>
      pos <span class="token operator">+=</span> consumed_bytes
  <span class="token keyword">return</span> jumpdests

<span class="token comment"># This helper translates the delta offsets into absolute ones</span>
<span class="token comment"># This will abort on invalid 0-value entries</span>
<span class="token keyword">def</span> <span class="token function">process_jumpdests</span><span class="token punctuation">(</span>delta<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">:</span>
    jumpdests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
    partial_sum <span class="token operator">=</span> <span class="token number">0</span>
    first <span class="token operator">=</span> <span class="token boolean">True</span>
    <span class="token keyword">for</span> d <span class="token keyword">in</span> delta<span class="token punctuation">:</span>
        <span class="token keyword">if</span> first<span class="token punctuation">:</span>
            first <span class="token operator">=</span> <span class="token boolean">False</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            <span class="token keyword">assert</span><span class="token punctuation">(</span>d <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span>
        partial_sum <span class="token operator">+=</span> d
        jumpdests<span class="token punctuation">.</span>append<span class="token punctuation">(</span>partial_sum<span class="token punctuation">)</span>
    <span class="token keyword">return</span> jumpdests

<span class="token comment"># Fails with assertion on invalid code</span>
<span class="token comment"># Expects list of absolute jumpdest offsets</span>
<span class="token keyword">def</span> <span class="token function">validate_code</span><span class="token punctuation">(</span>code<span class="token punctuation">:</span> <span class="token builtin">bytes</span><span class="token punctuation">,</span> jumpdests<span class="token punctuation">:</span> <span class="token builtin">list</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    pos <span class="token operator">=</span> <span class="token number">0</span>
    <span class="token keyword">while</span> pos <span class="token operator">&lt;</span> <span class="token builtin">len</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># Ensure the opcode is valid</span>
        opcode <span class="token operator">=</span> code<span class="token punctuation">[</span>pos<span class="token punctuation">]</span>
        pos <span class="token operator">+=</span> <span class="token number">1</span>
        <span class="token keyword">assert</span><span class="token punctuation">(</span>opcode <span class="token keyword">in</span> valid_opcodes<span class="token punctuation">)</span>

        <span class="token comment"># Remove touched offset</span>
        <span class="token keyword">try</span><span class="token punctuation">:</span>
            jumpdests<span class="token punctuation">.</span>remove<span class="token punctuation">(</span>pos<span class="token punctuation">)</span>
        <span class="token keyword">except</span> ValueError<span class="token punctuation">:</span>
            <span class="token keyword">pass</span>

        <span class="token comment"># Skip pushdata</span>
        <span class="token keyword">if</span> opcode <span class="token operator">&gt;=</span> <span class="token number">0x60</span> <span class="token keyword">and</span> opcode <span class="token operator">&lt;=</span> <span class="token number">0x7f</span><span class="token punctuation">:</span>
            pos <span class="token operator">+=</span> opcode <span class="token operator">-</span> <span class="token number">0x60</span> <span class="token operator">+</span> <span class="token number">1</span>

    <span class="token comment"># Ensure last PUSH doesn't go over code end</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span>pos <span class="token operator">==</span> <span class="token builtin">len</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">)</span>

    <span class="token comment"># The table is invalid if there are untouched locations</span>
    <span class="token keyword">assert</span><span class="token punctuation">(</span><span class="token builtin">len</span><span class="token punctuation">(</span>jumpdests<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br></div></div><h2 id="test-cases"><a href="#test-cases" class="header-anchor">#</a> Test Cases</h2> <h4 id="valid-bytecodes"><a href="#valid-bytecodes" class="header-anchor">#</a> Valid bytecodes</h4> <ul><li>No jumpdests</li> <li>Every byte is a jumpdest</li> <li>Distant jumpdests (0x7f and 0x3f01 bytes apart)</li> <li>Max number of jumpdests
<ul><li>1-byte offset encoding: initcode of max size (64K) with jumpdest at each byte - table contains 65536 1-byte offsets, first one is 0x00, all others equal 0x01</li> <li>2-byte offset encoding: inicode of max size with jumpdests 0x80 (128) bytes apart - table contains 512 offsets, first one is 0x7f (127), all others equal 0x8001</li> <li>3-byte offset encoding: inicode of max size with jumpdests 0x4000 (16384) bytes apart - table contains 4 offsets: 0xFF7F (16383), 0x808001, 0x808001, 0x808001</li></ul></li></ul> <h4 id="invalid-bytecodes"><a href="#invalid-bytecodes" class="header-anchor">#</a> Invalid bytecodes</h4> <ul><li>Empty jumpdest section</li> <li>Multiple jumpdest sections</li> <li>jumpdest section after the code section</li> <li>jumpdest section after the data section</li> <li>Final jumploc in the table is truncated (not a valid LEB128)</li> <li>LEB128 encoding with extra 0s (non-minimal encoding)</li> <li>Jumpdest location pointing to PUSH data</li> <li>Jumpdest location out of code section bounds
<ul><li>pointing into data section</li> <li>pointing into jumpdest section</li> <li>pointing outside container bounds</li></ul></li> <li>Duplicate jumpdest locations (0 deltas in table other than 1st offset)</li> <li>Code containing <code>JUMP</code> but no jumpdest table</li> <li>Code containing <code>JUMPI</code> but no jumpdest table</li> <li>Code containing jumpdest table but not <code>JUMP</code>/<code>JUMPI</code></li> <li>Code containing <code>JUMPDEST</code></li></ul> <h2 id="backwards-compatibility"><a href="#backwards-compatibility" class="header-anchor">#</a> Backwards Compatibility</h2> <p>This change poses no risk to backwards compatibility, as it is introduced at the same time EIP-3540 is. The requirement of a JUMPDEST table does not cover legacy bytecode.</p> <h2 id="security-considerations"><a href="#security-considerations" class="header-anchor">#</a> Security Considerations</h2> <p>The authors are not aware of any security or DoS risks posed by this change.</p> <h2 id="copyright"><a href="#copyright" class="header-anchor">#</a> Copyright</h2> <p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" rel="noopener noreferrer">CC0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ethlibrary/EIPs/edit/master/EIPS/eip-3690.md" target="_blank" rel="noopener noreferrer">帮助完善文档</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/26/2021, 5:30:06 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.53cd5b34.js" defer></script><script src="/assets/js/3.afc73834.js" defer></script><script src="/assets/js/341.3792e0d7.js" defer></script>
  </body>
</html>
