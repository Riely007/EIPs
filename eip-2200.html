<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Structured Definitions for Net Gas Metering | 以太坊改进提案 EIPs</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="以太坊改进提案（EIPs）描述了以太坊平台的标准，包括核心协议规范，客户端API和合约标准。">
    
    <link rel="preload" href="/assets/css/0.styles.5d34d66f.css" as="style"><link rel="preload" href="/assets/js/app.3c081c0d.js" as="script"><link rel="preload" href="/assets/js/3.afc73834.js" as="script"><link rel="preload" href="/assets/js/199.98b8b4e2.js" as="script"><link rel="prefetch" href="/assets/js/10.1f5e4f3e.js"><link rel="prefetch" href="/assets/js/100.5e83168e.js"><link rel="prefetch" href="/assets/js/101.abc1c66c.js"><link rel="prefetch" href="/assets/js/102.f1608d9e.js"><link rel="prefetch" href="/assets/js/103.50677a84.js"><link rel="prefetch" href="/assets/js/104.e9244ddc.js"><link rel="prefetch" href="/assets/js/105.74bb2b2c.js"><link rel="prefetch" href="/assets/js/106.78821836.js"><link rel="prefetch" href="/assets/js/107.f2cad26b.js"><link rel="prefetch" href="/assets/js/108.806c491a.js"><link rel="prefetch" href="/assets/js/109.2536f3b5.js"><link rel="prefetch" href="/assets/js/11.19d07763.js"><link rel="prefetch" href="/assets/js/110.aa8e5dff.js"><link rel="prefetch" href="/assets/js/111.486fd49e.js"><link rel="prefetch" href="/assets/js/112.0e5dc443.js"><link rel="prefetch" href="/assets/js/113.14d95a60.js"><link rel="prefetch" href="/assets/js/114.1282f1e1.js"><link rel="prefetch" href="/assets/js/115.8f4357cd.js"><link rel="prefetch" href="/assets/js/116.faa46692.js"><link rel="prefetch" href="/assets/js/117.ce807443.js"><link rel="prefetch" href="/assets/js/118.c075df33.js"><link rel="prefetch" href="/assets/js/119.c8959574.js"><link rel="prefetch" href="/assets/js/12.cc14cc21.js"><link rel="prefetch" href="/assets/js/120.a997950d.js"><link rel="prefetch" href="/assets/js/121.d55fab26.js"><link rel="prefetch" href="/assets/js/122.0d55f0f1.js"><link rel="prefetch" href="/assets/js/123.f0ef1c2b.js"><link rel="prefetch" href="/assets/js/124.84d00fe3.js"><link rel="prefetch" href="/assets/js/125.64e003e7.js"><link rel="prefetch" href="/assets/js/126.a31044d7.js"><link rel="prefetch" href="/assets/js/127.1ff3a4af.js"><link rel="prefetch" href="/assets/js/128.38dfcf65.js"><link rel="prefetch" href="/assets/js/129.39594e41.js"><link rel="prefetch" href="/assets/js/13.79199e7b.js"><link rel="prefetch" href="/assets/js/130.e85ffe06.js"><link rel="prefetch" href="/assets/js/131.fd90a8ff.js"><link rel="prefetch" href="/assets/js/132.62043b85.js"><link rel="prefetch" href="/assets/js/133.292c85d5.js"><link rel="prefetch" href="/assets/js/134.720824f2.js"><link rel="prefetch" href="/assets/js/135.330b0de9.js"><link rel="prefetch" href="/assets/js/136.d5434ef4.js"><link rel="prefetch" href="/assets/js/137.aefa600d.js"><link rel="prefetch" href="/assets/js/138.00d829f8.js"><link rel="prefetch" href="/assets/js/139.fa3af3a0.js"><link rel="prefetch" href="/assets/js/14.3ec7ba2c.js"><link rel="prefetch" href="/assets/js/140.65655e4b.js"><link rel="prefetch" href="/assets/js/141.51c0ec0a.js"><link rel="prefetch" href="/assets/js/142.aa405a6d.js"><link rel="prefetch" href="/assets/js/143.7ef37d04.js"><link rel="prefetch" href="/assets/js/144.813a767b.js"><link rel="prefetch" href="/assets/js/145.ac7bbacf.js"><link rel="prefetch" href="/assets/js/146.f604aa88.js"><link rel="prefetch" href="/assets/js/147.5b1e7ab8.js"><link rel="prefetch" href="/assets/js/148.f1c25d01.js"><link rel="prefetch" href="/assets/js/149.e1de4f68.js"><link rel="prefetch" href="/assets/js/15.151539ae.js"><link rel="prefetch" href="/assets/js/150.d8785b19.js"><link rel="prefetch" href="/assets/js/151.97e4d45f.js"><link rel="prefetch" href="/assets/js/152.60b9a345.js"><link rel="prefetch" href="/assets/js/153.c215540b.js"><link rel="prefetch" href="/assets/js/154.d80adb79.js"><link rel="prefetch" href="/assets/js/155.067c9183.js"><link rel="prefetch" href="/assets/js/156.564c5338.js"><link rel="prefetch" href="/assets/js/157.f6e4fb9f.js"><link rel="prefetch" href="/assets/js/158.2780e531.js"><link rel="prefetch" href="/assets/js/159.95a9bbc1.js"><link rel="prefetch" href="/assets/js/16.f1797f39.js"><link rel="prefetch" href="/assets/js/160.f4445c3b.js"><link rel="prefetch" href="/assets/js/161.7ec4dccc.js"><link rel="prefetch" href="/assets/js/162.7ba8ee46.js"><link rel="prefetch" href="/assets/js/163.f0aa8208.js"><link rel="prefetch" href="/assets/js/164.4fe8c403.js"><link rel="prefetch" href="/assets/js/165.2d8ce405.js"><link rel="prefetch" href="/assets/js/166.6aa05391.js"><link rel="prefetch" href="/assets/js/167.82768149.js"><link rel="prefetch" href="/assets/js/168.b81a0c2a.js"><link rel="prefetch" href="/assets/js/169.435758b2.js"><link rel="prefetch" href="/assets/js/17.1c3e6588.js"><link rel="prefetch" href="/assets/js/170.4a19f99a.js"><link rel="prefetch" href="/assets/js/171.8b67db69.js"><link rel="prefetch" href="/assets/js/172.e4af9969.js"><link rel="prefetch" href="/assets/js/173.ea79fae8.js"><link rel="prefetch" href="/assets/js/174.bdfb4cb2.js"><link rel="prefetch" href="/assets/js/175.c31a370d.js"><link rel="prefetch" href="/assets/js/176.41fc6fc9.js"><link rel="prefetch" href="/assets/js/177.d49686da.js"><link rel="prefetch" href="/assets/js/178.9fc70e1d.js"><link rel="prefetch" href="/assets/js/179.9773da56.js"><link rel="prefetch" href="/assets/js/18.4e631205.js"><link rel="prefetch" href="/assets/js/180.edebbc8c.js"><link rel="prefetch" href="/assets/js/181.9c7e1e79.js"><link rel="prefetch" href="/assets/js/182.34c52e30.js"><link rel="prefetch" href="/assets/js/183.9702d486.js"><link rel="prefetch" href="/assets/js/184.34ceb786.js"><link rel="prefetch" href="/assets/js/185.e536c5d5.js"><link rel="prefetch" href="/assets/js/186.11665bdc.js"><link rel="prefetch" href="/assets/js/187.5ad2506b.js"><link rel="prefetch" href="/assets/js/188.94d50a82.js"><link rel="prefetch" href="/assets/js/189.e94b7567.js"><link rel="prefetch" href="/assets/js/19.07dc175d.js"><link rel="prefetch" href="/assets/js/190.a44802e9.js"><link rel="prefetch" href="/assets/js/191.2710b7f4.js"><link rel="prefetch" href="/assets/js/192.8fa54ace.js"><link rel="prefetch" href="/assets/js/193.45b30c52.js"><link rel="prefetch" href="/assets/js/194.34eb3369.js"><link rel="prefetch" href="/assets/js/195.e800d01e.js"><link rel="prefetch" href="/assets/js/196.993e37d7.js"><link rel="prefetch" href="/assets/js/197.cfd0371e.js"><link rel="prefetch" href="/assets/js/198.7e41a7ba.js"><link rel="prefetch" href="/assets/js/20.a23c95ca.js"><link rel="prefetch" href="/assets/js/200.dd8af084.js"><link rel="prefetch" href="/assets/js/201.b0651559.js"><link rel="prefetch" href="/assets/js/202.9fda4a48.js"><link rel="prefetch" href="/assets/js/203.ed8c4ff4.js"><link rel="prefetch" href="/assets/js/204.35587f6c.js"><link rel="prefetch" href="/assets/js/205.321dcf85.js"><link rel="prefetch" href="/assets/js/206.9b73d45c.js"><link rel="prefetch" href="/assets/js/207.1db9d0bc.js"><link rel="prefetch" href="/assets/js/208.2323fc5c.js"><link rel="prefetch" href="/assets/js/209.073cc71d.js"><link rel="prefetch" href="/assets/js/21.a9782f3b.js"><link rel="prefetch" href="/assets/js/210.72f984ce.js"><link rel="prefetch" href="/assets/js/211.d9917eee.js"><link rel="prefetch" href="/assets/js/212.9ea4d869.js"><link rel="prefetch" href="/assets/js/213.c02335e9.js"><link rel="prefetch" href="/assets/js/214.4a142067.js"><link rel="prefetch" href="/assets/js/215.8ed26078.js"><link rel="prefetch" href="/assets/js/216.0a0fd08f.js"><link rel="prefetch" href="/assets/js/217.a33898a0.js"><link rel="prefetch" href="/assets/js/218.5957a55c.js"><link rel="prefetch" href="/assets/js/219.2dce84f7.js"><link rel="prefetch" href="/assets/js/22.3792846c.js"><link rel="prefetch" href="/assets/js/220.830eaf36.js"><link rel="prefetch" href="/assets/js/221.aae7daca.js"><link rel="prefetch" href="/assets/js/222.36ee8bea.js"><link rel="prefetch" href="/assets/js/223.e4ee05e9.js"><link rel="prefetch" href="/assets/js/224.e7f443fc.js"><link rel="prefetch" href="/assets/js/225.dfa85f47.js"><link rel="prefetch" href="/assets/js/226.71e9b973.js"><link rel="prefetch" href="/assets/js/227.8484d6cc.js"><link rel="prefetch" href="/assets/js/228.f6928d72.js"><link rel="prefetch" href="/assets/js/229.fea960db.js"><link rel="prefetch" href="/assets/js/23.019e73dd.js"><link rel="prefetch" href="/assets/js/230.d86e0be9.js"><link rel="prefetch" href="/assets/js/231.3bbf02cc.js"><link rel="prefetch" href="/assets/js/232.8df33f46.js"><link rel="prefetch" href="/assets/js/233.cb8d0b73.js"><link rel="prefetch" href="/assets/js/234.e46ce374.js"><link rel="prefetch" href="/assets/js/235.dbac9148.js"><link rel="prefetch" href="/assets/js/236.a24aa05a.js"><link rel="prefetch" href="/assets/js/237.9713dbec.js"><link rel="prefetch" href="/assets/js/238.ae583618.js"><link rel="prefetch" href="/assets/js/239.3ed46955.js"><link rel="prefetch" href="/assets/js/24.d7969000.js"><link rel="prefetch" href="/assets/js/240.865b07ed.js"><link rel="prefetch" href="/assets/js/241.774c50b3.js"><link rel="prefetch" href="/assets/js/242.3dea429a.js"><link rel="prefetch" href="/assets/js/243.d066ef46.js"><link rel="prefetch" href="/assets/js/244.4314f19c.js"><link rel="prefetch" href="/assets/js/245.7411c815.js"><link rel="prefetch" href="/assets/js/246.04f4cf64.js"><link rel="prefetch" href="/assets/js/247.a8d37f4b.js"><link rel="prefetch" href="/assets/js/248.02e38126.js"><link rel="prefetch" href="/assets/js/249.17761090.js"><link rel="prefetch" href="/assets/js/25.bbf9411e.js"><link rel="prefetch" href="/assets/js/250.e0474f9d.js"><link rel="prefetch" href="/assets/js/251.4ee85ae5.js"><link rel="prefetch" href="/assets/js/252.6946d29c.js"><link rel="prefetch" href="/assets/js/253.b13399dd.js"><link rel="prefetch" href="/assets/js/254.f5a78fe5.js"><link rel="prefetch" href="/assets/js/255.67794845.js"><link rel="prefetch" href="/assets/js/256.34867632.js"><link rel="prefetch" href="/assets/js/257.58ef8ea4.js"><link rel="prefetch" href="/assets/js/258.840f1f69.js"><link rel="prefetch" href="/assets/js/259.c4ca3aae.js"><link rel="prefetch" href="/assets/js/26.eb158c2d.js"><link rel="prefetch" href="/assets/js/260.a8766ee4.js"><link rel="prefetch" href="/assets/js/261.c450d645.js"><link rel="prefetch" href="/assets/js/262.5dfb132e.js"><link rel="prefetch" href="/assets/js/263.d105b504.js"><link rel="prefetch" href="/assets/js/264.9c51b91a.js"><link rel="prefetch" href="/assets/js/265.cd869d87.js"><link rel="prefetch" href="/assets/js/266.2c81f2aa.js"><link rel="prefetch" href="/assets/js/267.0eb433a5.js"><link rel="prefetch" href="/assets/js/268.61403538.js"><link rel="prefetch" href="/assets/js/269.d8a5aa4a.js"><link rel="prefetch" href="/assets/js/27.a2d7eacd.js"><link rel="prefetch" href="/assets/js/270.9aa28099.js"><link rel="prefetch" href="/assets/js/271.c97defb3.js"><link rel="prefetch" href="/assets/js/272.28278b0b.js"><link rel="prefetch" href="/assets/js/273.614942c0.js"><link rel="prefetch" href="/assets/js/274.afead1c8.js"><link rel="prefetch" href="/assets/js/275.82fc06e8.js"><link rel="prefetch" href="/assets/js/276.2ce1b15e.js"><link rel="prefetch" href="/assets/js/277.59413c64.js"><link rel="prefetch" href="/assets/js/278.40f50c75.js"><link rel="prefetch" href="/assets/js/279.4ec1739a.js"><link rel="prefetch" href="/assets/js/28.6a081e3d.js"><link rel="prefetch" href="/assets/js/280.61eb02df.js"><link rel="prefetch" href="/assets/js/281.15087a2b.js"><link rel="prefetch" href="/assets/js/282.2573cc17.js"><link rel="prefetch" href="/assets/js/283.054c9336.js"><link rel="prefetch" href="/assets/js/284.6a794878.js"><link rel="prefetch" href="/assets/js/285.12d934a1.js"><link rel="prefetch" href="/assets/js/286.29f567eb.js"><link rel="prefetch" href="/assets/js/287.d4f0bca8.js"><link rel="prefetch" href="/assets/js/288.7c1dd248.js"><link rel="prefetch" href="/assets/js/289.9f985dbb.js"><link rel="prefetch" href="/assets/js/29.88c3d7a0.js"><link rel="prefetch" href="/assets/js/290.3e3e8928.js"><link rel="prefetch" href="/assets/js/291.24ed9d7f.js"><link rel="prefetch" href="/assets/js/292.94fd80de.js"><link rel="prefetch" href="/assets/js/293.255bc297.js"><link rel="prefetch" href="/assets/js/294.84135584.js"><link rel="prefetch" href="/assets/js/295.89da57bd.js"><link rel="prefetch" href="/assets/js/296.90becf38.js"><link rel="prefetch" href="/assets/js/297.b4b88dbf.js"><link rel="prefetch" href="/assets/js/298.793c0f1f.js"><link rel="prefetch" href="/assets/js/299.2d9f2244.js"><link rel="prefetch" href="/assets/js/30.6e454535.js"><link rel="prefetch" href="/assets/js/300.b538064a.js"><link rel="prefetch" href="/assets/js/301.32a4bff4.js"><link rel="prefetch" href="/assets/js/302.8f5aa694.js"><link rel="prefetch" href="/assets/js/303.47e446cd.js"><link rel="prefetch" href="/assets/js/304.e4fe1250.js"><link rel="prefetch" href="/assets/js/305.72f47081.js"><link rel="prefetch" href="/assets/js/306.b4f65a5b.js"><link rel="prefetch" href="/assets/js/307.3187f964.js"><link rel="prefetch" href="/assets/js/308.1c9924f7.js"><link rel="prefetch" href="/assets/js/309.7ed10c52.js"><link rel="prefetch" href="/assets/js/31.89805053.js"><link rel="prefetch" href="/assets/js/310.2e18354b.js"><link rel="prefetch" href="/assets/js/311.c125ff29.js"><link rel="prefetch" href="/assets/js/312.1a2d1d4f.js"><link rel="prefetch" href="/assets/js/313.8ad92b70.js"><link rel="prefetch" href="/assets/js/314.091fa0d3.js"><link rel="prefetch" href="/assets/js/315.29ba5d51.js"><link rel="prefetch" href="/assets/js/316.31ade9b8.js"><link rel="prefetch" href="/assets/js/317.7060fc04.js"><link rel="prefetch" href="/assets/js/318.6cf8cf4b.js"><link rel="prefetch" href="/assets/js/319.78eb7db8.js"><link rel="prefetch" href="/assets/js/32.c2a8ee5f.js"><link rel="prefetch" href="/assets/js/320.9b6f465f.js"><link rel="prefetch" href="/assets/js/321.379d2948.js"><link rel="prefetch" href="/assets/js/322.73fdbdd3.js"><link rel="prefetch" href="/assets/js/323.6caa2080.js"><link rel="prefetch" href="/assets/js/324.ab4dfd33.js"><link rel="prefetch" href="/assets/js/325.278e25db.js"><link rel="prefetch" href="/assets/js/326.462cf2df.js"><link rel="prefetch" href="/assets/js/327.f28c1c8f.js"><link rel="prefetch" href="/assets/js/328.8f58d3e2.js"><link rel="prefetch" href="/assets/js/329.6aa6d948.js"><link rel="prefetch" href="/assets/js/33.23184842.js"><link rel="prefetch" href="/assets/js/330.93eb9f9a.js"><link rel="prefetch" href="/assets/js/331.80b87cc1.js"><link rel="prefetch" href="/assets/js/332.68f247fb.js"><link rel="prefetch" href="/assets/js/333.dd69e3b6.js"><link rel="prefetch" href="/assets/js/334.59b3382a.js"><link rel="prefetch" href="/assets/js/335.039070e2.js"><link rel="prefetch" href="/assets/js/336.beaed5bb.js"><link rel="prefetch" href="/assets/js/337.b65c2e7f.js"><link rel="prefetch" href="/assets/js/338.290ea1fd.js"><link rel="prefetch" href="/assets/js/339.cfbeb3b3.js"><link rel="prefetch" href="/assets/js/34.d4ac227e.js"><link rel="prefetch" href="/assets/js/340.b2ca3fd2.js"><link rel="prefetch" href="/assets/js/341.e661e4d8.js"><link rel="prefetch" href="/assets/js/342.d521d8cb.js"><link rel="prefetch" href="/assets/js/343.699c8cd9.js"><link rel="prefetch" href="/assets/js/344.94a01b6d.js"><link rel="prefetch" href="/assets/js/345.360a3a9d.js"><link rel="prefetch" href="/assets/js/346.421e0004.js"><link rel="prefetch" href="/assets/js/347.067ddec2.js"><link rel="prefetch" href="/assets/js/348.8ff7500d.js"><link rel="prefetch" href="/assets/js/349.1cb157da.js"><link rel="prefetch" href="/assets/js/35.79be4c2d.js"><link rel="prefetch" href="/assets/js/350.f3122d6b.js"><link rel="prefetch" href="/assets/js/351.73ab553d.js"><link rel="prefetch" href="/assets/js/352.c1d9b8a9.js"><link rel="prefetch" href="/assets/js/353.b7b7ef35.js"><link rel="prefetch" href="/assets/js/354.26eb4816.js"><link rel="prefetch" href="/assets/js/355.77e39d15.js"><link rel="prefetch" href="/assets/js/356.b3b11ec8.js"><link rel="prefetch" href="/assets/js/357.e826e380.js"><link rel="prefetch" href="/assets/js/358.08caf944.js"><link rel="prefetch" href="/assets/js/359.8eaa97e8.js"><link rel="prefetch" href="/assets/js/36.b0bd125d.js"><link rel="prefetch" href="/assets/js/360.ff38e37d.js"><link rel="prefetch" href="/assets/js/361.2666265d.js"><link rel="prefetch" href="/assets/js/362.07e86e74.js"><link rel="prefetch" href="/assets/js/363.081cf1f1.js"><link rel="prefetch" href="/assets/js/364.033be969.js"><link rel="prefetch" href="/assets/js/365.f3ec12a0.js"><link rel="prefetch" href="/assets/js/366.5795988a.js"><link rel="prefetch" href="/assets/js/367.c7a03b31.js"><link rel="prefetch" href="/assets/js/368.fa987e7a.js"><link rel="prefetch" href="/assets/js/369.3d7d842e.js"><link rel="prefetch" href="/assets/js/37.cb6b2268.js"><link rel="prefetch" href="/assets/js/370.70957e5d.js"><link rel="prefetch" href="/assets/js/371.6758256c.js"><link rel="prefetch" href="/assets/js/372.e5a12ca8.js"><link rel="prefetch" href="/assets/js/373.24a33d42.js"><link rel="prefetch" href="/assets/js/374.71360427.js"><link rel="prefetch" href="/assets/js/375.7d66db26.js"><link rel="prefetch" href="/assets/js/376.ca08b015.js"><link rel="prefetch" href="/assets/js/377.9aae8605.js"><link rel="prefetch" href="/assets/js/378.82b57f2e.js"><link rel="prefetch" href="/assets/js/379.70e2c604.js"><link rel="prefetch" href="/assets/js/38.02d1febb.js"><link rel="prefetch" href="/assets/js/380.6ccc50ac.js"><link rel="prefetch" href="/assets/js/381.c66cc311.js"><link rel="prefetch" href="/assets/js/382.18d480ab.js"><link rel="prefetch" href="/assets/js/383.621c20db.js"><link rel="prefetch" href="/assets/js/384.d9ed68d0.js"><link rel="prefetch" href="/assets/js/385.552a868c.js"><link rel="prefetch" href="/assets/js/386.48562ecd.js"><link rel="prefetch" href="/assets/js/387.25d5c791.js"><link rel="prefetch" href="/assets/js/388.8dd5308f.js"><link rel="prefetch" href="/assets/js/389.b793f086.js"><link rel="prefetch" href="/assets/js/39.52b78afa.js"><link rel="prefetch" href="/assets/js/390.c1b37ee1.js"><link rel="prefetch" href="/assets/js/391.cc6f6f1b.js"><link rel="prefetch" href="/assets/js/392.f635630d.js"><link rel="prefetch" href="/assets/js/393.4ff90fa7.js"><link rel="prefetch" href="/assets/js/394.397244ff.js"><link rel="prefetch" href="/assets/js/395.18236afd.js"><link rel="prefetch" href="/assets/js/396.33051f11.js"><link rel="prefetch" href="/assets/js/397.6829ff8e.js"><link rel="prefetch" href="/assets/js/398.3f6541b5.js"><link rel="prefetch" href="/assets/js/399.3a6bb206.js"><link rel="prefetch" href="/assets/js/4.3bb46a9f.js"><link rel="prefetch" href="/assets/js/40.c160b9fd.js"><link rel="prefetch" href="/assets/js/400.926d58c3.js"><link rel="prefetch" href="/assets/js/401.fa3a64c7.js"><link rel="prefetch" href="/assets/js/402.586739cf.js"><link rel="prefetch" href="/assets/js/403.e8bea648.js"><link rel="prefetch" href="/assets/js/404.40feb4b5.js"><link rel="prefetch" href="/assets/js/405.ea78f429.js"><link rel="prefetch" href="/assets/js/406.06a34634.js"><link rel="prefetch" href="/assets/js/407.b265c7b5.js"><link rel="prefetch" href="/assets/js/408.3b9353c4.js"><link rel="prefetch" href="/assets/js/409.c5cc81c6.js"><link rel="prefetch" href="/assets/js/41.0aba3e27.js"><link rel="prefetch" href="/assets/js/410.7914c481.js"><link rel="prefetch" href="/assets/js/411.80e7a82f.js"><link rel="prefetch" href="/assets/js/412.ec4398a7.js"><link rel="prefetch" href="/assets/js/413.9bf037d5.js"><link rel="prefetch" href="/assets/js/414.f22b0ded.js"><link rel="prefetch" href="/assets/js/415.a18709ff.js"><link rel="prefetch" href="/assets/js/416.83310c95.js"><link rel="prefetch" href="/assets/js/417.4b19e45b.js"><link rel="prefetch" href="/assets/js/42.a2225282.js"><link rel="prefetch" href="/assets/js/43.60b8cc73.js"><link rel="prefetch" href="/assets/js/44.d1bd963b.js"><link rel="prefetch" href="/assets/js/45.a2d474d6.js"><link rel="prefetch" href="/assets/js/46.eac472d0.js"><link rel="prefetch" href="/assets/js/47.542459f0.js"><link rel="prefetch" href="/assets/js/48.341b8db8.js"><link rel="prefetch" href="/assets/js/49.a786e041.js"><link rel="prefetch" href="/assets/js/5.28151e60.js"><link rel="prefetch" href="/assets/js/50.3e9d91ce.js"><link rel="prefetch" href="/assets/js/51.0729208c.js"><link rel="prefetch" href="/assets/js/52.76bd2586.js"><link rel="prefetch" href="/assets/js/53.5ff982be.js"><link rel="prefetch" href="/assets/js/54.23f15748.js"><link rel="prefetch" href="/assets/js/55.27a2694b.js"><link rel="prefetch" href="/assets/js/56.8f284c7f.js"><link rel="prefetch" href="/assets/js/57.90d019e1.js"><link rel="prefetch" href="/assets/js/58.7b6dc848.js"><link rel="prefetch" href="/assets/js/59.bcd80f71.js"><link rel="prefetch" href="/assets/js/6.499be6d9.js"><link rel="prefetch" href="/assets/js/60.64e983eb.js"><link rel="prefetch" href="/assets/js/61.d22192ff.js"><link rel="prefetch" href="/assets/js/62.c84c7aaa.js"><link rel="prefetch" href="/assets/js/63.dd026eb1.js"><link rel="prefetch" href="/assets/js/64.2f75d60b.js"><link rel="prefetch" href="/assets/js/65.dc493049.js"><link rel="prefetch" href="/assets/js/66.edd545c7.js"><link rel="prefetch" href="/assets/js/67.798cfbfc.js"><link rel="prefetch" href="/assets/js/68.b0ebc9d8.js"><link rel="prefetch" href="/assets/js/69.c929ddc2.js"><link rel="prefetch" href="/assets/js/7.2497c05f.js"><link rel="prefetch" href="/assets/js/70.3c2e3a65.js"><link rel="prefetch" href="/assets/js/71.db3a0474.js"><link rel="prefetch" href="/assets/js/72.24df9a07.js"><link rel="prefetch" href="/assets/js/73.cd7f0a9d.js"><link rel="prefetch" href="/assets/js/74.c940ffba.js"><link rel="prefetch" href="/assets/js/75.567ac3b4.js"><link rel="prefetch" href="/assets/js/76.72062db1.js"><link rel="prefetch" href="/assets/js/77.3bcb196b.js"><link rel="prefetch" href="/assets/js/78.e82d2ca7.js"><link rel="prefetch" href="/assets/js/79.495fd885.js"><link rel="prefetch" href="/assets/js/8.71ec8233.js"><link rel="prefetch" href="/assets/js/80.7eb160e3.js"><link rel="prefetch" href="/assets/js/81.d83716f9.js"><link rel="prefetch" href="/assets/js/82.a16620eb.js"><link rel="prefetch" href="/assets/js/83.109e69d7.js"><link rel="prefetch" href="/assets/js/84.19098fb4.js"><link rel="prefetch" href="/assets/js/85.3f36c2e3.js"><link rel="prefetch" href="/assets/js/86.f8bed698.js"><link rel="prefetch" href="/assets/js/87.00204387.js"><link rel="prefetch" href="/assets/js/88.23ecf470.js"><link rel="prefetch" href="/assets/js/89.dbe77c40.js"><link rel="prefetch" href="/assets/js/9.241577bb.js"><link rel="prefetch" href="/assets/js/90.a106e2e7.js"><link rel="prefetch" href="/assets/js/91.dcded4ed.js"><link rel="prefetch" href="/assets/js/92.14236817.js"><link rel="prefetch" href="/assets/js/93.c4509213.js"><link rel="prefetch" href="/assets/js/94.8e569620.js"><link rel="prefetch" href="/assets/js/95.0cc80ef4.js"><link rel="prefetch" href="/assets/js/96.8f74c17c.js"><link rel="prefetch" href="/assets/js/97.77e41f84.js"><link rel="prefetch" href="/assets/js/98.bf44b86d.js"><link rel="prefetch" href="/assets/js/99.f75896be.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.029a7c95.js">
    <link rel="stylesheet" href="/assets/css/0.styles.5d34d66f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">以太坊改进提案 EIPs</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://ethlibrary.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  About us
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <a href="https://github.com/ethlibrary/EIPs" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><a href="/summary/all.html" class="sidebar-link">All EIPs List</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Status</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/living.html" class="sidebar-link">Living (1)</a></li><li><a href="/summary/final.html" class="sidebar-link">Final (88)</a></li><li><a href="/summary/draft.html" class="sidebar-link">Draft (157)</a></li><li><a href="/summary/stagnant.html" class="sidebar-link">Stagnant (101)</a></li><li><a href="/summary/withdrawn.html" class="sidebar-link">Withdrawn (22)</a></li><li><a href="/summary/last-call.html" class="sidebar-link">Last Call (8)</a></li><li><a href="/summary/review.html" class="sidebar-link">Review (14)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Types</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/meta.html" class="sidebar-link">Meta (18)</a></li><li><a href="/summary/standards-track.html" class="sidebar-link">Standards Track (367)</a></li><li><a href="/summary/informational.html" class="sidebar-link">Informational (6)</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>EIPs by Category</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/summary/core.html" class="sidebar-link">Core (165)</a></li><li><a href="/summary/erc.html" class="sidebar-link">ERC (153)</a></li><li><a href="/summary/interface.html" class="sidebar-link">Interface (38)</a></li><li><a href="/summary/networking.html" class="sidebar-link">Networking (11)</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="simple-summary"><a href="#simple-summary" class="header-anchor">#</a> Simple Summary</h2> <p>This is an EIP that implements net gas metering. It's a combined
version of <a href="/eip-1283.html">EIP-1283</a> and <a href="/eip-1706.html">EIP-1706</a>, with a structured definition so as
to make it interoperable with other gas changes such as <a href="/eip-1884.html">EIP-1884</a>.</p> <h2 id="abstract"><a href="#abstract" class="header-anchor">#</a> Abstract</h2> <p>This EIP provides a structured definition of net gas metering changes
for <code>SSTORE</code> opcode, enabling new usages for contract storage, and
reducing excessive gas costs where it doesn’t match how most
implementation works.</p> <p>This is a combination of <a href="/eip-1283.html">EIP-1283</a> and <a href="/eip-1706.html">EIP-1706</a>.</p> <h2 id="motivation"><a href="#motivation" class="header-anchor">#</a> Motivation</h2> <p>This EIP proposes a way for gas metering on <code>SSTORE</code>, using information
that is more universally available to most implementations, and
require as little change in implementation structures as possible.</p> <ul><li>Storage slot’s original value.</li> <li>Storage slot’s current value.</li> <li>Refund counter.</li></ul> <p>Usages that benefits from this EIP’s gas reduction scheme includes:</p> <ul><li>Subsequent storage write operations within the same call frame. This
includes reentry locks, same-contract multi-send, etc.</li> <li>Exchange storage information between sub call frame and parent call
frame, where this information does not need to be persistent outside
of a transaction. This includes sub-frame error codes and message
passing, etc.</li></ul> <p>The original definition of EIP-1283 created a danger of a new kind of
reentrancy attacks on existing contracts as Solidity by default grants
a &quot;stipend&quot; of 2300 gas to simple transfer calls. This danger is
easily mitigated if <code>SSTORE</code> is not allowed in low gasleft state,
without breaking the backward compatibility and the original intention
of EIP-1283.</p> <p>This EIP also replaces the original EIP-1283 value definitions of gas
by parameters, so that it's more structured, and easier to define
changes in the future.</p> <h2 id="specification"><a href="#specification" class="header-anchor">#</a> Specification</h2> <p>Define variables <code>SLOAD_GAS</code>, <code>SSTORE_SET_GAS</code>, <code>SSTORE_RESET_GAS</code> and
<code>SSTORE_CLEARS_SCHEDULE</code>. The old and new values for those variables
are:</p> <ul><li><code>SLOAD_GAS</code>: changed from <code>200</code> to <code>800</code>.</li> <li><code>SSTORE_SET_GAS</code>: <code>20000</code>, not changed.</li> <li><code>SSTORE_RESET_GAS</code>: <code>5000</code>, not changed.</li> <li><code>SSTORE_CLEARS_SCHEDULE</code>: <code>15000</code>, not changed.</li></ul> <p>Change the definition of EIP-1283 using those variables. The new
specification, combining EIP-1283 and EIP-1706, will look like
below. The terms <em>original value</em>, <em>current value</em> and <em>new value</em> are
defined in EIP-1283.</p> <p>Replace <code>SSTORE</code> opcode gas cost calculation (including refunds) with
the following logic:</p> <ul><li>If <em>gasleft</em> is less than or equal to gas stipend, fail the current
call frame with 'out of gas' exception.</li> <li>If <em>current value</em> equals <em>new value</em> (this is a no-op), <code>SLOAD_GAS</code>
is deducted.</li> <li>If <em>current value</em> does not equal <em>new value</em> <ul><li>If <em>original value</em> equals <em>current value</em> (this storage slot has
not been changed by the current execution context)
<ul><li>If <em>original value</em> is 0, <code>SSTORE_SET_GAS</code> is deducted.</li> <li>Otherwise, <code>SSTORE_RESET_GAS</code> gas is deducted. If <em>new value</em> is
0, add <code>SSTORE_CLEARS_SCHEDULE</code> gas to refund counter.</li></ul></li> <li>If <em>original value</em> does not equal <em>current value</em> (this storage
slot is dirty), <code>SLOAD_GAS</code> gas is deducted. Apply both of the
following clauses.
<ul><li>If <em>original value</em> is not 0
<ul><li>If <em>current value</em> is 0 (also means that <em>new value</em> is not
0), remove <code>SSTORE_CLEARS_SCHEDULE</code> gas from refund
counter.</li> <li>If <em>new value</em> is 0 (also means that <em>current value</em> is not
0), add <code>SSTORE_CLEARS_SCHEDULE</code> gas to refund counter.</li></ul></li> <li>If <em>original value</em> equals <em>new value</em> (this storage slot is
reset)
<ul><li>If <em>original value</em> is 0, add <code>SSTORE_SET_GAS - SLOAD_GAS</code> to
refund counter.</li> <li>Otherwise, add <code>SSTORE_RESET_GAS - SLOAD_GAS</code> gas to refund
counter.</li></ul></li></ul></li></ul></li></ul> <p>An implementation should also note that with the above definition, if
the implementation uses call-frame refund counter, the counter can go
negative. If the implementation uses transaction-wise refund counter,
the counter always stays positive.</p> <h2 id="rationale"><a href="#rationale" class="header-anchor">#</a> Rationale</h2> <p>This EIP mostly achieves what a transient storage tries to do
(<a href="/eip-1087.html">EIP-1087</a> and <a href="/eip-1153.html">EIP-1153</a>), but without the complexity of introducing the
concept of &quot;dirty maps&quot;, or an extra storage struct.</p> <ul><li>We don't suffer from the optimization limitation of
EIP-1087. EIP-1087 requires keeping a dirty map for storage changes,
and implicitly makes the assumption that a transaction's storage
changes are committed to the storage trie at the end of a
transaction. This works well for some implementations, but not for
others. After <a href="/eip-658.html">EIP-658</a>, an efficient storage cache implementation
would probably use an in-memory trie (without RLP encoding/decoding)
or other immutable data structures to keep track of storage changes,
and only commit changes at the end of a block. For them, it is
possible to know a storage's original value and current value, but
it is not possible to iterate over all storage changes without
incurring additional memory or processing costs.</li> <li>It never costs more gas compared with the current scheme.</li> <li>It covers all usages for a transient storage. Clients that are easy
to implement EIP-1087 will also be easy to implement this
specification. Some other clients might require a little bit extra
refactoring on this. Nonetheless, no extra memory or processing cost
is needed on runtime.</li></ul> <p>Regarding <code>SSTORE</code> gas cost and refunds, see Appendix for proofs of
properties that this EIP satisfies.</p> <ul><li>For <em>absolute gas used</em> (that is, actual <em>gas used</em> minus <em>refund</em>),
this EIP is equivalent to EIP-1087 for all cases.</li> <li>For one particular case, where a storage slot is changed, reset to
its original value, and then changed again, EIP-1283 would move more
gases to refund counter compared with EIP-1087.</li></ul> <p>Examine examples provided in EIP-1087's Motivation (with <code>SLOAD_GAS</code> being
<code>200</code>):</p> <ul><li>If a contract with empty storage sets slot 0 to 1, then back to 0,
it will be charged <code>20000 + 200 - 19800 = 400</code> gas.</li> <li>A contract with empty storage that increments slot 0 5 times will be
charged <code>20000 + 5 * 200 = 21000</code> gas.</li> <li>A balance transfer from account A to account B followed by a
transfer from B to C, with all accounts having nonzero starting and
ending balances, it will cost <code>5000 * 3 + 200 - 4800 = 10400</code> gas.</li></ul> <p>In order to keep in place the implicit reentrancy protection of
existing contracts, transactions should not be allowed to modify state
if the remaining gas is lower then the gas stipend given to
&quot;transfer&quot;/&quot;send&quot; in Solidity. These are other proposed remediations
and objections to implementing them:</p> <ul><li>Drop EIP-1283 and abstain from modifying <code>SSTORE</code> cost
<ul><li>EIP-1283 is an important update</li> <li>It was accepted and implemented on test networks and in clients.</li></ul></li> <li>Add a new call context that permits LOG opcodes but not changes to state.
<ul><li>Adds another call type beyond existing regular/staticcall</li></ul></li> <li>Raise the cost of <code>SSTORE</code> to dirty slots to &gt;=2300 gas
<ul><li>Makes net gas metering much less useful.</li></ul></li> <li>Reduce the gas stipend
<ul><li>Makes the stipend almost useless.</li></ul></li> <li>Increase the cost of writes to dirty slots back to 5000 gas, but add
4800 gas to the refund counter
<ul><li>Still doesn’t make the invariant explicit.</li> <li>Requires callers to supply more gas, just to have it refunded</li></ul></li> <li>Add contract metadata specifying per-contract EVM version, and only
apply <code>SSTORE</code> changes to contracts deployed with the new version.</li></ul> <h2 id="backwards-compatibility"><a href="#backwards-compatibility" class="header-anchor">#</a> Backwards Compatibility</h2> <p>This EIP requires a hard fork to implement. No gas cost increase is
anticipated, and many contracts will see gas reduction.</p> <p>Performing <code>SSTORE</code> has never been possible with less than 5000 gas, so
it does not introduce incompatibility to the Ethereum mainnet. Gas
estimation should account for this requirement.</p> <h2 id="test-cases"><a href="#test-cases" class="header-anchor">#</a> Test Cases</h2> <table><thead><tr><th>Code</th> <th>Used Gas</th> <th>Refund</th> <th>Original</th> <th>1st</th> <th>2nd</th> <th>3rd</th></tr></thead> <tbody><tr><td><code>0x60006000556000600055</code></td> <td>1612</td> <td>0</td> <td>0</td> <td>0</td> <td>0</td> <td></td></tr> <tr><td><code>0x60006000556001600055</code></td> <td>20812</td> <td>0</td> <td>0</td> <td>0</td> <td>1</td> <td></td></tr> <tr><td><code>0x60016000556000600055</code></td> <td>20812</td> <td>19200</td> <td>0</td> <td>1</td> <td>0</td> <td></td></tr> <tr><td><code>0x60016000556002600055</code></td> <td>20812</td> <td>0</td> <td>0</td> <td>1</td> <td>2</td> <td></td></tr> <tr><td><code>0x60016000556001600055</code></td> <td>20812</td> <td>0</td> <td>0</td> <td>1</td> <td>1</td> <td></td></tr> <tr><td><code>0x60006000556000600055</code></td> <td>5812</td> <td>15000</td> <td>1</td> <td>0</td> <td>0</td> <td></td></tr> <tr><td><code>0x60006000556001600055</code></td> <td>5812</td> <td>4200</td> <td>1</td> <td>0</td> <td>1</td> <td></td></tr> <tr><td><code>0x60006000556002600055</code></td> <td>5812</td> <td>0</td> <td>1</td> <td>0</td> <td>2</td> <td></td></tr> <tr><td><code>0x60026000556000600055</code></td> <td>5812</td> <td>15000</td> <td>1</td> <td>2</td> <td>0</td> <td></td></tr> <tr><td><code>0x60026000556003600055</code></td> <td>5812</td> <td>0</td> <td>1</td> <td>2</td> <td>3</td> <td></td></tr> <tr><td><code>0x60026000556001600055</code></td> <td>5812</td> <td>4200</td> <td>1</td> <td>2</td> <td>1</td> <td></td></tr> <tr><td><code>0x60026000556002600055</code></td> <td>5812</td> <td>0</td> <td>1</td> <td>2</td> <td>2</td> <td></td></tr> <tr><td><code>0x60016000556000600055</code></td> <td>5812</td> <td>15000</td> <td>1</td> <td>1</td> <td>0</td> <td></td></tr> <tr><td><code>0x60016000556002600055</code></td> <td>5812</td> <td>0</td> <td>1</td> <td>1</td> <td>2</td> <td></td></tr> <tr><td><code>0x60016000556001600055</code></td> <td>1612</td> <td>0</td> <td>1</td> <td>1</td> <td>1</td> <td></td></tr> <tr><td><code>0x600160005560006000556001600055</code></td> <td>40818</td> <td>19200</td> <td>0</td> <td>1</td> <td>0</td> <td>1</td></tr> <tr><td><code>0x600060005560016000556000600055</code></td> <td>10818</td> <td>19200</td> <td>1</td> <td>0</td> <td>1</td> <td>0</td></tr></tbody></table> <h2 id="implementation"><a href="#implementation" class="header-anchor">#</a> Implementation</h2> <p>To be added.</p> <h2 id="appendix-proof"><a href="#appendix-proof" class="header-anchor">#</a> Appendix: Proof</h2> <p>Because the <em>storage slot's original value</em> is defined as the value
when a reversion happens on the <em>current transaction</em>, it's easy to
see that call frames won't interfere <code>SSTORE</code> gas calculation. So
although the below proof is discussed without call frames, it applies
to all situations with call frames. We will discuss the case
separately for <em>original value</em> being zero and not zero, and use
<em>induction</em> to prove some properties of <code>SSTORE</code> gas cost.</p> <p><em>Final value</em> is the value of a particular storage slot at the end of
a transaction. <em>Absolute gas used</em> is the absolute value of <em>gas used</em>
minus <em>refund</em>. We use <code>N</code> to represent the total number of <code>SSTORE</code>
operations on a storage slot. For states discussed below, refer to
<em>State Transition</em> in <em>Explanation</em> section.</p> <p>Below we do the proof under the assumption that all parameters are
unchanged, meaning <code>SLOAD_GAS</code> is <code>200</code>. However, note that the proof
still applies no matter how <code>SLOAD_GAS</code> is changed.</p> <h3 id="original-value-being-zero"><a href="#original-value-being-zero" class="header-anchor">#</a> Original Value Being Zero</h3> <p>When <em>original value</em> is 0, we want to prove that:</p> <ul><li><strong>Case I</strong>: If the <em>final value</em> ends up still being 0, we want to charge <code>200 * N</code> gases, because no disk write is needed.</li> <li><strong>Case II</strong>: If the <em>final value</em> ends up being a non-zero value, we want to
charge <code>20000 + 200 * (N-1)</code> gas, because it requires writing this
slot to disk.</li></ul> <h4 id="base-case"><a href="#base-case" class="header-anchor">#</a> Base Case</h4> <p>We always start at state A. The first <code>SSTORE</code> can:</p> <ul><li>Go to state A: 200 gas is deducted. We satisfy <em>Case I</em> because
<code>200 * N == 200 * 1</code>.</li> <li>Go to state B: 20000 gas is deducted. We satisfy <em>Case II</em> because
<code>20000 + 200 * (N-1) == 20000 + 200 * 0</code>.</li></ul> <h4 id="inductive-step"><a href="#inductive-step" class="header-anchor">#</a> Inductive Step</h4> <ul><li>From A to A. The previous gas cost is <code>200 * (N-1)</code>. The current
gas cost is <code>200 + 200 * (N-1)</code>. It satisfy <em>Case I</em>.</li> <li>From A to B. The previous gas cost is <code>200 * (N-1)</code>. The current
gas cost is <code>20000 + 200 * (N-1)</code>. It satisfy <em>Case II</em>.</li> <li>From B to B. The previous gas cost is <code>20000 + 200 * (N-2)</code>. The
current gas cost is <code>200 + 20000 + 200 * (N-2)</code>. It satisfy
<em>Case II</em>.</li> <li>From B to A. The previous gas cost is <code>20000 + 200 * (N-2)</code>. The
current gas cost is <code>200 - 19800 + 20000 + 200 * (N-2)</code>. It satisfy
<em>Case I</em>.</li></ul> <h3 id="original-value-not-being-zero"><a href="#original-value-not-being-zero" class="header-anchor">#</a> Original Value Not Being Zero</h3> <p>When <em>original value</em> is not 0, we want to prove that:</p> <ul><li><strong>Case I</strong>: If the <em>final value</em> ends up unchanged, we want to
charge <code>200 * N</code> gases, because no disk write is needed.</li> <li><strong>Case II</strong>: If the <em>final value</em> ends up being zero, we want to
charge <code>5000 - 15000 + 200 * (N-1)</code> gas. Note that <code>15000</code> is the
refund in actual definition.</li> <li><strong>Case III</strong>: If the <em>final value</em> ends up being a changed non-zero
value, we want to charge <code>5000 + 200 * (N-1)</code> gas.</li></ul> <h4 id="base-case-2"><a href="#base-case-2" class="header-anchor">#</a> Base Case</h4> <p>We always start at state X. The first <code>SSTORE</code> can:</p> <ul><li>Go to state X: 200 gas is deducted. We satisfy <em>Case I</em> because
<code>200 * N == 200 * 1</code>.</li> <li>Go to state Y: 5000 gas is deducted. We satisfy <em>Case III</em> because
<code>5000 + 200 * (N-1) == 5000 + 200 * 0</code>.</li> <li>Go to state Z: The absolute gas used is <code>5000 - 15000</code> where 15000
is the refund. We satisfy <em>Case II</em> because <code>5000 - 15000 + 200 * (N-1) == 5000 - 15000 + 200 * 0</code>.</li></ul> <h4 id="inductive-step-2"><a href="#inductive-step-2" class="header-anchor">#</a> Inductive Step</h4> <ul><li>From X to X. The previous gas cost is <code>200 * (N-1)</code>. The current gas
cost is <code>200 + 200 * (N-1)</code>. It satisfy <em>Case I</em>.</li> <li>From X to Y. The previous gas cost is <code>200 * (N-1)</code>. The current gas
cost is <code>5000 + 200 * (N-1)</code>. It satisfy <em>Case III</em>.</li> <li>From X to Z. The previous gas cost is <code>200 * (N-1)</code>. The current
absolute gas cost is <code>5000 - 15000 + 200 * (N-1)</code>. It satisfy <em>Case
II</em>.</li> <li>From Y to X. The previous gas cost is <code>5000 + 200 * (N-2)</code>. The
absolute current gas cost is <code>200 - 4800 + 5000 + 200 * (N-2)</code>. It
satisfy <em>Case I</em>.</li> <li>From Y to Y. The previous gas cost is <code>5000 + 200 * (N-2)</code>. The
current gas cost is <code>200 + 5000 + 200 * (N-2)</code>. It satisfy <em>Case
III</em>.</li> <li>From Y to Z. The previous gas cost is <code>5000 + 200 * (N-2)</code>. The
current absolute gas cost is <code>200 - 15000 + 5000 + 200 * (N-2)</code>. It
satisfy <em>Case II</em>.</li> <li>From Z to X. The previous gas cost is <code>5000 - 15000 + 200 * (N-2)</code>. The current absolute gas cost is <code>200 + 10200 + 5000 - 15000 + 200 * (N-2)</code>. It satisfy <em>Case I</em>.</li> <li>From Z to Y. The previous gas cost is <code>5000 - 15000 + 200 * (N-2)</code>. The current absolute gas cost is <code>200 + 15000 + 5000 - 15000 + 200 * (N-2)</code>. It satisfy <em>Case III</em>.</li> <li>From Z to Z. The previous gas cost is <code>5000 - 15000 + 200 * (N-2)</code>. The current absolute gas cost is <code>200 + 5000 - 15000 + 200 * (N-2)</code>. It satisfy <em>Case II</em>.</li></ul> <h2 id="copyright"><a href="#copyright" class="header-anchor">#</a> Copyright</h2> <p>Copyright and related rights waived via <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" rel="noopener noreferrer">CC0<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/ethlibrary/EIPs/edit/master/EIPS/eip-2200.md" target="_blank" rel="noopener noreferrer">帮助完善文档</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">9/26/2021, 5:29:53 AM</span></div></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3c081c0d.js" defer></script><script src="/assets/js/3.afc73834.js" defer></script><script src="/assets/js/199.98b8b4e2.js" defer></script>
  </body>
</html>
